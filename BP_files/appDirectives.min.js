/*! websurvey - v0.0.1 - 2020-06-24 */
function getRenderPrompts(a){var b=[];return null!=a&&null!=a.prompts&&a.prompts.length>0?b=a.prompts:b[0]=a,b}function createPage(a,b,c){var d={pageId:null,randNum:Math.floor(10*Math.random()),prompts:[],answers:{},errors:{},directiveData:{},otherOptions:{},renderedPrompts:0,webSurveyThemeId:null,themeKey:null,transferOffsite:!1,windowTitle:null,cssIdentifier:null,complete:!1,samsungPhone:!1,hideNavButtons:!1,hideBackButton:!1,hideNextButton:!1,onePageLeft:!1};c&&c.init(a),d.pageId=a.pageId,d.transferOffsite=a.transferOffsite,d.windowTitle=a.windowTitle,d.cssIdentifier=a.cssIdentifier,d.complete=a.complete,d.samsungPhone=a.samsungPhone,d.onePageLeft=a.onePageLeft,pageAutoAdvance.verify(a.prompts)&&(d.hideNavButtons=!0),pageAutoAdvance.hideNextPageBackButton?d.hideBackButton=!0:d.hideBackButton=!1,d.hideBackButton=d.hideBackButton||!a.displayPreviousButton,d.hideNextButton=d.hideNextButton||!a.displayNextButton;var e=populatePromptEventDTOs(a.prompts);Object.keys(e).length>0&&(d.promptEventDTOs=e),d.prompts=a.prompts,void 0!==a.context&&(d.webSurveyThemeId=a.context.webSurveyThemeId,d.themeKey=a.themeKey);for(var f=0;f<d.prompts.length;f++){var g=d.prompts[f];if(!g.hiddenPrompt){if(void 0!==g.transferURL&&null!=g.transferURL)if(g.transferUsingPost){var h=document.createElement("form");h.method="POST",h.action=g.transferURL,g.transferParams&&angular.forEach(g.transferParams,function(a,b){addInput(h,b,a)}),document.body.appendChild(h),h.submit()}else{var i=g.transferURL;if(g.transferParams){var j=i.indexOf("?")>-1?"&":"?";angular.forEach(g.transferParams,function(a,b){i+=j+b+"="+a,j="&"})}self.location.href=i}if(null!=g)for(var k=getRenderPrompts(g),l=0;l<k.length;l++){var m=k[l].id,n={promptId:m,value:""};if(a.answers&&a.answers[m]&&("true"!=a.answers[m].value&&"false"!=a.answers[m].value||(a.answers[m].value="true"===a.answers[m].value),n.value=a.answers[m].value),d.answers[m]=n,k[l].choices)for(var o=0;o<k[l].choices.length;o++)k[l].choices[o].other&&(d.otherOptions[m]={value:"",choiceId:""});var p=!(d.renderedPrompts>0||b.mobile);d.directiveData[m]=getDirectiveData(k[l],d,b.nextClickAttempts,p,a.context.responseCacheKey),d.renderedPrompts++,l>0&&(d.directiveData[g.id]=getGroupDirectiveData(g))}else console.log("Prompt is empty at index %d",f+1)}}return d}function addInput(a,b,c){var d=document.createElement("input");d.value=c,d.name=b,a.appendChild(d)}function getDirectiveData(a,b,c,d,e){var f={};return f.prompt=a,f.answer=b.answers[a.id],f.error=b.errors[a.id],f.nextClickAttempts=c,f.validateForm=!1,f.ignoreBlurValidation=!1,f.autoSelect=d,f.otherOption=b.otherOptions[a.id],f.uuid=e,f.isSamsungPhone=b.samsungPhone,f}function getGroupDirectiveData(a){var b={};return b.prompt=a,b}function populatePromptEventDTOs(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];if(e.promptEventDTOs){e.promptEventDTOs.reverse();for(var f=0;f<e.promptEventDTOs.length;f++){c.push(e.promptEventDTOs[f]);for(var g=e.promptEventDTOs[f].triggeredPrompts.length-1;g>=0;g--){var h={};if(angular.extend(h,e.promptEventDTOs[f].triggeredPrompts[g]),h.isTriggered=!0,"SHOW"===e.promptEventDTOs[f].executedOnSamePageBehavior&&(h.required=!1,h.prompts)){h.prompts=[];for(var i=0;i<e.promptEventDTOs[f].triggeredPrompts[g].prompts.length;i++){var j={};angular.extend(j,e.promptEventDTOs[f].triggeredPrompts[g].prompts[i]),h.prompts.push(j)}for(var k=0;k<h.prompts.length;k++)h.prompts[k].required=!1}b||a.splice(d+1,0,h),populatePromptEventDTOs([h])}}}if(e.prompts){var l=populatePromptEventDTOs(e.prompts,!0);c=c.concat(l);for(var m in l){var n=l[m].triggeredPrompts;if(!n)break;for(var o=0;o<n.length;o++){var h={};if(angular.extend(h,n[o]),h.isTriggered=!0,"SHOW"===l[m].executedOnSamePageBehavior&&(h.required=!1,h.prompts)){h.prompts=[];for(var p=0;p<n[o].prompts.length;p++){var j={};angular.extend(j,n[o].prompts[p]),h.prompts.push(j)}for(var q=0;q<h.prompts.length;q++)h.prompts[q].required=!1}a.splice(d+1,0,h)}}}}return c}function initializeCallbacks(a){var b=null,c=null;"undefined"!=typeof imThemeCallback&&(b=imThemeCallback),void 0!==autoAdvanceCallback&&(c=autoAdvanceCallback),a.callbacks=angular.extend({surveyStarted:function(){},renderedPage:function(a,b){},previousPageClicked:function(){},nextPageClicked:function(){},triggerPageAutoAdvance:function(){}},b||{},c||{})}function arrayIncludes(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1}function arrayContains(a,b){for(var c=0;c<b.length;c++)if(!arrayIncludes(a,b[c]))return!1;return!0}function handleNextPageResponse(a,b,c,d,e,f){if(b.context=a.context,b.visit=a.visit,b.mobile=a.mobile,d.data.mobile=a.mobile,b.secureCookies=a.secureCookies,b.disableCookieBanner=a.disableCookieBanner,b.isOnlyOfferCodeError=!1,void 0===f||null===f?console.log("wcagservice is undefined or null"):(void 0===a.wcagToggle||null===a.wcagToggle?(console.log("error, wcag toggle not retrieved"),f.setState(!1)):f.setState(a.wcagToggle),b.wcagToggle=f.getState()),a.prompts){if(d.data.hideNavButtons=!1,d.data.hideBackButton=!1,b.currentPage()&&b.currentPage().webSurveyThemeId!=a.context.webSurveyThemeId){b.updateDynamicCss(a.themeKey,a.context.webSurveyThemeId),b.setFavicon();var g=document.getElementById("customJsEl");g&&g.parentNode.removeChild(g);var h=document.createElement("script");return h.id="customJsEl",h.src="retrieveJs.js?imData=t&s;="+a.themeKey,b.sessionId&&(h.src+="&_s="+b.sessionId),b.currentPage().callbacks=b.callbacks,h.onload=function(){initializeCallbacks(b),b.loadPromptsFromPayload(a),b.currentPage().callbacks=b.callbacks,b.$apply()},void(angular.element("html").hasClass("lt-ie9")?(document.body.insertBefore(h,angular.element("#fingerprintData")[0]),h.onload()):document.body.appendChild(h))}b.loadPromptsFromPayload(a)}else if(a.errors){b.enableAnimationAndValidation(!0),b.markFieldsDirty(),b.checkOnlyOfferCodeError(a.errors);for(promptId in a.errors)b.currentPage().directiveData[promptId]?b.currentPage().directiveData[promptId].error=a.errors[promptId]:console.log("Errors returned for promptId="+promptId+", but there is no prompt data for that on the page.")}else e.systemError&&(b.systemError=e.systemError,b.errorStatusCode=e.statusCode,a.logo&&a.logo.url&&(b.logo.url=a.logo.url,b.logo.alt=a.logo.alt),a.favicon&&a.favicon.url&&(b.favicon.url=a.favicon.url),b.locale=a.locale,b.errorPageMessages=a.pageMessages,412==b.errorStatusCode&&(b.cookieError={browserSelection:"Chrome",browsers:["Chrome","Safari","Internet Explorer","Firefox","Edge"]},b.errorPageMessages.browser.indexOf("Chrome")>=0?b.cookieError.browserSelection="Chrome":b.errorPageMessages.browser.indexOf("Edge")>=0?b.cookieError.browserSelection="Edge":b.errorPageMessages.browser.indexOf("MSIE")>=0||b.errorPageMessages.browser.indexOf("11.0")>=0?b.cookieError.browserSelection="Internet Explorer":b.errorPageMessages.browser.indexOf("Firefox")>=0?b.cookieError.browserSelection="Firefox":b.errorPageMessages.browser.indexOf("Safari")>=0&&(b.cookieError.browserSelection="Safari")))}function saveSubmittedAnswers(a){a.submittedAnswers={},a.submittedOtherOptions={};for(var b=0;b<a.prompts.length;b++)for(var c=a.prompts[b],d=getRenderPrompts(c),e=0;e<d.length;e++){var f=d[e].id;a.answers[f]&&(a.submittedAnswers[f]={promptId:f,value:a.answers[f].value}),a.otherOptions[f]&&(a.submittedOtherOptions[f]={value:a.otherOptions[f].value,choiceId:a.otherOptions[f].choiceId})}}function saveBreadcrumb(a,b,c,d,e,f,g,h,i){for(var j={promptIds:[],answers:{},percentComplete:0,logoUrl:null,logoAlt:null,faviconUrl:null,customHtml:null,navText:null},k=0;k<a.prompts.length;k++){var l=a.prompts[k].id;j.promptIds[k]=l,a.answers[l]&&(j.answers[l]={promptId:l,value:a.answers[l].value})}e?(j.logoUrl=e.url,j.logoAlt=e.alt):(j.logoUrl="",j.logoAlt=""),j.faviconUrl=f,j.customHtml=g,j.percentComplete=d,j.navText=h,j.pageMessages=i,b.items[c]=j}function restoreBreadcrumb(a,b,c){if(a.items[c]){var d=a.items[c];if(breadcrumbMatchesPage(d,b))for(var e=0;e<d.promptIds.length;e++){var f=d.promptIds[e];null!=d.answers[f]&&(b.answers[f].value=d.answers[f].value)}else a.items=a.items.slice(0,c)}}function breadcrumbMatchesPage(a,b){if(null==b||a.promptIds.length!=b.prompts.length)return!1;for(var c=0;c<a.promptIds.length;c++)if(a.promptIds[c]!=b.prompts[c].id)return!1;return!0}function parseQueryString(a){for(var b={},c=a.split("&"),d=0;d<c.length;++d){var e=c[d].split("=");2===e.length&&(b[decodeURIComponent(e[0])]=decodeURIComponent(e[1]))}return b}function closeModal(){var a=angular.element(".ng-modal");a.length>0&&a.scope().closeModalDialog(null,a)}function closeEmailModal(a){closeModal();var b=angular.element(".goRecBtn_EMAIL").children().first().scope().$$childHead;b.$apply(function(){b.closeEmailModal(a)})}function closeFacebookModal(a){closeModal();var b=angular.element(".goRecBtn_FACEBOOK").children().first().scope().$$childHead;b.$apply(function(){b.closeFacebookModal(a)})}function onFacebookLoggedIn(){var a=angular.element(".goRecBtn_FACEBOOK").children().first().scope().$$childHead;a.$apply(function(){a.loginStatus="connected",a.buttonClicked()})}function retryFacebookLogin(){var a=angular.element(".goRecBtn_FACEBOOK").children().first().scope().$$childHead;a.$apply(function(){a.retryLogin()})}function onGooglePlusLoggedIn(a){var b=angular.element(".goRecBtn_GOOGLE").children().first().scope().$$childHead;b.$apply(function(){b.onGooglePlusLoggedIn(a)})}function closeTwitterModal(a){closeModal();var b=angular.element(".goRecBtn_TWITTER_HANDLE").children().first().scope().$$childHead;b.$apply(function(){b.closeTwitterModal(a)})}function onTwitterLoggedIn(){var a=angular.element(".goRecBtn_TWITTER_HANDLE").children().first().scope().$$childHead;a.$apply(function(){a.loginStatus=!0,a.openModalWindow()})}function retryTwitterLogin(){var a=angular.element(".goRecBtn_TWITTER_HANDLE").children().first().scope().$$childHead;a.$apply(function(){a.retryLogin()})}function getGoRecommendationText(){return angular.element(".goRecSharePrompt").scope().getRecommendationText()}function initializePrompt(){var a=$("#topLevelSelector"),b=$("#locationSelector");return removeOptions(b),$(".levelSelect").prop("disabled",!0),$(".ui-select:not(.topLevel)").addClass("disabled"),0===a.length?populateLocationSelectorOnly(b):initializeTopLevelSelector(),!1}function initializeTopLevelSelector(){var a=$("#topLevelSelector");removeOptions(a);var b=a.next(".levelId").text();LocationPicker.nextSelectorId=a.prop("id"),LocationPicker.currentSelectorId=a.prop("id");var c=$("#preselectedPreviousLevel").text(),d=$("#preselectedValue").text();return toggleSpinner(a),getOrganizationalUnits(d,b,OrganizationalLevelLoader.TOP_LEVEL,c),!1}function getOrganizationalUnits(a,b,c,d){var e=$("#"+LocationPicker.currentSelectorId),f=null;LocationPicker.httpService.getURL("/websurvey/2/organizationalunits?locationCategoryId="+a+"&nextLevelId="+b+"&loaderEnum="+c+"&preSelectedTopLevelLocationCategoryId="+d).then(function(a){clearTimeout(f),populateNextLevel(a)}),LocationPicker.scope.wcagToggle&&(f=setTimeout(function(){toggleSpinner(e,!1)},5e3))}function getNextLevelSelector(a){var b=a.parent().parent().parent().next("div.level");if(b.length>0)return b.children(":nth(2)").children(":nth(0)").children(":nth(1)")}function levelSelectionTrigger(a){removeErrorStyling(a),$(".level:not(#locationLevel)").show();for(var b=OrganizationalLevelLoader.LOCATION_CATEGORY,c=a.val(),d=a;void 0!==getNextLevelSelector(d);)d=getNextLevelSelector(d),""===c&&(d.parent().addClass("disabled"),locationChange("")),removeErrorStyling(d),removeOptions(d),changeBtnTxt(d);LocationPicker.nextSelectorId=getNextLevelSelector(a).prop("id"),LocationPicker.currentSelectorId=a.prop("id");var e=$("#"+LocationPicker.nextSelectorId).next(".levelId").text();"locationSelector"===LocationPicker.nextSelectorId&&(b=OrganizationalLevelLoader.LOCATION),getOrganizationalUnits(c,e,b),$(".levelSelect").prop("disabled",!0),toggleSpinner(a)}function populateNextLevel(a){var b=$.parseJSON(a[0]),c=$("#"+LocationPicker.currentSelectorId),d=$("#"+LocationPicker.nextSelectorId),e="true"===a[1],f=a[2];if(e){d=$("#locationSelector");for(var g=c;void 0!==getNextLevelSelector(g)&&"locationSelector"!==getNextLevelSelector(g).prop("id");)g=getNextLevelSelector(g),g.parent().parent().parent().hide()}if(removeOptions(d),null!=b&&b.length>0){var h=d.prop("options"),i=d.parent().parent().parent().find(".placeHolderText").text();""!==i&&(h[0]=new Option(i,""));for(var j=0;j<b.length;j++){var k=b[j];h[j+1]=new Option(k.value,k.key)}}"undefined"!==f&&(c.val(f),null===c.val()?c.val(c.children(":first").val()):levelSelectionTrigger(c));for(var l=$(".ui-select"),j=0;j<l.length;j++){var g=$(l[j]);g.children(".levelSelect").children().length<=1?(g.addClass("disabled"),g.children(".levelSelect").prop("disabled",!0)):(g.removeClass("disabled"),g.children(".levelSelect").prop("disabled",!1))}2===d.children().length?(d.children(":nth(1)").prop("selected",!0),"locationSelector"!==d.prop("id")?levelSelectionTrigger(d):locationChange(d.children(":nth(1)").val())):(changeBtnTxt(d),c.children(".levelSelect").prop("disabled",!1)),changeBtnTxt(c),toggleSpinner(c,!1)}function populateLocationSelectorOnly(a){return removeOptions(a),LocationPicker.nextSelectorId=a.prop("id"),LocationPicker.currentSelectorId=a.prop("id"),getOrganizationalUnits($("#preselectedPreviousLocationCategoryId").text(),null,OrganizationalLevelLoader.LOCATION_ONLY),toggleSpinner(a),!1}function locationChange(a){changeBtnTxt($("#locationSelector")),LocationPicker.scope.$emit("locationChange",a)}function toggleSpinner(a,b){return $(a).parent().parent().next(".spinner").toggle(b),!1}function removeOptions(a){return a.children().each(function(a,b){$(b).remove()}),a.val(a.children(":first").val()),!1}function removeErrorStyling(a){return a.parent().hasClass("field-prompt-error")&&(a.parent().addClass("field-prompt-error-remove").removeClass("field-prompt-error"),a.removeClass("textError")),!1}function changeBtnTxt(a){var b=a.find("option:selected").text();a.prev("span").find(".btn-text").text(b)}function ocSearchReadyFunc(){$(".offerSearch .promptInput input").keydown(function(a){if(13==a.keyCode)return $(this).next("button").click(),a.stopPropagation(),!1}),$(".scrollable").scroll(function(a){locsScrolled($(this))})}function scrollLocs(a,b){var c=b.prevAll(".scrollable"),d=2*$(c).find(".location").height(),e=Math.max(0,c.scrollTop()-d);return a&&(e=Math.min(c[0].scrollHeight,c.scrollTop()+d)),!!(a&&c[0].scrollHeight!=e||!a&&0!==c.scrollTop())&&(c.animate({scrollTop:e+"px"},"fast"),!0)}function locsScrolled(a){a.nextAll(".tp,.btm").removeClass("inactive");var b=a.height()+a.scrollTop()===a[0].scrollHeight,c=0===a.scrollTop();b&&a.nextAll(".btm").addClass("inactive"),c&&a.nextAll(".tp").addClass("inactive")}function selectLocation(a,b){a=$(a),a.parent().parent().find("a").removeClass("selected"),a.addClass("selected"),a.parent().parent().parent().find(".forSmlWdth").addClass("invisible"),a.parent().parent().hide();var c=a.find("h2");a.parent().parent().prev().find(".btn-text").html(c.html()),$("#ocSearch_value").val(a.find("div.hidden").html()).change(),b||(b=window.event),b.stopPropagation?b.stopPropagation():b.cancelBubble=!0}function expandOfferCodes(a){var b=$("#offerCodesReturned");b.is(":visible")?$(a).find(".forSmlWdth").addClass("invisible"):$(a).find(".forSmlWdth").removeClass("invisible"),b.toggle(),resizeScrollable(b)}function resizeScrollable(a){a.is(":visible")&&locsScrolled(a)}function softPopup(a,b,c){var d=$(document).height(),e=$(window).width(),f=d/3-$("#dialog-box").height(),g=e/2-$("#dialog-box").width()/2;$("#dialog-overlay").css({height:d,width:e}).show(),$("#dialog-box").css({top:f,left:g}).show(),$("#dialog-message").html(a),$("#shareExperience").html(b),$("#noThanks").html(c)}function softPromptCheck(a){for(var b=0;b<a.length;b++){var c=$(a[b]).val().replace(/^\s+|\s+$/g,"").split(/\s+/).length;if(0==$(a[b]).val().trim().length&&(c=0),"true"==$(a[b]).attr("soft-prompt")){if("true"==$(a[b]).attr("soft-prompt-empty")&&0==c)return softPromptCount++,softPopup($(a[b]).attr("soft-prompt-message"),$(a[b]).attr("softprompt-share-experience"),$(a[b]).attr("softprompt-nothanks")),!0;if("false"==$(a[b]).attr("soft-prompt-empty")&&c<5&&c>0)return softPromptCount++,softPopup($(a[b]).attr("soft-prompt-message"),$(a[b]).attr("softprompt-share-experience"),$(a[b]).attr("softprompt-nothanks")),!0}}return!1}function shareExperience(){}function noThanks(){$("#nextPageLink").trigger("mousedown")}function submitDeviceType(a){if(a){var b="detectDevice?deviceType="+a;$.ajax({async:!1,url:b,type:"GET",contentType:"application/json; charset=utf-8"}).fail(function(a,b,c){console.log("error occured in detecting device type")})}}function initiateScanAndDetectDevice(){return MobileEsp.InitDeviceScan(),MobileEsp.DetectMobileLong()?MobileEsp.DetectIphone()?"iPhone":MobileEsp.DetectIpad()?"iPad":MobileEsp.DetectAndroidPhone()?"AndroidPhone":MobileEsp.DetectAndroidTablet()?"AndroidTablet":MobileEsp.DetectWindowsMobile()?"WindowsPhone":MobileEsp.DetectBlackBerry()?"Blackberry":MobileEsp.DetectAmazonSilk()||MobileEsp.DetectKindle()?"KindleDevice":MobileEsp.DetectIpod()?"iPodTouch":MobileEsp.DetectSmartphone()?"OtherSmartphone":MobileEsp.DetectTierTablet()?"OtherTablet":"OtherMobile":MobileEsp.DetectWindowsNonMobile()?"Windows":MobileEsp.DetectAppleNonMobile()?"Mac":MobileEsp.DetectLinuxNonMobile()?"Linux":"OtherPC"}function identify_plugins(){var a="";if(navigator.plugins){for(var b=navigator.plugins,c=new Array,d=0;d<b.length;d++){c[d]=b[d].name+"; ",c[d]+=b[d].description+"; ",c[d]+=b[d].filename+";";for(var e=0;e<b[d].length;e++)c[d]+=" ("+b[d][e].description+"; "+b[d][e].type+"; "+b[d][e].suffixes+")";c[d]+=". "}for(c.sort(),d=0;d<b.length;d++)a+="Plugin "+d+": "+c[d]}if(""==a){var f=new Array;f[0]="Java",f[1]="QuickTime",f[2]="DevalVR",f[3]="Shockwave",f[4]="Flash",f[5]="WindowsMediaplayer",f[6]="Silverlight",f[7]="VLC";var g;for(p in f)(g=PluginDetect.getVersion(f[p]))&&(a+=f[p]+" "+g+"; ");a+=ieAcrobatVersion()}return a}function ieAcrobatVersion(){if(window.ActiveXObject){for(var x=2;x<10;x++)try{if(oAcro=eval("new ActiveXObject('PDF.PdfCtrl."+x+"');"),oAcro)return"Adobe Acrobat version"+x+".?"}catch(a){}try{if(oAcro4=new ActiveXObject("PDF.PdfCtrl.1"),oAcro4)return"Adobe Acrobat version 4.?"}catch(a){}try{if(oAcro7=new ActiveXObject("AcroPDF.PDF.1"),oAcro7)return"Adobe Acrobat version 7.?"}catch(a){}return""}}function get_fonts(){for(var a=document.getElementById("fontSpan"),b="",c=a.offsetWidth+a.offsetHeight,d=0;d<fonts.length;d++)a.style.fontFamily=fonts[d],c!==a.offsetWidth+a.offsetHeight&&(b.length>0&&(b+=", "),b+=fonts[d]);return b}function set_dom_storage(){try{localStorage.mshareTemp="yea",sessionStorage.mshareTemp="yea"}catch(a){}}function test_dom_storage(){var a="";try{"yea"==localStorage.mshareTemp?a+="DOM localStorage: Yes":a+="DOM localStorage: No"}catch(b){a+="DOM localStorage: No"}try{"yea"==sessionStorage.mshareTemp?a+=", DOM sessionStorage: Yes":a+=", DOM sessionStorage: No"}catch(b){a+=", DOM sessionStorage: No"}return a}function test_ie_userdata(){try{return oPersistDiv.setAttribute("remember","remember this value"),oPersistDiv.save("oXMLStore"),oPersistDiv.setAttribute("remember","overwritten!"),oPersistDiv.load("oXMLStore"),"remember this value"==oPersistDiv.getAttribute("remember")?", IE userData: Yes":", IE userData: No"}catch(a){return", IE userData: No"}}var app=angular.module("surveyApp",["directives","services","prompts","ui.bootstrap","errorServices","systemErrors"]);app.dialectPhrases={};var videoResponseProcessed=!1,simulateNextButtonClick=!1;app.factory("httpService",["$http",function(a){return{getURL:function(b){return a.get(b).then(function(a){return a.data})},postData:function(b,c,d){return a.post(b,c).then(function(a){return a.data},function(a){if(console.log("Error occurred:"+JSON.stringify(a)),void 0==d||d<2)return this.postData(b,c,2)})},data:{},setSessionHeader:function(b){a.defaults.headers.common["x-session-token"]=b,a.defaults.headers.get={"x-session-token":b}}}}]),app.factory("wcagService",[function(){var a=!1;return{getState:function(){return a},setState:function(b){"boolean"!=typeof b?(console.log("Error, setting wcag/ada (accessibility) requires it to be a boolean. wcag toogle for UI set to false"),a=!1):a=b},getTextNoHtml:function(a){var b="";if(void 0===a)return b;var c=a,d=document.createElement("div");return d.innerHTML=c,(b=d.textContent||d.innerText||"")+" "}}}]),app.filter("unsafe",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),app.filter("noHtml",function(){return function(a){return String(a).replace(/<[^>]+>/gm,"")}}),app.filter("alphanumeric",function(){return function(a){return String(a).replace(/\W/g,"")}}),app.filter("spaceToUnderscore",function(){return function(a){if("undefined"===a)return"";var b=" ",c=new RegExp(b,"g");return String(a).replace(c,"_")}}),app.controller("surveyAppController",["$scope","$location","$window","httpService","errorManager","sessionStorageService","$sce","$timeout","$interval","$animate","wcagService","$anchorScroll",function($scope,$location,$window,httpService,errorManager,sessionStorageService,$sce,$timeout,interval,$animate,wcagService,$anchorScroll){function hasConsentedToPolicy(){var a=!1,b=safeGetGatewayId($scope),c="IM_GDPR_CD_"+b;try{a=null!=$window.localStorage.getItem(c)}catch(a){}return{key:c,hasConsented:a}}function safeGetGatewayId(a){var b="";return void 0!==a.context&&void 0!==a.context.gatewayId&&(b=a.context.gatewayId),b}function requestNewPage(a){var b={};if(b.context=a.context,b.visit=a.visit,b.currentPageIndex=a.currentPageIndex,b.videoResponseProcessed=videoResponseProcessed,b.reCaptchaToken=a.reCaptchaToken,b.gdprConsentDate=a.gdprConsentDate,null!=a.currentPage()&&a.currentPage().onePageLeft&&"function"==typeof ClicktaleInMoment)try{var c=ClicktaleInMoment();"Clicktale Is Not Recording"!==c&&(b.clickTaleRecordingURL=c)}catch(a){console.log("Error occurred while fetching ClickTale Recording URL:"+a)}if(void 0!==a.context&&void 0!==a.context.audioOptionId&&(b.prevDialect=a.context.audioOptionId),1==a.httpService.data.needsFingerprint&&-1!=a.currentPageIndex&&null!=document.getElementById("fingerprintComplete")&&"true"==document.getElementById("fingerprintComplete").value){var d={};d.screenResolution=a.fingerprint.screenResolution,d.timezone=a.fingerprint.timezone,d.browserPlugins=a.fingerprint.browserPlugins,d.systemFonts=a.fingerprint.systemFonts,d.canvasFp=a.fingerprint.canvasFp,b.fingerprint=d,a.httpService.data.needsFingerprint=!1}null!=document.getElementById("geoLoc_latitude")&&null!=document.getElementById("geoLoc_longitude")&&document.getElementById("geoLoc_latitude").value.trim().length>0&&document.getElementById("geoLoc_longitude").value.trim().length>0&&(b.latitude=parseFloat(document.getElementById("geoLoc_latitude").value),b.logitude=parseFloat(document.getElementById("geoLoc_longitude").value)),b.answers=a.pages[a.currentPageIndex]?a.pages[a.currentPageIndex].answers:{};var e=a.pages[a.currentPageIndex]?a.pages[a.currentPageIndex].otherOptions:{};Object.keys(e).length>0&&angular.forEach(b.answers,function(a,c){e[a.promptId]&&(a.value==e[a.promptId].choiceId?b.answers[-a.promptId]={promptId:"-"+a.promptId,value:e[a.promptId].value}:delete b.answers[-a.promptId])}),smartCommentIntervalPromise&&interval.cancel(smartCommentIntervalPromise),a.lockNavigation(),a.enableAnimationAndValidation(!1),httpService.postData("/websurvey/2/prompts",b).then(function(b){handleNextPageResponse(b,a,$location,httpService,errorManager,wcagService),window.scrollTo(0,0),a.handlePolicyConsent(),$timeout(function(){a.enableAnimationAndValidation(!0)}),a.refreshInterval&&interval(function(){window.location.replace(a.surveyUrl)},6e4*a.refreshInterval),a.currentPageIndex>0?a.unlockNavigation():$timeout(function(){a.unlockNavigation()})})}function answersHaveChanged(a){for(var b=0;b<a.prompts.length;b++)for(var c=getRenderPrompts(a.prompts[b]),d=0;d<c.length;d++){var e=c[d].id;if(a.answers[e]&&a.submittedAnswers[e]&&a.answers[e].value!=a.submittedAnswers[e].value)return!0;if(a.otherOptions[e]&&a.submittedOtherOptions[e]&&a.otherOptions[e].value!=a.submittedOtherOptions[e].value)return!0}return!1}function deleteAnswersAndPages(a){var b=getDataFieldIds(a.pages,a.currentPageIndex);httpService.postData("/websurvey/2/delete_datafields",b).then(function(b){a.pages=a.pages.slice(0,a.currentPageIndex+1);for(var c={startingPageId:a.currentPage().pageId,promptIds:[],gatewayId:a.context.gatewayId,themeId:a.currentPage().webSurveyThemeId},d=0;d<a.currentPage().prompts.length;d++)a.currentPage().prompts[d].isTriggered||c.promptIds.push(a.currentPage().prompts[d].id);httpService.postData("/websurvey/2/reload_survey",c).then(function(b){requestNewPage(a)})});for(var c=Object.keys(a.pages[a.currentPageIndex].submittedAnswers),d=0;d<a.breadcrumb.items.length;d++)for(var e=0;e<c.length;e++)a.breadcrumb.items[d].answers[c[e]]=null}function getDataFieldIds(a,b){for(var c=[],d=!1,e=0;e<a.length;e++)if(e<b)d=d||a[e].complete;else for(var f=0;f<a[e].prompts.length;f++)null!=a[e].prompts[f].dataField&&c.push(a[e].prompts[f].dataField.id),null!=a[e].prompts[f].otherOptionId&&c.push(a[e].prompts[f].otherOptionId);return{ids:c,complete:d}}function hash(a){var b=0;if(null==a||0==a.length)return b;for(i=0;i<a.length;i++)char=a.charCodeAt(i),b=(b<<5)-b+char,b&=b;return b}if($window.location&&$window.location.search){var queryParams=parseQueryString($window.location.search.substring(1));queryParams._s&&($scope.sessionId=queryParams._s,httpService.setSessionHeader($scope.sessionId))}$scope.httpService=httpService,$scope.currentDate=new Date,$scope.httpService.data.needsFingerprint=!0,initializeCallbacks($scope),$scope.pages=[],$scope.breadcrumb={items:[]},$scope.currentPageIndex=-1,$scope.percentComplete=0,$scope.nextClickAttempts={},$scope.nextClickAttempts.val=0,$scope.navLock=!1,$scope.navText={},$scope.logo={url:"",alt:""},$scope.favicon={url:""},$scope.pageMessages={},$scope.customHtml={},$scope.showBannerCookie=!0,$scope.showUpdateBrowserBanner=!0,$scope.showPolicyModal=!1,$scope.surveyOver=!1,httpService.data.hideNavButtons=!1,$scope.hideNavButtons=function(){return $scope.surveyOver||httpService.data.hideNavButtons},$scope.hideBackButton=function(){return httpService.data.hideBackButton},$scope.hideNextButton=function(){return void 0==$scope.currentPage()||$scope.currentPage().hideNextButton},$scope.transferOffsite=!1,$scope.reviewUrl=null,$scope.surveyUrl=null,$scope.reviewBanner=null,$scope.lockNavigation=function(){$scope.navLock=!0},$scope.unlockNavigation=function(){$scope.navLock=!1},$scope.currentPage=function(){return $scope.pages[$scope.currentPageIndex]},$scope.skipToContent=function(a){if(void 0===a||13===a.keyCode||32===a.keyCode){void 0!==a&&a.preventDefault(),$("#skipToContent").blur();var b=$scope.currentPage();if(void 0!==b){var c=b.prompts;if(void 0!==c&&c.length>0){var d=c[0].id,e=$("#prompt_header_"+d),f=$("#prompt_"+d),g=$(".tabindex_prompt_"+d),h=$("#smComment_"+d),i=$("#promptInput_"+d);e.length>0&&e[0].tabIndex>0?e.focus():g.length>0&&g[0].tabIndex>0?g.focus():h.length>0&&h[0].tabIndex>0?h.focus():i.length>0&&i[0].tabIndex>0?i.focus():f.length>0&&f.focus(),$location.hash("prompt_"+d),$anchorScroll()}}}},$scope.isFirstElement=function(a){var b=$scope.pages[$scope.currentPageIndex],c=!1;if(void 0!==b&&void 0!==b.prompts){for(var d=b.prompts,e=0,f=0;f<d.length;f++)if("GENERIC"!==d[f].type){e=f;break}e===a&&(c=!0)}return c},$scope.renderPrompts=function(){return $scope.currentPage()&&!$scope.systemError},$scope.nextPageMouseDown=function(a){$scope.nextPageMouseDownClicked=!1,$timeout(function(){!1===$scope.nextPageMouseDownClicked&&$scope.nextPageButtonClick(a)},500)},$scope.nextPageButtonClick=function(a){$scope.nextPageMouseDownClicked=!0;var b=!1;if(null!=$(".commentArea")&&0==softPromptCount&&(b=softPromptCheck($(".commentArea"))),1!=b&&!(a&&3===a.which||$scope.navLock)){if($scope.lockNavigation(),$scope.nextClickAttempts.val++,$scope.callbacks.nextPageClicked(),$scope.promptForm.$invalid&&!$scope.isOnlyOfferCodeError)return $timeout(function(){$scope.$broadcast("nextButtonClickedWithError");var a=function(b){for(var c=0;c<b.length;c++){if(b[c].$$scope&&b[c].$$scope.getFirstInputControlClass)return b[c].$$scope.getFirstInputControlClass();if(b[c].$$controls){var d=a(b[c].$$controls);if(d)return d}}};if($scope.wcagToggle){for(var b=$scope.promptForm.$$controls,c=[],d=0;d<b.length;d++)if(b[d].$invalid){var e=a(b[d].$$controls);e?c.push(e):c.push("tabindex_"+b[d].$$element[0].id)}for(var f=$('[class*="tabindex_prompt_"],[class*="tabindex_promptInput_"]'),g=function(a,b){for(var c=0;c<a.length;c++)if(b.contains(a[c]))return!0;return!1},d=0;d<f.length;d++)if(g(c,f[d].classList)){void 0!==f[d].tabIndex&&parseInt(f[d].tabIndex)>0?f[d].focus():void 0!==f[d].firstElementChild&&null!==f[d].firstElementChild&&null!==f[d].firstElementChild.getAttribute("tabindex")&&f[d].firstElementChild.focus();break}}}),errorManager.submitclicked=!0,$scope.markFieldsDirty(),void $scope.unlockNavigation();errorManager.submitclicked=!1,$scope.nextPage()}},$scope.spacebarKeypress=function(a,b){32===a.keyCode&&(a.preventDefault(),"previous"===b?$scope.prevPageButtonClick(a):"next"===b?$scope.nextPageButtonClick(a):"cookieClose"===b?(a.preventDefault(),$scope.secureCookies?$scope.addCookie(!0):$scope.addCookie(!1)):"ieBanner"===b&&$scope.removeBanner())},$scope.prevPageButtonClick=function(a){$scope.navLock||($scope.lockNavigation(),$scope.callbacks.previousPageClicked(),$scope.currentPageIndex>0&&($scope.currentPage().submittedAnswers||saveBreadcrumb($scope.currentPage(),$scope.breadcrumb,$scope.currentPageIndex,$scope.percentComplete,$scope.logo,$scope.favicon.url,$scope.customHtml,$scope.navText,$scope.pageMessages),$scope.percentComplete=$scope.breadcrumb.items[$scope.currentPageIndex-1].percentComplete,$scope.navText=$scope.breadcrumb.items[$scope.currentPageIndex-1].navText,$scope.pageMessages=$scope.breadcrumb.items[$scope.currentPageIndex-1].pageMessages,void 0===$scope.pages[$scope.currentPageIndex-1].prompts?$scope.expectedPrompts=[]:$scope.expectedPrompts=$scope.getExpectedPromptIds($scope.pages[$scope.currentPageIndex-1].prompts),$scope.loadedPrompts=[],$scope.currentPageIndex--,$location.path("/"+($scope.currentPageIndex+1)),$scope.currentPage().callbacks&&($scope.callbacks=$scope.currentPage().callbacks),$scope.updateDynamicCss($scope.currentPage().themeKey,$scope.currentPage().webSurveyThemeId),$scope.setFavicon(),window.scrollTo(0,0),$scope.callbacks.renderedPage($scope.currentPage().pageId,Object.keys($scope.currentPage().directiveData))),$scope.unlockNavigation())},$scope.pageHasErrors=function(a,b,c){return a.$invalid&&!c&&b.val>0},$scope.markFieldsDirty=function(){for(type in $scope.promptForm.$error)for(form in $scope.promptForm.$error[type])void 0!==$scope.promptForm.$error[type][form].promptField&&$scope.promptForm.$error[type][form].promptField.$setDirty()},$scope.navImageUseMap={},$scope.useNavImage=function(a){if(a in this.navImageUseMap)return this.navImageUseMap[a];var b=$("#"+a+"Img").css("background-image");return this.navImageUseMap[a]="none"!==b,"none"!==b},$scope.navSizeMap={},$scope.getNavSize=function(a){if(a in this.navSizeMap)return this.navSizeMap[a];if(this.useNavImage(a)){var b=$("#"+a+"Img").css("background-image").replace(/url\((['"])?(.*?)\1\)/gi,"$2").split(",")[0],c=new Image;if(c.src=b,0===c.width||0===c.height)return!1;var d={width:c.width,height:c.height};return this.navSizeMap[a]=d,d}return this.navSizeMap[a]={},!1},$scope.getSpinnerOverlayHeight=function(){var a=$window.document.body,b=$window.document.documentElement;return{height:Math.max(a.scrollHeight,a.offsetHeight,b.clientHeight,b.scrollHeight,b.offsetHeight)}},$scope.nextPage=function(){if($scope.currentPageIndex>=0&&($scope.secureCookies?$scope.addCookie(!0):$scope.addCookie(!1),$scope.removeBanner()),$scope.currentPageIndex<$scope.pages.length-1)$scope.currentPageIndex>-1&&answersHaveChanged($scope.currentPage())?deleteAnswersAndPages($scope):($scope.expectedPrompts=$scope.getExpectedPromptIds($scope.pages[$scope.currentPageIndex+1].prompts),$scope.loadedPrompts=[],$scope.currentPageIndex++,httpService.data.hideNavButtons=!1,$scope.nextClickAttempts.val=0,$location.path("/"+($scope.currentPageIndex+1)),$scope.percentComplete=$scope.breadcrumb.items[$scope.currentPageIndex].percentComplete,$scope.currentPage().callbacks&&($scope.callbacks=$scope.currentPage().callbacks),$scope.updateDynamicCss($scope.currentPage().themeKey,$scope.currentPage().webSurveyThemeId),$scope.setFavicon(),window.scrollTo(0,0),$scope.callbacks.renderedPage($scope.currentPage().pageId,Object.keys($scope.currentPage().directiveData)),$scope.callbacks.triggerPageAutoAdvance(),$scope.unlockNavigation());else{if(0==$scope.currentPageIndex&&"undefined"!=typeof grecaptcha)return angular.element(".grecaptcha-user-facing-error").length,$scope.navLock=!1,void grecaptcha.execute();requestNewPage($scope)}},$scope.loadPromptsFromPayload=function(a){if(a.surveyOver&&window.self!==window.top){var b={messageType:"Survey Complete"};window.parent.postMessage(JSON.stringify(b),"*")}$scope.surveyOver=a.surveyOver,$scope.transferOffsite=a.transferOffsite,$scope.reviewUrl=$sce.trustAsResourceUrl(a.reviewUrl),$scope.surveyUrl=$sce.trustAsResourceUrl(a.surveyUrl),$scope.reviewBanner=$sce.trustAsResourceUrl(a.reviewBanner),$scope.refreshInterval=a.refreshInterval,a.logo&&a.logo.url&&($scope.logo.url=a.logo.url,void 0===a.logo.alt||null===a.logo.alt?$scope.logo.alt="":$scope.logo.alt=a.logo.alt),a.favicon&&a.favicon.url&&($scope.favicon.url=a.favicon.url),$scope.locale=a.locale,$scope.customHtml=a.customHTML;var c=$scope.percentComplete;$scope.percentComplete=a.percentComplete;var d=$scope.navText;$scope.navText=a.navText;var e=$scope.pageMessages;$scope.pageMessages=a.pageMessages,$scope.currentPage()?(saveSubmittedAnswers($scope.currentPage()),saveBreadcrumb($scope.currentPage(),$scope.breadcrumb,$scope.currentPageIndex,c,$scope.logo,$scope.favicon.url,$scope.customHtml,d,e)):$scope.callbacks.surveyStarted(),$scope.currentPageIndex++,$location.path("/"+($scope.currentPageIndex+1));var f=createPage(a,$scope,errorManager);restoreBreadcrumb($scope.breadcrumb,f,$scope.currentPageIndex),$scope.expectedPrompts=$scope.getExpectedPromptIds(f.prompts),$scope.loadedPrompts=[],$scope.pages[$scope.currentPageIndex]=f,$scope.nextClickAttempts.val=0,(0==f.prompts.length||f.hideNavButtons)&&(httpService.data.hideNavButtons=!0)},$scope.$on("surveyPromptPostLink",function(a,b){if(null!==$scope.currentPage()&&!arrayIncludes($scope.loadedPrompts,b)&&(void 0===$scope.loadedPrompts&&($scope.loadedPrompts=[]),$scope.loadedPrompts.push(b),arrayContains($scope.loadedPrompts,$scope.expectedPrompts))){var c=$scope.callbacks,d=$scope.currentPage();$scope.$$postDigest(function(){c.renderedPage(d.pageId,Object.keys(d.directiveData)),c.triggerPageAutoAdvance(),pageAutoAdvance.verify($scope.currentPage().prompts),$scope.wcagToggle&&void 0!==d&&void 0!==d.prompts&&$scope.pages.length>0&&$scope.pages[0].pageId!==$scope.currentPage().pageId&&$("#skipToContent").focus()})}}),$scope.$watch("currentPageIndex",function(a){a>=0&&$window.document&&($window.document.title=null!=$scope.currentPage()&&$scope.currentPage().windowTitle?$scope.currentPage().windowTitle:"Survey Page "+(a+1))}),$scope.$watch("locale",function(a){if(angular.isDefined(a)){var b=a;a.indexOf("_")>0&&(b=a.substr(0,a.indexOf("_"))),document.documentElement.setAttribute("lang",b)}}),$scope.handleEnter=function(a){13===a.which&&"textarea"!==a.target.localName&&"a"!==a.target.localName&&$timeout(function(){$scope.nextPageButtonClick(),angular.element(a.target).blur()})},$scope.updateDynamicCss=function(a,b){var c=angular.element("#dynamic_css"),d="retrieveCss.css?themeId="+b+"&s;="+a;$scope.sessionId&&(d+="&_s="+$scope.sessionId),d!=c.attr("href")&&(c.attr("href",d),$scope.breadcrumb.items&&$scope.breadcrumb.items[$scope.currentPageIndex-1]&&($scope.logo.url=$scope.breadcrumb.items[$scope.currentPageIndex-1].logoUrl,$scope.logo.alt=$scope.breadcrumb.items[$scope.currentPageIndex-1].logoAlt,$scope.favicon.url=$scope.breadcrumb.items[$scope.currentPageIndex-1].faviconUrl,$scope.customHtml=$scope.breadcrumb.items[$scope.currentPageIndex-1].customHtml),$timeout(function(){$scope.clearNavImages()},1e3))},$scope.setFavicon=function(){var a=angular.element("#favicon");""!==$scope.favicon.url&&a.attr("href",$scope.favicon.url)},$scope.clearNavImages=function(){$scope.navImageUseMap={},$scope.navSizeMap={}},$scope.checkExistingCookie=function(){return!(!$scope.disableCookieBanner&&!docCookies.hasItem("inMomentCookie"))},$scope.bothBannersSelected=function(){return!(!$scope.showUpdateBrowserBanner||$scope.checkExistingCookie())},$scope.checkIE8=function(){return null!=navigator&&null!=navigator.userAgent&&((-1!=navigator.userAgent.indexOf("MSIE 8.0")||-1!=navigator.userAgent.indexOf("MSIE 7.0"))&&-1==navigator.userAgent.indexOf(".NET")&&-1==navigator.userAgent.indexOf("Chrome"))},$scope.removeBanner=function(){$scope.showUpdateBrowserBanner=!1},$scope.addCookie=function(a){docCookies.setItem("inMomentCookie","true",new Date(9999,5,24),void 0,void 0,a),$scope.showBannerCookie=!1},$scope.gdprConsentDate=null,$scope.showGdpr=!1,$scope.acceptPolicy=function(){var a,b=hasConsentedToPolicy();if(b.hasConsented)a=parseInt($window.localStorage.getItem(b.key));else{a=(new Date).getTime();try{$window.localStorage.setItem(b.key,(new Date).getTime())}catch(a){}}$scope.gdprConsentDate=a,$scope.showPolicyModal=!1,angular.element("#surveyApp_body").css("overflow","visible")},$scope.handlePolicyConsent=function(){if($scope.showGdpr){var a=hasConsentedToPolicy();a.hasConsented?($scope.gdprConsentDate=parseInt($window.localStorage.getItem(a.key)),angular.element("#surveyApp_body").css("overflow","visible")):(angular.element("#surveyApp_body").css("overflow","hidden"),$scope.showPolicyModal=!0)}};var tempHttpServiceData={},docCookies={getItem:function(a){return a?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(a,b,c,d,e,f){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var g="";if(c)switch(c.constructor){case Number:g=c===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+c;break;case String:g="; expires="+c;break;case Date:g="; expires="+c.toUTCString()}return document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+g+(e?"; domain="+e:"")+(d?"; path="+d:"")+(f?"; secure":""),!0},removeItem:function(a,b,c){return!!this.hasItem(a)&&(document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(c?"; domain="+c:"")+(b?"; path="+b:""),!0)},hasItem:function(a){return!!a&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),b=a.length,c=0;c<b;c++)a[c]=decodeURIComponent(a[c]);return a}};$scope.restorePage=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){wcagService.setState(w),$scope.wcagToggle=wcagService.getState(),angular.forEach(b,function(a,b){a.directiveData={},angular.forEach(a.prompts,function(b,c){b.prompts&&(a.directiveData[b.id]=getGroupDirectiveData(b)),angular.forEach(getRenderPrompts(b),function(b,c){a.directiveData[b.id]=getDirectiveData(b,a,$scope.nextClickAttempts,!(Object.keys(a.directiveData).length>0))})})}),$scope.expectedPrompts=$scope.getExpectedPromptIds(b[a].prompts),$scope.loadedPrompts=[],$scope.currentPageIndex=a,$scope.pages=b,$scope.breadcrumb=c,$scope.context=d,$scope.percentComplete=e,$scope.navText=f,$scope.logo.url=g,$scope.logo.alt=h,$scope.favicon.url=i,httpService.data=angular.extend(j,tempHttpServiceData),$scope.mobile=httpService.data.mobile,$scope.pageMessages=k,$scope.customHtml=l,$scope.locale=m,$scope.surveyOver=o,$scope.reviewUrl=$sce.trustAsResourceUrl(p),$scope.reviewBanner=$sce.trustAsResourceUrl(q),$scope.surveyUrl=$sce.trustAsResourceUrl(s),$scope.refreshInterval=t,$scope.secureCookies=httpService.data.secureCookies,$scope.showPolicyModal=v,errorManager.init({phrases:n,DEFAULT_ERROR_MESSAGE:r}),void 0!==$scope.currentPage()&&($scope.updateDynamicCss($scope.currentPage().themeKey,$scope.currentPage().webSurveyThemeId),$scope.setFavicon(),sessionStorageService.clear(),$location.path("/"+($scope.currentPageIndex+1)),$scope.currentPage().callbacks&&($scope.callbacks=$scope.currentPage().callbacks),$scope.callbacks.renderedPage($scope.currentPage().pageId,Object.keys($scope.currentPage().directiveData)),pageAutoAdvance.verify($scope.currentPage().prompts),setTimeout(function(){$scope.callbacks.triggerPageAutoAdvance()},100))},$scope.$on("$locationChangeSuccess",function(event){if(!sessionStorageService.checkSessionStorageEnabled()&&!$scope.sessionId){$scope.showBannerCookie=!1,$scope.showUpdateBrowserBanner=!1,$location.path("/cookieError");var outload={cookiesDisabled:!0};return void httpService.postData("/websurvey/2/prompts",outload).then(function(a){handleNextPageResponse(a,$scope,$location,httpService,errorManager,wcagService)})}if(-1==$scope.currentPageIndex)if(!sessionStorageService.checkSessionStorageEnabled()&&$scope.sessionId)httpService.postData("/websurvey/2/pagestatus/load",{}).then(function(data){if(data&&data.currentPageIndex){var currentPageIndex=parseInt(data.currentPageIndex),pages=JSON.parse(data.pages,function(key,value){return"string"==typeof value&&0==value.indexOf("function")?(eval("var fnTemp = "+value),fnTemp):value}),breadcrumb=JSON.parse(data.breadcrumb),context=JSON.parse(data.context),percentComplete=parseFloat(data.percentComplete),navText=JSON.parse(data.navText),logoUrl=data.logoUrl,logoAlt=data.logoAlt,faviconUrl=data.favicon,httpData=JSON.parse(data.httpServiceData),pageMessages=JSON.parse(data.pageMessages),customHtml=JSON.parse(data.customHtml),locale=data.locale,phrases=JSON.parse(data.phrases),surveyOver=JSON.parse(data.surveyOver),reviewUrl=data.reviewUrl,reviewBanner=data.reviewBanner,DEFAULT_ERROR_MESSAGE=data.defaultErrorMessage,surveyUrl=data.surveyUrl,refreshInterval=data.refreshInterval,secureCookies=data.secureCookies,showPolicyModal=data.showPolicyModal,wcagState="true"===data.wcagToggle;$scope.restorePage(currentPageIndex,pages,breadcrumb,context,percentComplete,navText,logoUrl,logoAlt,faviconUrl,httpData,pageMessages,customHtml,locale,phrases,surveyOver,reviewUrl,reviewBanner,DEFAULT_ERROR_MESSAGE,surveyUrl,refreshInterval,secureCookies,showPolicyModal,wcagState)}else $scope.nextPage()});else if(sessionStorageService.retrieveItem("currentPageIndex")){var currentPageIndex=parseInt(sessionStorageService.retrieveItem("currentPageIndex")),pages=JSON.parse(sessionStorageService.retrieveItem("pages"),function(key,value){return"string"==typeof value&&0==value.indexOf("function")?(eval("var fnTemp = "+value),fnTemp):value}),breadcrumb=JSON.parse(sessionStorageService.retrieveItem("breadcrumb")),context=JSON.parse(sessionStorageService.retrieveItem("context")),percentComplete=parseFloat(sessionStorageService.retrieveItem("percentComplete")),navText=JSON.parse(sessionStorageService.retrieveItem("navText")),logoUrl=sessionStorageService.retrieveItem("logoUrl"),logoAlt=sessionStorageService.retrieveItem("logoAlt"),faviconUrl=sessionStorageService.retrieveItem("favicon"),httpData=JSON.parse(sessionStorageService.retrieveItem("httpService_data")),pageMessages=JSON.parse(sessionStorageService.retrieveItem("pageMessages")),customHtml=JSON.parse(sessionStorageService.retrieveItem("customHtml")),locale=sessionStorageService.retrieveItem("locale"),phrases=JSON.parse(sessionStorageService.retrieveItem("phrases")),surveyOver=JSON.parse(sessionStorageService.retrieveItem("surveyOver")),reviewUrl=sessionStorageService.retrieveItem("reviewUrl"),reviewBanner=sessionStorageService.retrieveItem("reviewBanner"),DEFAULT_ERROR_MESSAGE=sessionStorageService.retrieveItem("DEFAULT_ERROR_MESSAGE"),surveyUrl=sessionStorageService.retrieveItem("surveyUrl"),refreshInterval=sessionStorageService.retrieveItem("refreshInterval"),secureCookies=sessionStorageService.retrieveItem("secureCookies"),showPolicyModal=sessionStorageService.retrieveItem("showPolicyModal"),wcagState="true"===sessionStorageService.retrieveItem("wcagToggle");$scope.restorePage(currentPageIndex,pages,breadcrumb,context,percentComplete,navText,logoUrl,logoAlt,faviconUrl,httpData,pageMessages,customHtml,locale,phrases,surveyOver,reviewUrl,reviewBanner,DEFAULT_ERROR_MESSAGE,surveyUrl,refreshInterval,secureCookies,showPolicyModal,wcagState)}else $scope.nextPage();else if($scope.navLock)$location.path("/"+($scope.currentPageIndex+1)),$scope.setFavicon();else{if(httpService.data.hideBackButton=!1,$scope.currentPageIndex=$location.path().replace("/","")-1,void 0===$scope.currentPage())return;$scope.currentPage().callbacks&&($scope.callbacks=$scope.currentPage().callbacks),$scope.updateDynamicCss($scope.currentPage().themeKey,$scope.currentPage().webSurveyThemeId),$scope.setFavicon(),$scope.currentPage().hideNavButtons?httpService.data.hideNavButtons=!0:$scope.currentPage().hideBackButton&&(httpService.data.hideBackButton=!0,pageAutoAdvance.hideNextPageBackButton=!1)}tempHttpServiceData={}}),$window.onbeforeunload=function(a){if(sessionStorageService.checkSessionStorageEnabled())sessionStorageService.storeItem("currentPageIndex",$scope.currentPageIndex),sessionStorageService.storeItem("pages",JSON.stringify($scope.pages,function(a,b){return"function"==typeof b?b.toString():b})),sessionStorageService.storeItem("breadcrumb",JSON.stringify($scope.breadcrumb)),sessionStorageService.storeItem("context",JSON.stringify($scope.context)),sessionStorageService.storeItem("percentComplete",$scope.percentComplete),sessionStorageService.storeItem("navText",JSON.stringify($scope.navText)),sessionStorageService.storeItem("logoUrl",$scope.logo.url),sessionStorageService.storeItem("logoAlt",$scope.logo.alt),sessionStorageService.storeItem("favicon",$scope.favicon.url),sessionStorageService.storeItem("httpService_data",JSON.stringify(httpService.data)),sessionStorageService.storeItem("pageMessages",JSON.stringify($scope.pageMessages)),sessionStorageService.storeItem("customHtml",JSON.stringify($scope.customHtml)),sessionStorageService.storeItem("locale",$scope.locale),sessionStorageService.storeItem("surveyOver",$scope.surveyOver),sessionStorageService.storeItem("reviewUrl",$scope.reviewUrl),sessionStorageService.storeItem("reviewBanner",$scope.reviewBanner),sessionStorageService.storeItem("phrases",JSON.stringify(errorManager.phrases)),sessionStorageService.storeItem("DEFAULT_ERROR_MESSAGE",errorManager.DEFAULT_ERROR_MESSAGE),sessionStorageService.storeItem("surveyUrl",$scope.surveyUrl),sessionStorageService.storeItem("refreshInterval",$scope.refreshInterval),sessionStorageService.storeItem("secureCookies",$scope.secureCookies),sessionStorageService.storeItem("showPolicyModal",$scope.showPolicyModal),sessionStorageService.storeItem("wcagToggle",$scope.wcagToggle);else if($scope.sessionId){var b={};b.currentPageIndex=$scope.currentPageIndex,b.pages=JSON.stringify($scope.pages,function(a,b){return"function"==typeof b?b.toString():b}),b.breadcrumb=JSON.stringify($scope.breadcrumb),b.context=JSON.stringify($scope.context),b.percentComplete=$scope.percentComplete,b.navText=JSON.stringify($scope.navText),b.logoUrl=$scope.logo.url,b.logoAlt=$scope.logo.alt,b.favicon=$scope.favicon.url,b.httpServiceData=JSON.stringify(httpService.data),b.pageMessages=JSON.stringify($scope.pageMessages),b.customHtml=JSON.stringify($scope.customHtml),b.locale=$scope.locale,b.surveyOver=$scope.surveyOver,b.reviewUrl=$scope.reviewUrl,b.reviewBanner=$scope.reviewBanner,b.phrases=JSON.stringify(errorManager.phrases),b.defaultErrorMessage=errorManager.DEFAULT_ERROR_MESSAGE,b.surveyUrl=$scope.surveyUrl,b.refreshInterval=$scope.refreshInterval,b.secureCookies=$scope.secureCookies,b.showPolicyModal=$scope.showPolicyModal,b.wcagToggle=$scope.wcagToggle,httpService.postData("/websurvey/2/pagestatus/save",b)}else console.log("can't store page status")},$scope.clearBrowserSessionStorage=function(){sessionStorageService.clear()},$scope.showFacebookModal=function(){httpService.data.facebookAuthorized=!0,httpService.data.callOnFacebookLoggedIn=!0,tempHttpServiceData=httpService.data},$scope.showTwitterModal=function(){httpService.data.twitterAuthorized=!0,httpService.data.callOnTwitterLoggedIn=!0,tempHttpServiceData=httpService.data},$scope.enableAnimationAndValidation=function(a){$animate.enabled(a)},$scope.reCaptchaCallback=function(a){$scope.reCaptchaToken=a,grecaptcha.reset(),requestNewPage($scope)},$scope.initRecaptcha=function(){window.reCaptchaLoad=function(){var a=angular.element("#recaptchaSiteKey").html();grecaptcha.render("nextPageLink",{sitekey:a,callback:$scope.reCaptchaCallback,size:"invisible",hosts:[]})};var a=document.createElement("script");a.src="https://www.google.com/recaptcha/api.js?onload=reCaptchaLoad&render=explicit",a.async=!0,a.defer=!0,document.body.appendChild(a)},$scope.fingerprint={},$scope.initFingerprint=function(){document.getElementById("fingerprintComplete")&&(document.getElementById("fingerprintComplete").value="true");var a=new Fingerprint2,b=[];a.screenResolutionKey(b),$scope.fingerprint.screenResolution=b[0].value.join("x"),a.timezoneOffsetKey(b),$scope.fingerprint.timezone=b[1].value.toString(),a.pluginsKey(b),$scope.fingerprint.browserPlugins=b[2].value.join(", ");var c=function(){};a.jsFontsKey(b,c),$scope.fingerprint.systemFonts=hash(b[3].value.join(", ")),$scope.fingerprint.canvasFp=hash(a.getCanvasFp())},$scope.geoLocationInit=function(a,b,c){geoLocation.getLocation(a,b,c)},$scope.checkOnlyOfferCodeError=function(a){var b=Object.keys(a);1===b.length?$scope.isOnlyOfferCodeError=a[b[0]].isOfferCodeError:$scope.isOnlyOfferCodeError=!1},$scope.getExpectedPromptIds=function(a){if(void 0===a||!Array.isArray(a))return[];for(var b=[],c=0;c<a.length;c++)switch(a[c].type){case"MULTIPLE_CHOICE":case"BOOLEAN":case"BOOLEAN_GROUP":case"DATE":case"TIME":case"EMPLOYEE_SELECTOR":case"RATING":case"RATING_GROUP":case"MULTIPLE_CHOICE_GROUP":case"COMMENT":case"VIDEO_RESPONSE":case"COMPOSITE_TEXT":case"SCRAMBLED_TEXT":case"TEXT":case"NUMERIC":case"OFFER_CODE_SEARCH":case"LOCATION_PICKER":case"SOCIAL_CONNECT":case"GO_RECOMMEND_CONNECT":case"GO_RECOMMEND_SHARE_INCENTIVE":case"GO_RECOMMEND_SHARE_OPEN_TELL":case"SWEEPSTAKES_INSTANT_WIN":case"CAPTCHA":case"GENERIC":b.push($scope.currentPageIndex+","+a[c].id+","+c)}return b},$scope.renderBackdropContainer=function(){return null!=$scope.currentPage()&&$scope.currentPage().transferOffsite},$scope.renderCookieBanner=function(){return!$scope.checkExistingCookie()&&!$scope.systemError}}]),app.directive("surveyPrompt",function(){return{restrict:"A",link:{post:function(a,b,c,d){a.$emit("surveyPromptPostLink",a.$eval(c.surveyPrompt))}}}}),angular.module("directives",[]).config(["$provide",function(a){a.decorator("$sniffer",["$delegate",function(a){var b="string"==typeof navigator.userAgent?navigator.userAgent.toLowerCase():navigator.userAgent,c=parseInt((/msie (\d+)/.exec(b.toLowerCase())||[])[1],10),d=a.hasEvent;return a.hasEvent=function(a){if("input"===a&&10===c)return!1;d.call(this,a)},a}])}]),angular.module("errorServices",[]).factory("errorManager",function(){return{phrases:{},DEFAULT_ERROR_MESSAGE:"Sorry, that is not a valid answer. Please try again.",DEFAULT_SYSTEM_ERROR_MESSAGE:"A system error has occurred, please contact support",SYSTEM_ERROR_THROW_MESSAGE:"Internal server error, stop processing",SERVER_TO_CLIENT_ERROR_TYPES:{INVALID_EMAIL:"email",INVALID_DATE_FUTURE:"date",INVALID_PHONE:"server",INVALID_REQUIRED:"required",INVALID_NUMERIC:"server",INVALID_INPUT:"server"},CLIENT_TO_SERVER_ERROR_TYPES:{email:"INVALID_EMAIL",tel:"INVALID_PHONE",minlength:"INVALID_MINMAX",maxlength:"INVALID_MINMAX",number:"INVALID_NUMERIC",pattern:"INVALID_PATTERN",date:"INVALID_INPUT",required:"INVALID_REQUIRED",server:"INVALID_INPUT",mask:"INVALID_INPUT"},systemError:!1,submitclicked:!1,init:function(a){a.phrases.dialectPhrases&&(this.phrases.dialectPhrases=a.phrases.dialectPhrases),a.phrases.promptPhrases&&(this.phrases.promptPhrases=a.phrases.promptPhrases),a.DEFAULT_ERROR_MESSAGE?this.DEFAULT_ERROR_MESSAGE=a.DEFAULT_ERROR_MESSAGE:this.DEFAULT_ERROR_MESSAGE="Sorry, that is not a valid answer. Please try again."},setSystemError:function(a,b){switch(this.systemError=!1,this.statusCode=a,a){case 400:break;case 500:case 502:case 420:case 510:case 508:default:this.systemError=!0}return this.systemError},getErrorMessage:function(a,b){if(!b)return null;var c=this.getPromptPhrases(a.id),d=this.phrases.dialectPhrases,e=null;return this.CLIENT_TO_SERVER_ERROR_TYPES[b]&&(b=this.CLIENT_TO_SERVER_ERROR_TYPES[b]),e=this.getPhraseValue(c,d,b),null==e&&(e=this.getPhraseValue(c,d,"INVALID_INPUT")),null==e&&(e=this.getPhraseValue(c,d,"REPROMPT")),null==e&&(e=this.DEFAULT_ERROR_MESSAGE),e},getPhraseValue:function(a,b,c){var d=null;if(null!=a){var e=a[c];e&&e.message&&e.message.length>0&&(d=e.message)}if(null==d&&null!=b){var e=b[c];e&&e.message&&e.message.length>0&&(d=e.message)}return d},isFormInErrorState:function(a){return a.promptField?a.promptField.$invalid&&(this.submitclicked&&a.promptField.$pristine||a.promptField.$dirty):a.$invalid&&(this.submitclicked&&a.$pristine||a.$dirty)},processServerErrors:function(a,b){if(a.error.invalidTypeName){var c=this.SERVER_TO_CLIENT_ERROR_TYPES[a.error.invalidTypeName];b.$setValidity(c,!1),b.$setViewValue(a.answer.value),a.error.invalidTypeName=null}},getPromptPhrases:function(a){return this.phrases.promptPhrases&&this.phrases.promptPhrases[a]?this.phrases.promptPhrases[a]:null},getAriaLabel:function(a,b){var c;c=b.promptForm?this.isFormInErrorState(b)?b:b.promptForm:b.promptField;var d="";return void 0!=c&&this.isFormInErrorState(b)&&(c.$error.required?d+=this.getErrorMessage(a,"required"):c.$error.maxlength?d+=this.getErrorMessage(a,"maxlength"):c.$error.minlength?d+=this.getErrorMessage(a,"minlength"):c.$error.email?d+=this.getErrorMessage(a,"email"):c.$error.tel?d+=this.getErrorMessage(a,"tel"):c.$error.number?d+=this.getErrorMessage(a,"number"):c.$error.pattern?d+=this.getErrorMessage(a,"pattern"):c.$error.mask?d+=this.getErrorMessage(a,"mask"):c.$error.date?d+=this.getErrorMessage(a,"date"):c.$error.server?d+=this.getErrorMessage(a,"server"):c.$error.custom&&(d+=this.getErrorMessage(a,"custom"))),""!==d&&(d+=" "),d+=a.text}}}),angular.module("boolean-group",[]).directive("msBooleanGroup",["errorManager","$timeout","wcagService",function(a,b,c){return{restrict:"A",replace:!0,templateUrl:"app/js/prompts/boolean-group.tpl.html",scope:{promptObject:"=msBooleanGroup",currentPage:"=msCurrentPage"},controller:["$scope",function(a){a.getFirstInputControlClass=function(){return"tabindex_prompt_"+a.promptObjects.prompts[0].prompt.id}}],link:function(d,e,f){d.wcagToggle=c.getState(),d.errorManager=a,d.promptIds=[],d.naOptionPromptId=null,d.initialFocus=!1,angular.forEach(d.promptObject.prompts,function(a){d.promptIds.push(a.id),a.isNaBooleanOption&&(d.naOptionPromptId=a.id)}),d.$watch("currentPage.answers",function(a,c){if(b(function(){d.$broadcast("booleanGroupChanged")}),null!=d.naOptionPromptId&&a!=c){var e=null,f=null;for(promptId in a)if(-1!=d.promptIds.indexOf(parseInt(promptId))&&a[promptId].value!=c[promptId].value){e=parseInt(promptId),f=a[promptId].value;break}if(e==d.naOptionPromptId&&1==f)for(var g=0;g<d.promptIds.length;g++)d.naOptionPromptId!=d.promptIds[g]&&(d.currentPage.directiveData[d.promptIds[g]].answer.value=!1,d.currentPage.answers[d.promptIds[g]].value=!1);else e!=d.naOptionPromptId&&1==f&&(d.currentPage.directiveData[d.naOptionPromptId].answer.value=!1,d.currentPage.answers[d.naOptionPromptId].value=!1)}},!0)}}}]),angular.module("boolean",[]).directive("msBoolean",["errorManager","wcagService","$timeout",function(a,b,c){return{restrict:"A",replace:!0,templateUrl:"app/js/prompts/boolean.tpl.html",controller:["$scope",function(a){a.childPrompt&&(a.dd.prompt.required=!1),a.getFirstInputControlClass=function(){return"tabindex_prompt_"+a.dd.prompt.id}}],scope:{dd:"=msBoolean",parentForm:"=msParentForm",heading:"=msHeading"},link:function(c){c.ariaLabel=c.dd.prompt.text,c.errorManager=a,c.wcagToggle=b.getState(),c.$on("nextButtonClickedWithError",function(){c.parentForm?c.ariaLabel=a.getAriaLabel(c.dd.prompt,c.parentForm):c.promptForm&&(c.ariaLabel=a.getAriaLabel(c.dd.prompt,c.promptForm))}),c.$on("booleanGroupChanged",function(){c.ariaLabel=c.dd.prompt.text}),c.keypress=function(a,b){if(32===a){b.preventDefault(),c.ariaLabel=c.dd.prompt.text;var d=b.currentTarget;this.dd.answer&&0==this.dd.answer.value?(this.dd.answer.value=!0,d.setAttribute("aria-checked","true")):(this.dd.answer.value=!1,d.setAttribute("aria-checked","false"))}},c.dd.answer&&""===c.dd.answer.value&&(c.dd.answer.value=!1),c.resetAria=function(){c.ariaLabel=c.dd.prompt.text},c.textHeadingFormatted=b.getTextNoHtml(c.heading)}}}]),angular.module("captcha",["im.mask","text-multiple","BotDetectCaptcha"]).config(["captchaSettingsProvider",function(a){a.setSettings({captchaEndpoint:"/websurvey/botdetectcaptcha"})}]).directive("msCaptcha",["Captcha",function(a){return{restrict:"A",templateUrl:"app/js/prompts/captcha.tpl.html",scope:{dd:"=msCaptcha"},link:function(b,c){var d=null;b.dd.answer.value=JSON.stringify({token:""}),angular.element(c[0].querySelector(".promptInput input")).bind("keyup",function(c){if(!d&&!b.dd.answer.value.id)try{d=new a,b.dd.answer.value.id=d.captchaId,b.captchaId=d.captchaId}catch(c){}}),b.$watch("promptForm.promptField.$error.server",function(a){!0===a&&d.reloadImage()})}}}]).directive("msJsonToString",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$formatters.push(function(a){return a?JSON.parse(a).token:""}),d.$parsers.push(function(a){return JSON.stringify({token:a,id:c.captchaId})})}}}),angular.module("categorical-group",[]).directive("msCategoricalGroup",["errorManager","$timeout","wcagService",function(a,b,c){return{restrict:"A",replace:!0,templateUrl:"app/js/prompts/categorical-group.tpl.html",scope:{promptObject:"=msCategoricalGroup",currentPage:"=msCurrentPage"},controller:["$scope",function(a){a.getFirstInputControlClass=function(){return"tabindex_prompt_"+a.promptObject.prompts[0].id}}],link:function(b,d,e){b.wcagToggle=c.getState(),b.errorManager=a,b.promptObject.prompts&&(b.choiceDescription=b.promptObject.prompts[0].choices,b.choiceDescription&&b.choiceDescription.length>0&&(b.percentWidth=100/b.choiceDescription.length));var f;for(f=0;f<b.promptObject.prompts.length;++f)b.promptObject.prompts[f].renderType="Horizontal";b.getRatingClass=function(a){for(var c="",d=0;d<b.choiceDescription.length;d++){var e=b.choiceDescription[d];a.choiceId==e.choiceId&&(0==d?c="first":(d==b.choiceDescription.length-1||b.choiceDescription[d+1].na)&&(c="last"),a.na&&(c+="na"),null==a.choiceId&&(c+=" empty"))}return a.na&&(c+=" na"),c}}}}]),angular.module("categorical-prompt",[]).directive("msCategorical",["errorManager","$window","$timeout","wcagService",function(a,b,c,d){return{templateUrl:"app/js/prompts/categorical-prompt.tpl.html",scope:{dd:"=msCategorical",childPrompt:"=msChildPrompt",childIndex:"=msChildIndex",heading:"=msHeading"},controller:["$scope",function(a){a.getFirstInputControlClass=function(){if(angular.element("#prompt_"+a.dd.prompt.id).hasClass("ng-invalid"))return"tabindex_prompt_"+a.dd.prompt.id}}],link:function(e,f,g){if(e.ariaLabel=e.dd.prompt.text,e.hasSelectedOption=!1,e.errorManager=a,e.wcagToggle=d.getState(),e.calculateWidth=function(){var a=window,b=document,c=b.documentElement,d=b.getElementsByTagName("body")[0],f=a.innerWidth||c.clientWidth||d.clientWidth,g=(a.innerHeight||c.clientHeight||d.clientHeight,e.dd.prompt.choices.length);f<770&&e.dd.prompt.choices[g-1].na&&(g-=1),e.percentWidth=100/g},e.calculateWidth(),angular.element(b).bind("resize",function(){e.calculateWidth(),e.$apply()}),e.$on("nextButtonClickedWithError",function(){e.promptForm&&e.promptForm.$invalid&&(e.ariaLabel=a.getAriaLabel(e.dd.prompt,e.promptForm))}),"Vertical"==e.dd.prompt.renderType)for(var h=0;h<e.dd.prompt.choices.length;h++){var i=e.dd.prompt.choices[h];1==i.other&&(e.dd.otherOption.choiceId=i.choiceId)}"Pulldown"==e.dd.prompt.renderType&&e.$watch("dd.answer.value",function(){for(var a=0;a<e.dd.prompt.choices.length;a++){var b=e.dd.prompt.choices[a];if(b.choiceId==e.dd.answer.value)return e.selectedLabel=b.label,void(e.ariaLabel=e.dd.prompt.text+" "+e.selectedLabel)}e.selectedLabel=e.dd.prompt.msgs.chooseFrom,e.ariaLabel=e.dd.prompt.text+" "+e.selectedLabel}),e.yesNoClick=function(a){if(e.dd.answer.value=e.dd.prompt.choices[a].choiceId,e.wcagToggle){var b=document.getElementById("promptInput_"+e.dd.prompt.id),c=b.children[0],d=null;d=0===a?c.children[1]:c.children[0],d.focus(),d.setAttribute("aria-checked","true"),d.tabIndex=1}},e.selectOption=function(a,b){if(e.dd.answer.value=""+a,e.wcagToggle){var d=b.currentTarget;if(e.ariaLabel=e.dd.prompt.text,void 0!==d){var f=d.parentElement;if(void 0!==f){var g=f.parentElement;if(void 0!==g.children)for(var h=0;h<g.children.length;h++)g.children[h].checked=!1,g.children[h].tabIndex=-1,g.children[h].setAttribute("aria-checked","false");f.checked=!0,f.tabIndex=1,f.setAttribute("aria-checked","true"),f.focus();if(e.dd.prompt.choices.find(function(b){return b.choiceId===a}).other){var i=document.getElementById("otherOptionInput_"+e.dd.prompt.id);void 0!==i&&(f.tabIndex=-1,c(function(){i.focus()},100))}}}}},e.keypressYN=function(a){var b=e.keyDirection(a);b.moveLeft||b.moveUp?(e.dd.answer.value=e.dd.prompt.choices[1].choiceId,c(function(){document.getElementById("choice_no_"+e.dd.prompt.choices[1].choiceId).click()},1)):(b.moveRight||b.moveDown)&&(e.dd.answer.value=e.dd.prompt.choices[0].choiceId,c(function(){document.getElementById("choice_no_"+e.dd.prompt.choices[0].choiceId).click()},1))},e.keypressYNWCAG=function(a,b){var d=e.keyDirection(a),f=null!==b&&void 0!==b?b.currentTarget:null;if(d.moveLeft||d.moveRight||d.moveUp||d.moveDown||d.spacebar&&""===e.dd.answer.value){e.ariaLabel=e.dd.prompt.text;for(var g=f.children[0].children,h=null,i=0;i<g.length;i++){if(currentOption=g[i],d.spacebar&&null===h)h=currentOption,b.preventDefault();else if(e.dd.answer.value===currentOption.children[0].value)if(b.preventDefault(),d.moveLeft||d.moveUp)h=i>0?g[i-1]:g[g.length-1];else if(d.moveRight||d.moveDown)if(i===g.length-1)h=g[0];else{var j=g[i+1];h=j}currentOption.children[0].checked=!1,currentOption.tabIndex=-1,currentOption.setAttribute("aria-checked","false")}h||(h=d.moveLeft||d.moveUp?g[0]:g[1]),e.dd.answer.value=h.children[0].value}c(function(){void 0!==h&&(h.focus(),h.setAttribute("aria-checked","true"),h.tabIndex=1)},1)},e.keypress=function(a,b){var d=e.keyDirection(a),f=null!==b&&void 0!==b?b.currentTarget:null;if(d.moveLeft||d.moveRight||d.moveUp||d.moveDown){b.preventDefault();for(var g=null,h=0;h<f.children.length;h++){if(currentOption=f.children[h],e.dd.answer.value==currentOption.children[0].value){if((d.moveLeft||d.moveUp)&&h>0)g=f.children[h-1];else if(d.moveRight||d.moveDown){var i=f.children[Math.min(h+1,f.children.length-1)];g=i.children[0].value?i:currentOption}break}currentOption.children[0].checked=!1}g||(g=d.moveLeft||d.moveUp?f.children[0]:f.children[1]),e.dd.answer.value=g.children[0].value,c(function(){g.click()},1)}},e.keypressWCAG=function(a,b){var d=e.keyDirection(a),f=null!==b&&void 0!==b?b.currentTarget:null;if(d.moveLeft||d.moveRight||d.moveUp||d.moveDown||d.spacebar&&""===e.dd.answer.value){e.ariaLabel=e.dd.prompt.text;for(var g=null,h=0;h<f.children.length;h++){if(currentOption=f.children[h],d.spacebar&&null===g)g=currentOption,b.preventDefault();else if(e.dd.answer.value===currentOption.children[0].value){if(d.moveLeft||d.moveRight){var i=currentOption.children[0].id.split("_")[1],j=e.dd.prompt.choices.find(function(a){return a.choiceId===parseInt(i)});if(j.other)return}if(b.preventDefault(),d.moveLeft||d.moveUp)g=h>0?f.children[h-1]:f.children[f.children.length-1];else if(d.moveRight||d.moveDown)if(h===f.children.length-1)g=f.children[0];else{var k=f.children[h+1];g=k}}currentOption.children[0].checked=!1,currentOption.tabIndex=-1,currentOption.setAttribute("aria-checked","false")}g||(g=d.moveLeft||d.moveUp?f.children[0]:f.children[1]),e.dd.answer.value=g.children[0].value,c(function(){g.focus(),g.setAttribute("aria-checked","true");var a=g.children[0].id.split("_")[1];if(e.dd.prompt.choices.find(function(b){return b.choiceId===parseInt(a)}).other){g.tabIndex=-1;var b=document.getElementById("otherOptionInput_"+e.dd.prompt.id);void 0!==b&&c(function(){b.focus()},100)}else g.tabIndex=1},1)}},e.keyDirection=function(a){var b={moveLeft:!1,moveRight:!1,moveUp:!1,moveDown:!1,spacebar:!1};switch(a){case 32:b.spacebar=!0;break;case 37:b.moveLeft=!0;break;case 38:b.moveUp=!0;break;case 39:b.moveRight=!0;break;case 40:b.moveDown=!0}return b},e.getRatingClass=function(a){for(var b="",c=!0,d=0;d<e.dd.prompt.choices.length;d++){var f=e.dd.prompt.choices[d];a.choiceId==f.choiceId?(0==d?b="first":(d==e.dd.prompt.choices.length-1||e.dd.prompt.choices[d+1].na)&&(b="last"),a.na&&(b+="na"),null==a.choiceId&&(b+=" empty"),e.dd.answer.value&&(e.dd.answer.value==a.choiceId?(b+=" selected",e.hasSelectedOption=!0):b+=c?" before":" after")):e.dd.answer.value==f.choiceId&&(c=!1)}return a.na&&(b+=" na"),b},e.trueIfEmptyNullOrUndefined=function(a){return void 0===a||null===a||""===a},e.textHeadingFormatted=d.getTextNoHtml(e.heading)}}}]),angular.module("comment",[]).directive("msComment",["wcagService",function(a){return{restrict:"A",templateUrl:"app/js/prompts/comment.tpl.html",scope:{dd:"=msComment"},controller:["$scope",function(a){a.getFirstInputControlClass=function(){return"tabindex_prompt_"+a.dd.prompt.id}}],link:function(b){b.wcagToggle=a.getState(),b.commentVal="",b.tabIndexPromptClass="tabindex_prompt_"+b.dd.prompt.id,b.dd.answer.value?b.dd.answer.value.startsWith&&(b.dd.answer.value.startsWith("{")?b.commentVal=JSON.parse(b.dd.answer.value).text:(b.commentVal=b.dd.answer.value,b.dd.answer.value=JSON.stringify({text:b.dd.answer.value}))):b.dd.answer.value="{}"}}}]).directive("imImageComment",function(){return{require:"?ngModel",scope:{val:"=imImageComment"},link:function(a,b,c,d){var e=function(b){var c=null;try{c=JSON.parse(a.val)}catch(a){c={}}return b&&b==a.val&&(d.$setViewValue(c.text),b=c.text),angular.isUndefined(b)&&(b=""),c.text=b,a.val=JSON.stringify(c),b};d.$parsers.unshift(e)}}}).directive("msMaxlength",function(){return{require:"?ngModel",link:function(a,b,c,d){function e(a){if(null!=f&&null!=a&&f>0&&a.length>f){var b=a.substring(0,f);return d.$setViewValue(b),d.$render(),b}return a}var f=Number(c.msMaxlength);d.$parsers.push(e)}}}).directive("imSmartComment",["errorManager","$timeout","$interval",function(a,b,c){return{require:"?ngModel",link:function(d,e,f,g){function h(a){try{JSON.parse(a)}catch(a){return!1}return!0}d.ariaLabel=d.dd.prompt.text,d.$on("nextButtonClickedWithError",function(){void 0!==d.promptForm&&(d.ariaLabel=a.getAriaLabel(d.dd.prompt,d.promptForm))}),d.$watch("this.promptForm.$valid",function(){void 0!==d.promptForm&&(d.ariaLabel=a.getAriaLabel(d.dd.prompt,d.promptForm))}),d.keypress=function(a){32===a&&d.closeHint()},d.showStrengthMeter=function(){return!i.enabled&&d.dd.prompt.nudge.useStrengthMeter},d.closeHint=function(a){d.setHintTabindex(!1),hintingEngine.audit(!0===a?"CA":"CM",null,e.val(),null,!0),d.hintClosed=!0,hintingEngine.canHint(d.dd.prompt.nudge.curStrength,!1)&&(e.keyup(d.keyupHintCallback),d.dd.prompt.nudge.hint=null)},d.showHint=function(){return!i.enabled&&(0==d.hintClosed&&d.dd.prompt.nudge.hint&&""!=d.dd.prompt.nudge.hint)},d.checkHintingThreshold=function(){var a=!0,b=smartCommentClientAuditor.nonStopWordCount()+.5*smartCommentClientAuditor.stopWordCount;return null!=d.dd.prompt.hintingThreshold&&(a=b<=d.dd.prompt.hintingThreshold),a},d.setHintTabindex=function(a){d.wcagToggle&&b(function(){var b=$(".promptHint_"+d.dd.prompt.id),c=$(".promptHintText_"+d.dd.prompt.id);null!==a&&a?(b.attr("tabindex","2"),c.attr("tabindex","1")):(b.removeAttr("tabindex"),c.removeAttr("tabindex"))})},d.analyzeComment=function(a){(!k&&!j&&0==smartCommentClientAuditor.pollingFrequency||a)&&smartCommentClientAuditor.outputWordCount(),(!a||j&&k)&&d.checkHintingThreshold()&&(3==d.dd.prompt.nudge.hintingType?hintingEngine.getHint(e.val(),d.dd.prompt.nudge.language,d.dd.prompt.nudge.pearModelName,d.hintCallback,!0):hintingEngine.getHint(e.val(),d.dd.prompt.nudge.language,d.dd.prompt.nudge.pearModelId,d.hintCallback,!0))};var i=null;"undefined"!=typeof imSmartCommentWebhookConfig&&(i=imSmartCommentWebhookConfig);var i=angular.extend({enabled:!1,analysisType:"ms",analysisFrequency:0,syncHintingInterval:!1},i||{}),j=!1;if(i.enabled){smartCommentClientAuditor.enabled=!0;var k=i.syncHintingInterval;switch(i.analysisType){case"ms":j=!0;break;case"words":smartCommentClientAuditor.pollingFrequency=i.analysisFrequency,k&&(smartCommentClientAuditor.analyzeComment=d.analyzeComment);break;case"pausems":k=!1,hintingEngine.config.typingTimeoutMs=i.analysisFrequency}}if(d.dd.prompt.nudge.useStrengthMeter){var l={};l.targetStrength=d.dd.prompt.wordTarget,null!=d.dd.prompt.nudge.stopWords&&(l.stopWords=JSON.parse("["+d.dd.prompt.nudge.stopWords+"]")),g.$parsers.push(function(a){return d.strengthMeterCalc(textStrengthCalculator.getStrengthAndColor(a,l),!1),null==smartCommentIntervalPromise&&j&&(smartCommentIntervalPromise=c(function(){d.analyzeComment(!0)},i.analysisFrequency)),a}),d.pasteCallback=function(a){a?b(d.pasteCallback,100):d.strengthMeterCalc(textStrengthCalculator.getStrengthAndColor(e.val(),l),!1)},d.strengthMeterCalc=function(a,b){var c=80;d.dd.prompt.nudge.curStrength=a.strength;var f=a.strength*c;f>c&&(f=Math.min(c+.2*(f-c),100)),angular.element(".nudge_progress").attr("dumbie",""),d.strengthMeterStyle={"background-color":a.color,height:f+"%"},d.strengthMeterClass=a.strength>.15?"active":"",b||(e[0].style.borderLeft="1px solid "+a.color,d.strengthMeterArrowStyle={opacity:1,"border-right-color":a.color,bottom:f-4+"%"})};var m=d.dd.answer.value?h(d.dd.answer.value)?JSON.parse(d.dd.answer.value).text:d.dd.answer.value:null;d.strengthMeterCalc(textStrengthCalculator.getStrengthAndColor(m,l),!0)}(d.dd.prompt.nudge.hintingType>0||i.enabled)&&(hintingEngine.history={},hintingEngine.config.hintingType=d.dd.prompt.nudge.hintingType,d.hintClosed=!1,d.dd.prompt.hintTimeout=null,d.hintCallback=function(a){var c=new Date-d.lastTypingTime,f=d.$parent.mobile?hintingEngine.config.mobileMinShowHintTimeoutMs:hintingEngine.config.minShowHintTimeoutMs,g=0;if(hintingEngine.isValidHint(a,e.val(),d.dd.prompt.id)&&(d.setHintTabindex(!0),!d.hintClosed&&d.dd.prompt.nudge.hint&&!hintingEngine.isDefaultHint(a.hint))){d.hintClosed=!0;try{d.$apply()}catch(a){}g=f+300}b(function(){if((!(!d.hintClosed&&Object.keys(hintingEngine.history).length>0&&hintingEngine.isDefaultHint(a.hint))||i.enabled)&&!(d.dd.prompt.nudge.disableHintingUntil5Words&&hintingEngine.isDefaultHint(a.hint)&&smartCommentClientAuditor.wordCount<5)){if(hintingEngine.logHintIfValid(a,e.val(),!0,d.dd.prompt.id)){d.dd.prompt.nudge.hint=hintingEngine.stripDefaultHintIdentifier(a.hint),d.hintClosed=!1;try{d.$apply()}catch(a){}}i.enabled&&(globalWebHookInfo=a.webhookInfo,console.log("--HINT RETURNED--\nInput text: "+globalWebHookInfo.triggerValue+"\nHint: "+globalWebHookInfo.hint+"\nAll tag annotations: "+globalWebHookInfo.allTagAnnotations+"\nMatched annotation info: "+globalWebHookInfo.matchedTagAnnotationInfo),smartCommentClientAuditor.afterHintReturnedCallback())}},Math.max(g,f-c,0))},d.lastTypingTime=null,d.keyupHintCallback=function(){d.lastTypingTime=new Date,d.dd.prompt.hintTimeout&&b.cancel(d.dd.prompt.hintTimeout),"en"!=d.dd.prompt.nudge.language&&(hintingEngine.config.serverTimeoutMs=3e3),-1!=[".","!","?",",","-"].indexOf(e.val().charAt(e.val().length-1))?d.dd.prompt.hintTimeout=b(d.analyzeComment,hintingEngine.config.typingTimeoutFormatterCharMs):d.dd.prompt.hintTimeout=b(d.analyzeComment,hintingEngine.config.typingTimeoutMs)},k||e.keyup(d.keyupHintCallback)),hintingEngine.audit("V",null,null,"strengthMeter: "+(d.dd.prompt.nudge.useStrengthMeter?"T":"F")+", hinting:"+d.dd.prompt.nudge.hintingType,!0)}}}]),angular.module("im.mask",[]).value("imMaskConfig",{maskDefinitions:{"#":/\d/,l:/[a-zA-Z]/,L:/[A-Z]/,a:/[a-zA-Z0-9]/,A:/[A-Z0-9]/,P:/[AP]/},clearOnBlur:!1,clearOnBlurPlaceholder:!1,escChar:"\\",eventsToHandle:["input","keyup","click","focus"],addDefaultPlaceholder:!0,allowInvalidValue:!0}).provider("imMask.Config",function(){var a={};this.maskDefinitions=function(b){return a.maskDefinitions=b},this.clearOnBlur=function(b){return a.clearOnBlur=b},this.clearOnBlurPlaceholder=function(b){return a.clearOnBlurPlaceholder=b},this.eventsToHandle=function(b){return a.eventsToHandle=b},this.addDefaultPlaceholder=function(b){return a.addDefaultPlaceholder=b},this.allowInvalidValue=function(b){return a.allowInvalidValue=b},this.$get=["imMaskConfig",function(b){var c=b;for(var d in a)angular.isObject(a[d])&&!angular.isArray(a[d])?angular.extend(c[d],a[d]):c[d]=a[d];return c}]}).directive("imMask",["imMaskConfig",function(a){function b(a){return a===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(a.type||a.href||~a.tabIndex)}return{priority:100,require:"ngModel",restrict:"A",compile:function(){var c=angular.copy(a);return function(a,d,e,f){function g(a){return angular.isDefined(a)?(u(a),S?(m(),n(),!0):l()):l()}function h(a){a&&(H=a,!S||0===d.val().length&&angular.isDefined(e.placeholder)||d.val(r(q(d.val()))))}function i(){return g(e.imMask)}function j(a){return S?(K=q(a||""),M=p(K),f.$setValidity("mask",M),K.length&&(M||Y.allowInvalidValue)?r(K):void 0):a}function k(a){return S?(K=q(a||""),M=p(K),f.$viewValue=K.length?r(K):"",f.$setValidity("mask",M),M||Y.allowInvalidValue?X?f.$viewValue:K:void 0):a}function l(){return S=!1,o(),angular.isDefined(U)?d.attr("placeholder",U):d.removeAttr("placeholder"),angular.isDefined(V)?d.attr("maxlength",V):d.removeAttr("maxlength"),d.val(f.$modelValue),f.$viewValue=f.$modelValue,!1}function m(){K=O=q(f.$modelValue||""),L=N=r(K),M=p(K),e.maxlength&&d.attr("maxlength",2*F[F.length-1]),!U&&Y.addDefaultPlaceholder&&d.attr("placeholder",H);for(var a=f.$modelValue,b=f.$formatters.length;b--;)a=f.$formatters[b](a);f.$viewValue=a||"",f.$render()}function n(){T||(d.bind("blur",v),d.bind("mousedown mouseup",x),d.bind("keydown",z),d.bind(Y.eventsToHandle.join(" "),A),T=!0)}function o(){T&&(d.unbind("blur",v),d.unbind("mousedown",x),d.unbind("mouseup",x),d.unbind("keydown",z),d.unbind("input",A),d.unbind("keyup",A),d.unbind("click",A),d.unbind("focus",A),T=!1)}function p(a){return!a.length||a.length>=J}function q(a){var b,c,e="",f=d[0],g=void 0!==G?G.slice():[],h=P,i=h+E(f),j="";return a=a.toString(),b=0,c=a.length-(void 0!==H?H.length:0),angular.forEach(I,function(d){var e=d.position;e>=h&&e<i||(e>=h&&(e+=c),a.substring(e,e+d.value.length)===d.value&&(j+=a.slice(b,e),b=e+d.value.length))}),a=j+a.slice(b),angular.forEach(a.split(""),function(a){g.length&&g[0].test(a)&&(e+=a,g.shift())}),e}function r(a){var b="",c=F.slice();return angular.forEach(H.split(""),function(d,e){a.length&&e===c[0]?(b+=a.charAt(0)||"_",a=a.substr(1),c.shift()):b+=d}),b}function s(a){var b,c=angular.isDefined(e.imMaskPlaceholder)?e.imMaskPlaceholder:e.placeholder;return angular.isDefined(c)&&c[a]?c[a]:(b=angular.isDefined(e.imMaskPlaceholderChar)&&e.imMaskPlaceholderChar?e.imMaskPlaceholderChar:"_","space"===b.toLowerCase()?" ":b[0])}function t(){var a,b,c=H.split("");F&&!isNaN(F[0])&&angular.forEach(F,function(a){c[a]="_"}),a=c.join(""),b=a.replace(/[_]+/g,"_").split("_"),b=b.filter(function(a){return""!==a});var d=0;return b.map(function(b){var c=a.indexOf(b,d);return d=c+1,{value:b,position:c}})}function u(a){var b=0;if(F=[],G=[],H="",angular.isString(a)){J=0;var c=!1,d=0,e=a.split(""),f=!1;angular.forEach(e,function(a,e){f?(f=!1,H+=a,b++):Y.escChar===a?f=!0:Y.maskDefinitions[a]?(F.push(b),H+=s(e-d),G.push(Y.maskDefinitions[a]),b++,c||J++,c=!1):"?"===a?(c=!0,d++):(H+=a,b++)})}F.push(F.slice().pop()+1),I=t(),S=F.length>1}function v(){if((Y.clearOnBlur||Y.clearOnBlurPlaceholder&&0===K.length&&e.placeholder)&&(P=0,Q=0,M&&0!==K.length||(L="",d.val(""),a.$apply(function(){f.$pristine||f.$setViewValue("")}))),K!==Z){var b=d.val(),c=""===K&&b&&angular.isDefined(e.imMaskPlaceholderChar)&&"space"===e.imMaskPlaceholderChar;c&&d.val(""),w(d[0]),c&&d.val(b)}Z=K}function w(a){var b;if(angular.isFunction(window.Event)&&!a.fireEvent)try{b=new Event("change",{view:window,bubbles:!0,cancelable:!1})}catch(a){b=document.createEvent("HTMLEvents"),b.initEvent("change",!1,!0)}finally{a.dispatchEvent(b)}else"createEvent"in document?(b=document.createEvent("HTMLEvents"),b.initEvent("change",!1,!0),a.dispatchEvent(b)):a.fireEvent&&a.fireEvent("onchange")}function x(a){"mousedown"===a.type?d.bind("mouseout",y):d.unbind("mouseout",y)}function y(){Q=E(this),d.unbind("mouseout",y)}function z(a){var b=8===a.which,c=C(this)-1||0,e=90===a.which&&a.ctrlKey;if(b){for(;c>=0;){if(B(c)){D(this,c+1);break}c--}R=-1===c}e&&(d.val(""),a.preventDefault())}function A(b){b=b||{};var c=b.which,e=b.type;if(16!==c&&91!==c){var g,h=d.val(),i=N,j=!1,k=q(h),l=O,m=C(this)||0,n=P||0,o=m-n,p=F[0],s=F[k.length]||F.slice().shift(),t=Q||0,u=E(this)>0,v=t>0,w=h.length>i.length||t&&h.length>i.length-t,x=h.length<i.length||t&&h.length===i.length-t,y=c>=37&&c<=40&&b.shiftKey,z=37===c,A=8===c||"keyup"!==e&&x&&-1===o,G=46===c||"keyup"!==e&&x&&0===o&&!v,I=(z||A||"click"===e)&&m>p;if(Q=E(this),!y&&(!u||"click"!==e&&"keyup"!==e&&"focus"!==e)){if(A&&R)return d.val(H),a.$apply(function(){f.$setViewValue("")}),void D(this,n);if("input"===e&&x&&!v&&k===l){for(;A&&m>p&&!B(m);)m--;for(;G&&m<s&&-1===F.indexOf(m);)m++;var J=F.indexOf(m);k=k.substring(0,J)+k.substring(J+1),k!==l&&(j=!0)}for(g=r(k),N=g,O=k,!j&&h.length>g.length&&(j=!0),d.val(g),j&&(a.$apply(function(){f.$setViewValue(g)}),d.val(g)),w&&m<=p&&(m=p+1),I&&m--,m=m>s?s:m<p?p:m;!B(m)&&m>p&&m<s;)m+=I?-1:1;(I&&m<s||w&&!B(n))&&m++,P=m,D(this,m)}}}function B(a){return F.indexOf(a)>-1}function C(a){if(!a)return 0;if(void 0!==a.selectionStart)return a.selectionStart;if(document.selection&&b(d[0])){a.focus();var c=document.selection.createRange();return c.moveStart("character",a.value?-a.value.length:0),c.text.length}return 0}function D(a,c){if(!a)return 0;if(0!==a.offsetWidth&&0!==a.offsetHeight)if(a.setSelectionRange)b(d[0])&&(a.focus(),a.setSelectionRange(c,c));else if(a.createTextRange){var e=a.createTextRange();e.collapse(!0),e.moveEnd("character",c),e.moveStart("character",c),e.select()}}function E(a){return a?void 0!==a.selectionStart?a.selectionEnd-a.selectionStart:window.getSelection?window.getSelection().toString().length:document.selection?document.selection.createRange().text.length:0:0}var F,G,H,I,J,K,L,M,N,O,P,Q,R,S=!1,T=!1,U=e.placeholder,V=e.maxlength,W=f.$isEmpty;f.$isEmpty=function(a){return W(S?q(a||""):a)};var X=void 0===e.imMaskPostWithMask||"true"===e.imMaskPostWithMask;e.$observe("modelViewValue",function(a){"true"===a&&(X=!0)}),e.$observe("allowInvalidValue",function(a){Y.allowInvalidValue=""===a||!!a,j(f.$modelValue)});var Y={};e.uiOptions?(Y=a.$eval("["+e.uiOptions+"]"),Y=angular.isObject(Y[0])?function(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(void 0===b[c]?b[c]=angular.copy(a[c]):angular.isObject(b[c])&&!angular.isArray(b[c])&&(b[c]=angular.extend({},a[c],b[c])));return b}(c,Y[0]):c):Y=c,e.$observe("imMask",g),angular.isDefined(e.imMaskPlaceholder)?e.$observe("imMaskPlaceholder",h):e.$observe("placeholder",h),angular.isDefined(e.imMaskPlaceholderChar)&&e.$observe("imMaskPlaceholderChar",i),angular.isDefined(e.imMaskPostWithMask)&&e.$observe("imMaskPostWithMask",i),f.$formatters.unshift(j),f.$parsers.unshift(k);var Z=d.val();d.bind("mousedown mouseup",x),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);e<c;e++)if(e in b&&b[e]===a)return e;return-1})}}}}]),angular.module("modal-dialog",["ngSanitize"]).directive("modalDialog",["httpService",function(a){return{restrict:"A",replace:!0,templateUrl:"app/js/prompts/common/modal-dialog.tpl.html",transclude:!0,link:function(b,c,d){b.iframeurl=d.iframeurl,b.isMobile=a.data.mobile,b.classes=d.class,b.closeModalDialog=function(c,d){null==d&&(d=angular.element(c.target).closest(".ng-modal")),b.$emit("close-modal"),d.remove(),a.data.mobile&&(angular.element("#promptArea").children().show(),angular.element(".navButton").show())}},controller:["$scope","$sce",function(a,b){a.trustSrc=function(a){return b.trustAsResourceUrl(a)}}]}}]),angular.module("datetime",[]).value("dateConfig",{animation:"pop",dateOrder:"mmddyy",display:"bottom",theme:"mobiscroll datepicker android-ics light",closeOnSelect:!0,cancelText:!1,setText:!1,headerText:!1,navigation:"month",showDivergentDays:!1,controls:["calendar"]}).value("timeConfig",{animation:"pop",display:"bottom",theme:"mobiscroll timepicker android-ics light",cancelText:!1,headerText:!1,showLabel:!1,rows:3,mode:"mixed"}).directive("msDateTime",["errorManager","dateConfig","timeConfig","$timeout","wcagService",function(a,b,c,d,e){return{restrict:"A",templateUrl:"app/js/prompts/date.tpl.html",scope:{dd:"=msDateTime"},controller:["$scope",function(a){a.getFirstInputControlClass=function(){return"tabindex_prompt_"+a.dd.prompt.id}}],link:function(d,f,g){d.wcagToggle=e.getState(),d.ariaLabel=d.dd.prompt.text;var h=new Date,i="TIME"==d.dd.prompt.type,j=!i&&("ALLOW_FUTURE_DATE_INPUT"==d.dd.prompt.dateSelectionOverride||"TODAY_IS_MINIMUM_DATE"==d.dd.prompt.dateSelectionOverride),k=!i&&"TODAY_IS_MINIMUM_DATE"==d.dd.prompt.dateSelectionOverride,l=i?c:b;d.mobiscrollConfig={},d.errorManager=a;var m=d.dd.prompt.pattern?d.dd.prompt.pattern:"h:ii A";i&&(m=m.replace(/[^a-zA-Z 0-9]+/g,"")),angular.extend(d.mobiscrollConfig,l,{dateFormat:i?null:d.dd.prompt.pattern?d.dd.prompt.pattern:"mm/dd/yy",maxDate:i?null:j?null:h,minDate:i?null:0==k?null:h,timeFormat:i?d.dd.prompt.pattern?d.dd.prompt.pattern:"h:ii A":null,timeWheels:m,display:!0===d.$parent.mobile?"modal":"bubble",theme:l.theme+(!0===d.$parent.mobile?" mobile":" desktop")}),d.$on("nextButtonClickedWithError",function(){void 0!==d.promptForm&&(d.ariaLabel=a.getAriaLabel(d.dd.prompt,d.promptForm))}),d.$watch("this.promptForm.$valid",function(){d.ariaLabel=a.getAriaLabel(d.dd.prompt,d.promptForm)}),d.convertToEnglish=function(a,b){return $.mobiscroll.formatDate(b,$.mobiscroll.parseDate(b,a,$.mobiscroll.i18n[n]))},d.convertToLang=function(a,b){return"en"===n?a:$.mobiscroll.formatDate(b,$.mobiscroll.parseDate(b,a),$.mobiscroll.i18n[n])};var n="en";if(d.$parent.locale&&d.$parent.locale!==n){var o=d.$parent.locale.replace("_","-");$.mobiscroll.i18n[o]?n=o:o.length>2&&(o=o.substring(0,2),$.mobiscroll.i18n[o]&&(n=o))}var p=angular.element("input",f),q=p.next(),r=p.attr("id");p.attr("id",r.replace("{{ dd.prompt.id }}",d.dd.prompt.id));var s=p,t=onSelectFunction=null;!0!==d.$parent.mobile&&(t=function(a){d.displayValue&&a.setValue(d.displayValue)},onSelectFunction=function(a,b){d.displayValue=a,d.$apply(),p.change()},s=q),q.bind("click",function(){d.showMobiscroll()}),d.prepareMobiscroll=function(a){if(null!=a){var b={};angular.extend(b,a,{onBeforeShow:t,onSelect:onSelectFunction,anchor:p,lang:n}),i?s.mobiscroll().time(b):s.mobiscroll().calendar(b);var c=a.timeFormat?a.timeFormat:a.dateFormat;d.dd.answer.value&&(d.displayValue=d.convertToLang(d.dd.answer.value,c))}},d.showMobiscroll=function(){s.mobiscroll("show")},d.displayValue=d.dd.answer.value,d.prepareMobiscroll(d.mobiscrollConfig),d.$watch("displayValue",function(a){if(a&&d.mobiscrollConfig){var b=i?d.mobiscrollConfig.timeFormat:d.mobiscrollConfig.dateFormat,c=d.convertToEnglish(a,b),e=d.convertToLang(c,b);i&&(a=a.replace(/^[0]+/g,""),0==a.indexOf(":")&&(a="00"+a)),e.toLowerCase()==a.toLowerCase()?d.dd.answer.value=c:d.dd.answer.value=a}else""==a&&(d.dd.answer.value=a)})}}}]),angular.module("debug-prompt",[]).directive("msDebug",function(){return{restrict:"A",templateUrl:"app/js/prompts/debug-prompt.tpl.html",scope:{debugObject:"=msDebug"}}}),angular.module("employee",[]).directive("msEmployee",["errorManager","wcagService",function(a,b){return{restrict:"A",templateUrl:"app/js/prompts/employee.tpl.html",scope:{dd:"=msEmployee"},controller:["$scope",function(a){a.getFirstInputControlClass=function(){return"tabindex_prompt_"+a.dd.prompt.id}}],link:function(c,d){if(c.wcagToggle=b.getState(),c.errorManager=a,c.ariaLabel=c.selectedLabel,c.$on("nextButtonClickedWithError",function(){void 0!==c.promptForm&&(c.ariaLabel=a.getAriaLabel(c.dd.prompt,c.promptForm)+c.selectedLabel)}),0!==c.dd.prompt.employees.length){c.employees=[];for(var e=0;e<c.dd.prompt.employees.length;e++){var f=c.dd.prompt.employees[e];f={name:f.firstName+(null!==f.lastName?" "+f.lastName:""),code:f.employeeCode},null==f.code?c.emptyEmployee=f:c.employees.push(f)}var g=$.grep(c.employees,function(a){return void 0!==c.dd.answer.value&&c.dd.answer.value===a.code});g.length>0&&(c.employee=g[0]),c.onSelected=function(a){a||(a=c.emptyEmployee),c.selectedLabel=a.name,c.ariaLabel=c.selectedLabel},c.onSelected(c.employee),c.$watch("employee",function(a){a||(a=c.emptyEmployee),c.dd.answer.value=a.code})}}}}]),angular.module("generic",[]).directive("msGeneric",["$timeout","wcagService",function(a,b){return{restrict:"A",templateUrl:"app/js/prompts/generic.tpl.html",scope:{dd:"=msGeneric"},link:function(c){c.wcagToggle=b.getState(),c.$watch("dd",function(){c.wcagToggle&&a(function(){var a=$("#prompt_header_"+c.dd.prompt.id);a.length>0&&(a.attr("tabindex","1"),a.addClass("genericPromptHeader"),null!==prompt.outputValueText&&a.attr("aria-label",c.dd.prompt.text+" "+c.dd.prompt.outputValueText))},1)})}}}]),angular.module("gorec-connect",[]).directive("msGorecConnect",["facebookService","twitterService","$http","wcagService",function(a,b,c,d){return{restrict:"A",replace:!0,templateUrl:"app/js/prompts/gorec/connect.tpl.html",scope:{dd:"=msGorecConnect"},link:function(e){function f(a){a&&e.trackConnectEvent("/twitter/connect")}function g(a){a&&e.trackConnectEvent("/twitter/intentFollow")}e.types=e.dd.prompt.goRecDTO.enabledTypes,e.getTwitterHandle=b.normalizeHandle,e.wcagToggle=d.getState(),b.initFollowButton(f,g),e.openUrl=function(a){var b=angular.element("a",a.currentTarget),c=b.data("url"),d=b.data("event");window.open(c,"_blank"),e.trackConnectEvent(d),a.preventDefault()},e.keypressOpenUrl=function(a){13===a.which&&(a.preventDefault(),e.openUrl(a))},e.trackConnectEvent=function(a){c.post(window.location.protocol+"//"+window.location.host+"/websurvey/recommend"+a)},e.initFacebook=function(b,c){a.initLikeButton({showFacebookButton:!0,applicationId:e.dd.prompt.goRecDTO.facebookAppId,likeUrl:"http://www.facebook.com/"+b,localizedJsSdkUrl:"//connect.facebook.com/"+c+"/sdk.js"})}}}}]),angular.module("gorec-share-email",["modal-dialog"]).directive("emailShare",["$compile","modalService","httpService","wcagService",function(a,b,c,d){return{restrict:"A",scope:{emailData:"=emailShare"},link:function(e,f,g){e.wcagToggle=d.getState(),e.modalUrl="/websurvey/2/goRec/email?promptId="+e.$parent.dd.prompt.id,e.modalUrl+="&wcagToggle="+e.wcagToggle,e.modalUrl+="&_s="+e.$parent.dd.prompt.goRecDTO.jsessionId,e.modalOpened=!1,e.buttonClicked=function(){e.emailData.sharedOn||(c.postData("/websurvey/2/gorec/audit",{type:"B",triggerVal:"em"}),e.openModalWindow())},e.closeEmailModal=function(a){!0===a&&(b.hideNoThanks=!0,e.emailData.sharedOn=!0,f.unbind("click"),f.parent().unbind("click")),e.modalOpened=!1},e.openModalWindow=function(){if(!e.modalOpened){var b='<div modal-dialog iframeurl="'+e.modalUrl+'" class="email-ng-modal"></div>',c=a(angular.element(b))(e);e.$parent.$parent.$parent.appendDialog(c),e.modalOpened=!0}},e.$on("close-modal",function(){e.emailData.sharedOn=!1,e.modalOpened=!1})}}}]),angular.module("gorec-share-facebook",["modal-dialog"]).directive("facebookShare",["$compile","modalService","httpService",function(a,b,c){return{restrict:"A",scope:{facebookData:"=facebookShare"},link:function(d,e,f){if(d.loginStatus=1==c.data.facebookAuthorized&&"connected",d.loginWindow=null,d.skipMobileSubmit=!1,d.loginUrl="/websurvey/recommend/facebook/login?jsessionid="+d.$parent.dd.prompt.goRecDTO.jsessionId+"&msrd="+window.location.protocol+"//"+window.location.host,d.modalUrl="/websurvey/2/goRec/facebook?promptId="+d.$parent.dd.prompt.id+"&_s="+d.$parent.dd.prompt.goRecDTO.jsessionId,!d.facebookData.sharedOn){if(window.fbAsyncInit=function(){FB.init({appId:d.facebookData.key,version:"v2.0",channelUrl:window.location.protocol+"//"+window.location.host+"/websurvey/jslib/channelFile.html",status:!0,cookie:!0,xfbml:!0}),d.doLoginVerification(d.loginVerificationCallback,d.loginVerificationCallback)},!document.getElementById("fb-root")){var g=document.createElement("div");g.id="fb-root",document.body.insertBefore(g,document.body.firstChild)}var h="facebook-jssdk";if(document.getElementById(h)){var i,j=document.getElementsByTagName("script")[0];i=document.createElement("script"),i.id=h,i.async=!0,i.src="//connect.facebook.com/"+d.facebookData.languageCode+"/sdk.js",j.parentNode.insertBefore(i,j)}}d.loginVerificationCallback=function(a){("connected"==a&&d.facebookData.showModal||"test"==a&&d.facebookData.showModal&&c.data.mobile)&&(d.openModalWindow(null),d.facebookData.showModal=!1)},d.buttonClicked=function(){d.facebookData.sharedOn||(d.loggedClick||(c.postData("/websurvey/2/gorec/audit",{type:"B",triggerVal:"fb"}),d.loggedClick=!0),null!==d.loginStatus?d.gotoUrlByLoginStatus(d.loginStatus):d.doLoginVerification(d.gotoUrlByLoginStatus,d.gotoUrlByLoginStatus))},d.gotoUrlByLoginStatus=function(a){var b=window.location.protocol+d.$parent.dd.prompt.goRecDTO.nonHttpUrl+d.loginUrl;"connected"===a?d.openModalWindow(null):!1===c.data.mobile?d.openLoginWindow(b):d.onMobileView(b)},d.doLoginVerification=function(a,b){d.$parent.dd.prompt.goRecDTO.nonHttpUrl==="//"+window.location.host?FB.getLoginStatus(function(c){"connected"===c.status?FB.api("/me/permissions",function(c){null==c.data[0].publish_actions?b(d.loginStatus):(d.loginStatus="connected",a(d.loginStatus))}):b(d.loginStatus)},!0):b("test")},d.closeFacebookModal=function(a){!0===a&&(b.hideNoThanks=!0,d.facebookData.sharedOn=!0,e.unbind("click"),e.parent().unbind("click"))},d.retryLogin=function(){d.loginStatus=null,e.click()},d.openModalWindow=function(){c.data.facebookAuthorized=!0;var b='<div modal-dialog iframeurl="'+d.modalUrl+'" class="facebook-ng-modal"></div>',e=a(angular.element(b))(d);d.$parent.$parent.$parent.appendDialog(e)},d.openLoginWindow=function(a){null==d.loginWindow||d.loginWindow.closed?d.loginWindow=window.open(a,"","toolbar=0,status=0,width=460, height=410"):d.loginWindow.focus()},d.onMobileView=function(a){var b=angular.element("<form id='facebookMobileForm' name='' method='get' action='"+a+"'></form>"),c=angular.element("<input type='hidden' name='comment' value=\""+d.$parent.$parent.$parent.getRecommendationText()+'" />'),e=angular.element("<input type='hidden' name='isVersion2' value=\"true\" />"),f=angular.element("<input type='hidden' name='jsessionid' value=\""+d.$parent.dd.prompt.goRecDTO.jsessionId+'" />'),g=angular.element("<input type='hidden' name='msrd' value=\""+window.location.protocol+"//"+window.location.host+'" />'),h=angular.element("<input type='submit' id='submit_changes' name='Submit' value='Apply' style='display:none;'/>");b.append(f,g,c,e,h),angular.element("body").append(b),d.skipMobileSubmit||angular.element("form").last().submit()},1==c.data.callOnFacebookLoggedIn&&1==c.data.mobile&&(d.loginStatus="connected",d.buttonClicked()),delete c.data.callOnFacebookLoggedIn}}}]),angular.module("gorec-share-google",[]).directive("googleShare",["modalService","httpService","$http","$timeout",function(a,b,c,d){return{restrict:"A",scope:{googleData:"=googleShare"},link:function(e,f,g){if(e.clickedGooglePlusButton=!1,e.googlePlusAuthResultCode=null,e.renderButton=function(a,b){try{gapi.interactivepost.render(a.attr("id"),b)}catch(c){d(function(){e.renderButton(a,b)},100)}},!e.googleData.sharedOn){var h=e.googleData.connectPageUrl;if(""!=h&&void 0!=h||(h="http://www.opentell.com"),0==angular.element("#googlePlusScript").length){window.___gcfg={lang:e.googleData.languageCode};var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="https://apis.google.com/js/platform.js",i.id="googlePlusScript";var j=document.getElementsByTagName("script")[0];j.parentNode.insertBefore(i,j)}var k={clientid:e.googleData.key,prefilltext:e.$parent.getRecommendationText(),calltoactionurl:h,contenturl:h,cookiepolicy:"single_host_origin",calltoactionlabel:"VISIT",callback:"onGooglePlusLoggedIn",requestvisibleactions:"http://schemas.google.com/AddActivity",scope:"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.moments.write"};e.renderButton(f,k)}e.buttonClicked=function(){e.clickedGooglePlusButton=!0,e.logUserInformation()},e.onGooglePlusLoggedIn=function(a){a.access_token&&(e.googlePlusAuthResultCode=a.code,e.logUserInformation())},e.logUserInformation=function(){if(e.googleData.sharedOn)return e.googleData.sharedOn=!0,!1;e.clickedGooglePlusButton&&null!=e.googlePlusAuthResultCode&&(b.postData("/websurvey/2/gorec/audit",{type:"B",triggerVal:"g+"}),a.hideNoThanks=!0,e.googleData.sharedOn=!0,c.post("/websurvey/recommend/googleplus/metadata",{code:e.googlePlusAuthResultCode},{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:function(a){return $.param(a)}}))}}}}]),angular.module("gorec-share-twitter",["modal-dialog"]).directive("twitterShare",["$compile","modalService","httpService",function(a,b,c){return{restrict:"A",scope:{twitterData:"=twitterShare"},link:function(d,e,f){function g(){c.getURL("/websurvey/recommend/twitter/check_token").then(function(a){if(a.valid_token||a.invalid_token){try{d.loginWindow.close()}catch(a){}a.valid_token&&(d.loginStatus=!0,d.openModalWindow())}else setTimeout(g,1e3)})}d.loginStatus=c.data.twitterAuthorized||!1,d.skipMobileSubmit=!1,d.loginUrl=window.location.protocol+d.$parent.dd.prompt.goRecDTO.nonHttpUrl+"/websurvey/recommend/twitter/login?jsessionid="+d.$parent.dd.prompt.goRecDTO.jsessionId,d.modalUrl="/websurvey/2/goRec/twitter?promptId="+d.$parent.dd.prompt.id+"&_s="+d.$parent.dd.prompt.goRecDTO.jsessionId,-1===window.location.href.indexOf(d.$parent.dd.prompt.goRecDTO.nonHttpUrl)&&(d.vanityUrl=!0),d.buttonClicked=function(){d.twitterData.sharedOn||(c.postData("/websurvey/2/gorec/audit",{type:"B",triggerVal:"tw"}),!0===d.loginStatus?d.openModalWindow():!1===c.data.mobile?d.openLoginWindow():d.onMobileView())},d.closeTwitterModal=function(a){!0===a&&(b.hideNoThanks=!0,d.twitterData.sharedOn=!0,e.unbind("click"),e.parent().unbind("click"))},d.retryLogin=function(){d.loginStatus=null,e.click()},d.openModalWindow=function(){c.data.twitterAuthorized=!0;var b='<div modal-dialog iframeurl="'+d.modalUrl+'" class="twitter-ng-modal"></div>',e=a(angular.element(b))(d);d.$parent.$parent.$parent.appendDialog(e)},d.openLoginWindow=function(){null==d.loginWindow||d.loginWindow.closed?d.loginWindow=window.open(d.loginUrl,"","toolbar=0,status=0,width=600, height=500"):d.loginWindow.focus(),d.vanityUrl&&setTimeout(g,1e3)},d.onMobileView=function(){var a=angular.element("<form id='twitterMobileForm' name='' method='get' action='"+d.loginUrl+"'></form>"),b=angular.element("<input type='hidden' name='comment' value=\""+d.$parent.$parent.$parent.getRecommendationText()+'" />'),c=angular.element("<input type='hidden' name='isVersion2' value=\"true\" />"),e=angular.element("<input type='submit' id='submit_changes' name='Submit' value='Apply' style='display:none;'/>");a.append(b,c,e),angular.element("body").append(a),d.skipMobileSubmit||angular.element("form").last().submit()},1==c.data.callOnTwitterLoggedIn&&1==c.data.mobile&&(d.loginStatus=!0,d.openModalWindow()),delete c.data.callOnTwitterLoggedIn}}}]),angular.module("gorec-share",["modal-dialog","gorec-share-twitter","gorec-share-google","gorec-share-email","gorec-share-facebook"]).directive("msGorecShare",["modalService","httpService","wcagService",function(a,b,c){return{restrict:"A",templateUrl:"app/js/prompts/gorec/gorec-share.tpl.html",scope:{dd:"=msGorecShare"},link:function(d,e,f){if(d.modalService=a,d.wcagToggle=c.getState(),d.promptTextNoHtml=c.getTextNoHtml(d.dd.prompt.text),d.dd.prompt.goRecDTO&&d.dd.prompt.goRecDTO.enabledTypes)for(x in d.dd.prompt.goRecDTO.enabledTypes)if(d.dd.prompt.goRecDTO.enabledTypes[x].sharedOn){d.modalService.hideNoThanks=!0;break}d.hideNoThanksText=function(){return b.data.hideNavButtons=!d.modalService.hideNoThanks&&void 0!==d.$parent.$parent.prompt&&!d.$parent.$parent.prompt.isTriggered,d.modalService.hideNoThanks},d.clickNoThanks=function(){b.postData("/websurvey/2/gorec/audit",{type:"N"}),d.$parent.nextPageButtonClick()},d.getRecommendationText=function(){var a=$("textarea",e);return a.length>0?a.val():""},d.appendDialog=function(a){if(!1===b.data.mobile)angular.element("body").prepend(a);else{var c=angular.element("#promptArea");c.children().hide(),angular.element(".navButton").hide(),c.prepend(a)}},d.doNav=function(a,b){32!==a.keyCode&&13!==a.keyCode||(a.preventDefault(),a.stopPropagation(),"noThx"===b?d.clickNoThanks():a.currentTarget.firstElementChild.click())}}}}]).directive("share",["$compile",function(a){return{restrict:"A",link:function(a,b,c){b.bind("click touch",function(b){a.$$childHead.$$childHead.buttonClicked()})}}}]).factory("modalService",[function(){return{hideNoThanks:!1}}]),angular.module("image-upload",["ngFileUpload"]).directive("msImageUpload",["errorManager","Upload",function(a,b){return{restrict:"A",replace:!0,templateUrl:"app/js/prompts/image-upload.tpl.html",controller:["$scope",function(a){}],scope:{dd:"=msImageUpload"},link:function(c){function d(a){if(a){var d={file:a,uploading:!0,uploadPercent:0,dt:(new Date).getTime()};c.fileInfos.push(d),c.uploadingCount++,b.upload({url:"/websurvey/2/image/upload2",data:{file:a,id:c.dd.uuid}}).then(function(a){if(c.uploadingCount--,d.uploadPercent=100,clearInterval(d.interval),void 0!=a.data&&a.data.success&&void 0!=a.data.imageId){var b=k();d.imageId=a.data.imageId,b.imageIds=b.imageIds||[],b.imageIds.push(a.data.imageId),l(b)}},function(a){c.uploadingCount--,clearInterval(d.interval),i(d.dt),console.log("Error status: "+a.status)},function(a){var b=parseInt(100*a.loaded/a.total);d.uploadPercent=Math.min(b,50),100==b?d.interval=setInterval(function(){f(d)},200):j()})}}function e(a){if(32===a.keyCode){if(a.preventDefault(),null===a.currentTarget||void 0===a.currentTarget)return;a.currentTarget.click()}}function f(a){a.uploadPercent=Math.min(100,a.uploadPercent+(100-a.uploadPercent)/2),j()}function g(a){var c=k(),d=a.imageId;b.upload({url:"/websurvey/2/image/remove",data:{id:d}}).then(function(b){void 0!=b.data&&b.data.success&&(c.imageIds.splice(c.imageIds.indexOf(d),1),0==c.imageIds.length&&delete c.imageIds,l(c),i(a.dt))})}function h(a,b){32===a.keyCode&&g(b)}function i(a){var b=-1;for(var d in c.fileInfos)if(c.fileInfos[d].dt==a){b=d;break}b>-1&&c.fileInfos.splice(b,1)}function j(){var a=0,b=0;for(var d in c.fileInfos)c.fileInfos[d].uploading&&(b++,a+=c.fileInfos[d].uploadPercent);c.uploadPercent=b>0?a/b:0}function k(){return JSON.parse(c.dd.answer.value)}function l(a){c.dd.answer.value=JSON.stringify(a)}c.errorManager=a,c.upload=d,c.uploadKeyup=e,c.remove=g,c.removeKeyup=h,c.fileInfos=[],c.uploadingCount=0,c.uploadPercent=0,c.ariaLabel=void 0!==c.dd.prompt.msgs.upload_photo?c.dd.prompt.msgs.upload_photo:"",c.keypressWCAG=function(a,b){if(32===a){if(b.preventDefault(),null===b.currentTarget||void 0===b.currentTarget||null===b.currentTarget.parentElement||void 0===b.currentTarget.parentElement)return;b.currentTarget.parentElement.click()}}}}}]),OrganizationalLevelLoader={LOCATION_CATEGORY:1,TOP_LEVEL:2,LOCATION:3,LOCATION_ONLY:4};var LocationPicker={};LocationPicker.currentSelectorId=null,LocationPicker.nextSelectorId=null,angular.module("location-picker",["errorServices"]).directive("msLocationPicker",["httpService","wcagService","errorManager",function(a,b,c){return{restrict:"A",replace:!0,templateUrl:"app/js/prompts/location-picker.tpl.html",scope:{dd:"=msLocationPicker"},controller:["$scope","$element",function(b,c){LocationPicker.httpService=a,LocationPicker.scope=b}],link:function(a,d,e){a.wcagToggle=b.getState(),a.errorManager=c,a.ariaLabel=a.dd.prompt.text,a.$on("ngRepeatFinished",function(a){initializePrompt()}),a.$on("nextButtonClickedWithError",function(){a.promptForm&&(a.ariaLabel=c.getAriaLabel(a.dd.prompt,a.promptForm))}),a.$on("locationChange",function(b,c){a.dd.answer.value=c,a.ariaLabel=a.dd.prompt.text}),a.$watch("dd.nextClickAttempts.val",function(){""!==$("#locationSelector").val()&&null!==$("#locationSelector").val()||$(".levelSelect").each(function(a,b){var c=$(b).val();""!==c&&null!==c||($(b).parent().removeClass("field-prompt-error-remove").addClass("field-prompt-error"),$(b).addClass("textError"))})})}}}]),angular.module("numeric",["im.mask"]).directive("msNumeric",["errorManager","wcagService",function(a,b){return{restrict:"A",replace:!0,templateUrl:"app/js/prompts/numeric.tpl.html",scope:{dd:"=msNumeric"},controller:["$scope",function(a){a.getFirstInputControlClass=function(){return a.inputClassName}}],link:function(c,d,e,f){if(c.errorManager=a,c.wcagToggle=b.getState(),c.ariaLabel=c.dd.prompt.text,c.inputClassName="tabindex_promptInput_"+c.dd.prompt.id,c.dataIcon=c.dd.prompt.dataIcon?c.dd.prompt.dataIcon:"",c.clear=function(){c.dd.answer.value=""},c.$on("nextButtonClickedWithError",function(){c.promptForm&&(c.ariaLabel=a.getAriaLabel(c.dd.prompt,c.promptForm))}),!c.dd.prompt.mask){var g=/[A-z]/;d.bind("keyup",function(a){a=a||event,a.target.value&&a.target.value.match(g)&&(a.target.value=a.target.value.substring(0,a.target.value.length-1))})}c.forceApply=function(a){c.dd.answer.value=a.target.value}}}}]),angular.module("offer-code-search-prompt",["errorServices"]).directive("msOfferCodeSearch",["errorManager","wcagService",function(a,b){return{restrict:"A",replace:!0,templateUrl:"app/js/prompts/offer-code-search-prompt.tpl.html",scope:{dd:"=msOfferCodeSearch"},controller:["$scope","$http",function(a,c){a.wcagToggle=b.getState(),a.inputClassName="tabindex_promptInput_"+a.dd.prompt.id,a.dataIcon="dataIcon",a.getFirstInputControlClass=function(){return a.inputClassName},a.loadOfferCodes=function(){if(a.promptForm.promptField.$setViewValue(a.promptForm.promptField.$viewValue),void 0===a.promptForm.promptField.$viewValue||""==a.promptForm.promptField.$viewValue)return void a.promptForm.promptField.$setValidity("required",!1);if(!(a.postalcode&&a.postalcode.length>4))return void a.promptForm.promptField.$setValidity("server",!1);$(".loadingOverlay").show();var b=$("#offerCodesReturned");"none"!=b[0].style.display&&b.toggle(),a.returnedItems=[],c.get("/websurvey/2/offercodesearch?postalcode="+a.postalcode).then(function(b){var c=b.data;$(".loadingOverlay").hide(),c&&c.length>0?(a.returnedItems=c,$(angular.element("#offCodeSearchPulldown")[0]).show(),$("#offerCodesReturned").hide()):(a.promptForm.promptField.$setValidity("server",!1),$(angular.element("#offCodeSearchPulldown")[0]).hide())}).catch(function(b){$(".loadingOverlay").hide(),a.errorManager.customMessage=b.message,a.promptForm.promptField.$setValidity("custom",!1),$(angular.element("#offCodeSearchPulldown")[0]).hide()})}}],link:function(b,c,d,e){b.errorManager=a,b.clear=function(){b.dd.answer.value=""},b.returnedItems=[],b.$watch("postalcode",function(){b.promptForm.promptField.$setValidity("server",!0),b.promptForm.promptField.$setValidity("custom",!0)}),b.$watch("returnedItems",function(){b.promptForm.promptField.$setValidity("server",!0),b.promptForm.promptField.$setValidity("custom",!0)}),b.$on("ngRepeatFinished",function(a){$("#offCodeSearchPulldown").click()})}}}]).directive("onFinishRender",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){!0===b.$last&&a(function(){b.$emit("ngRepeatFinished")})}}}]),$(document).ready(function(){ocSearchReadyFunc()}),angular.module("prompts",["boolean","boolean-group","categorical-prompt","categorical-group","comment","video-feedback","datetime","debug-prompt","employee","generic","gorec-connect","gorec-share","location-picker","numeric","image-upload","offer-code-search-prompt","text","text-multiple","sweepstakes-instant-win","errorServices","ngAnimate","captcha"]).directive("msPromptHeader",function(){return{templateUrl:"app/js/prompts/prompt-header.tpl.html",scope:{promptObject:"=msPromptHeader",childPromptHeader:"=msChildPromptHeader",addClass:"=msAddClass"}}}).directive("msPromptHeaderText",function(){return{templateUrl:"app/js/prompts/prompt-header-text.tpl.html",scope:{promptObject:"=msPromptHeaderText"}}}).directive("msMainImage",function(){return{templateUrl:"app/js/prompts/main-image.tpl.html",scope:{mainImage:"=msMainImage"}}}).directive("msShowErrors",["errorManager",function(a){return{restrict:"A",templateUrl:"app/js/prompts/show-errors.tpl.html",link:function(b,c,d){b.errorManager=a}}}]).directive("msShowGroupErrors",["errorManager","$timeout",function(a,b){return{restrict:"A",templateUrl:"app/js/prompts/show-group-errors.tpl.html",scope:{promptDirectiveData:"=msShowGroupErrors",pageDirectiveData:"=msPageDirectiveData",groupForm:"=msGroupForm"},link:function(b,c,d){b.errorManager=a;var e=!1;b.$watch("pageDirectiveData",function(a,c){if(a!=c){var d=!0,f=0,g=b.promptDirectiveData.prompt.minLength,h=b.promptDirectiveData.prompt.maxLength,i=[],j={},k={};for(promptIndex in b.promptDirectiveData.prompt.prompts)i.push(b.promptDirectiveData.prompt.prompts[promptIndex].id);angular.forEach(i,function(a){c[a]&&c[a].answer&&isNaN(c[a].answer)&&(j[c[a].answer.promptId]=c[a].answer.value)}),angular.forEach(i,function(b){a[b].answer&&j[b]!==a[b].answer.value&&(k={id:b,newValue:a[b].answer.value})});for(key in b.promptDirectiveData.prompt.prompts){var l=b.promptDirectiveData.prompt.prompts[key];l.required=!1,void 0!==b.pageDirectiveData[l.id].answer&&0!=b.pageDirectiveData[l.id].answer.value&&f++,h&&f>h&&k.id&&1==k.newValue&&(b.pageDirectiveData[k.id].answer.value=!1)}g&&f<g&&(d=!1),!e&&b.promptDirectiveData.error&&void 0===b.promptDirectiveData.error.fromClient&&(e=!0),d||1==b.promptDirectiveData.prompt.hideTrigger?(b.promptDirectiveData.error=null,b.groupForm.$setValidity("required",!0)):e?(b.promptDirectiveData.error={promptId:b.promptDirectiveData.prompt.id,invalidTypeName:"INVALID_INPUT",fromClient:!0},b.groupForm.$setValidity("required",!1)):b.groupForm.$setValidity("required",!1)}},!0)}}}]).directive("msHandleError",["errorManager",function(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){b.removeError=function(a,b,c){a.$setValidity("date",!0),a.$setValidity("server",!0),b&&c&&$(b).unbind(c)},b.$watch("dd.error",function(d){if(d&&d.invalidTypeName){var f=c.parent().parent().find(".text-segment").find("input");if(f.length>0){var g=b.dd.error.invalidTypeName;f.each(function(c,d){var e,h=$(d).scope().promptForm;void 0!==h&&(e=h.promptField),void 0!==e&&(b.dd.error.invalidTypeName=g,a.processServerErrors(b.dd,e),$(d).bind("change keyup paste",function(a){b.removeError(e,d,a),f.keyup()}))})}else a.processServerErrors(b.dd,e),b.choice&&b.$parent.$parent.$parent.$parent.$parent.$parent.markFieldsDirty(),c.bind("change keyup paste",function(a){b.removeError(e,c,a)})}})}}}]).directive("msInputIcon",function(){return{link:function(a,b,c){var d=$("<div class='inputField' />").addClass(c.msInputIcon);b.wrap(d)}}}).directive("msCheckbox",function(){return{restrict:"A",replace:!0,templateUrl:"app/js/prompts/common/checkbox.tpl.html",scope:{id:"@id",name:"@name",text:"@text",selected:"=ngModel"}}}).directive("msAutoFocus",function(){return{restrict:"A",link:function(a,b,c){c.$observe("msAutoFocus",function(a){if("true"===a)try{b[0].focus(),b[0].select()}catch(a){}})}}}).directive("imInlineBar",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){b.previousPromptHeight=null,b.currentPromptHeight=null,b.init=function(){for(var a=angular.element(c),d=angular.element(angular.element(angular.element(angular.element(angular.element(a.parent().children()[0]).children()[0])[0]).children()[0]).children()[0]),e=d[0].id,f=a.parent().parent().children(),g=null,h=0;h<f.length;h++){if(f[h].id===e){var i=h;do{i--,g=f[i]}while(0==f[i].clientHeight);break}g=f[h]}if(null!=g){var j=angular.element("#"+g.id+".prompt");void 0!==j[0]&&(b.previousPromptHeight=j[0].clientHeight);var k=!1;d.addClass("tempHide"),d.hasClass("ng-hide")&&(d.removeClass("ng-hide"),k=!0),b.currentPromptHeight=d[0].clientHeight,k&&d.addClass("ng-hide"),d.removeClass("tempHide")}},a(function(){b.init()},1500),b.getPrevHeight=function(){return null==b.previousPromptHeight?"":b.previousPromptHeight},b.getTop=function(){return"-"+(b.getPrevHeight()+24)},b.getHeight=function(){return null==b.previousPromptHeight||null==b.currentPromptHeight?"":b.currentPromptHeight+b.previousPromptHeight+24+"px"},b.isDisplayed=function(){return null==b.previousPromptHeight||null==b.currentPromptHeight?"none":"inherit"}}}}]).directive("msTriggeredPrompts",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){angular.forEach(b.currentPage().promptEventDTOs,function(a){angular.forEach(a.triggeredPrompts,function(c){void 0===b.currentPage().directiveData[c.id].prompt.hideTrigger&&(b.currentPage().directiveData[c.id].prompt.hideTrigger="SHOW"===a.executedOnSamePageBehavior)})}),b.changedVisibility=[],b.processVisibilityChanges=function(c,d){angular.forEach(d.triggeredPrompts,function(e){c||(b.currentPage().directiveData[e.id].answer&&(b.currentPage().directiveData[e.id].answer.value=""),b.currentPage().directiveData[e.id].prompt.prompts&&angular.forEach(b.currentPage().directiveData[e.id].prompt.prompts,function(a){b.currentPage().directiveData[a.id].answer.value=""}));var f="SHOW"===d.executedOnSamePageBehavior&&!c||"SHOW"!==d.executedOnSamePageBehavior&&c;if(b.currentPage().directiveData[e.id].prompt.hideTrigger!==f&&b.changedVisibility.push(b.currentPage().directiveData[e.id].prompt),a(function(){b.currentPage().directiveData[e.id].prompt.hideTrigger=f},50),a(function(){b.currentPage().directiveData[e.id].prompt.required=e.required&&!f}),b.currentPage().directiveData[e.id].prompt.prompts){var g=b.currentPage().directiveData[e.id].prompt.prompts;angular.forEach(g,function(b,c){a(function(){b.required=e.prompts[c].required&&!f},100)})}})},b.$watch("currentPage().answers",function(b,c,d){if(""!=b&&b!=c&&d.currentPage().promptEventDTOs){var e=null,f=null,g=[];for(promptId in b)void 0!==c[promptId]&&b[promptId].value==c[promptId].value||(e=promptId,f=b[e].value,g.push({promptId:e,answer:f}));angular.forEach(g,function(a){if(null!=a.promptId){var b=d.currentPage().directiveData[a.promptId].prompt,c=new Array;angular.forEach(d.currentPage().promptEventDTOs,function(a){b.dataField&&a.triggerFieldId===b.dataField.id&&c.push(a)}),angular.forEach(c,function(c){var e=!1;if("RATING"===b.type||"MULTIPLE_CHOICE"===b.type){var f=null;angular.forEach(b.choices,function(b){b.choiceId==a.answer&&(f=b.optionId)}),angular.forEach(c.triggerOptionIds,function(a){f&&f===a&&(e=!0)})}if("BOOLEAN"===b.type){var g="string"==typeof c.triggerValue?c.triggerValue.toLowerCase():c.triggerValue;"EQUAL"===c.operatorType?a.answer.toString()===g&&(e=!0):"NOT_EQUAL"===c.operatorType&&a.answer.toString()!=g&&(e=!0)}if("NUMERIC"===b.type)switch(void 0===a.answer&&(a.answer=""),c.operatorType){case"EQUAL":""!=a.answer&&a.answer==c.triggerValue&&(e=!0);break;case"NOT_EQUAL":""!=a.answer&&a.answer!=c.triggerValue&&(e=!0);break;case"GREATER_THAN":""!=a.answer&&a.answer>c.triggerValue&&(e=!0);break;case"GREATER_THAN_EQUAL":""!=a.answer&&a.answer>=c.triggerValue&&(e=!0);break;case"LESS_THAN":""!=a.answer&&a.answer<c.triggerValue&&(e=!0);break;case"LESS_THAN_EQUAL":""!=a.answer&&a.answer<=c.triggerValue&&(e=!0);break;case"NULL":""==a.answer&&(e=!0);break;case"NOT_NULL":""!=a.answer&&(e=!0);break;default:e=!1}d.processVisibilityChanges(e,c)})}}),angular.forEach(d.changedVisibility,function(b){var c=d.changedVisibility.length>1;a(function(){b.concurrentTriggered=c},0)}),d.changedVisibility=[]}},!0)}}}]).directive("bindHtmlCompile",["$compile",function(a){return{restrict:"A",link:function(b,c,d){b.$watch(function(){return b.$eval(d.bindHtmlCompile)},function(e){c.html(e&&e.toString());var f=b;d.bindHtmlScope&&(f=b.$eval(d.bindHtmlScope)),a(c.contents())(f)})}}}]),angular.module("sweepstakes-instant-win",[]).directive("msSweepstakesInstantWin",["$timeout","wcagService",function(a,b){return{restrict:"A",templateUrl:"app/js/prompts/sweepstakes-instant-win.tpl.html",scope:{dd:"=msSweepstakesInstantWin"},link:function(c,d,e){c.wcagToggle=b.getState(),c.ariaLabel=b.getTextNoHtml(c.dd.prompt.instantWinText),c.wcagToggle&&a(function(){var a=$("#instantWinText_"+c.dd.prompt.id);a.length>0&&(a.attr("tabindex","1"),a.addClass("genericPromptHeader"))},1)}}}]),angular.module("text-multiple",["im.mask"]).directive("msMultipleText",["$compile","errorManager","wcagService",function(d,e,f){return{restrict:"A",templateUrl:"app/js/prompts/text-multiple.tpl.html",scope:{dd:"=msMultipleText"},link:function(d,g){d.errorManager=e,d.wcagToggle=f.getState(),d.ariaLabel=d.dd.prompt.text,d.inputClassName="tabindex_promptInput_"+d.dd.prompt.id,d.dataIcon=d.dd.prompt.dataIcon?d.dd.prompt.dataIcon:"";var h,i,j=d.dd.prompt.multiBoxData.split(","),k=j.length-1,l=j[k]?j[k]:null,m=[],n=[],o=0;for(h=0;h<k;h++)i=j[h],n.push(d.dd.answer.value.substr(o,i)),o+=i;for(h=0;h<k;h++)m.push({value:n[h],length:j[h]});d.delimiter=l,d.segments=m,d.segmentWatcher=function(a){var b,c="";for(b=0;b<a.length;b++)c+=a[b].value?a[b].value:"";d.dd.answer.value=c},d.$watch("segments",d.segmentWatcher,!0),d.forceApply=function(a){d.dd.answer.value=a.target.value},d.inputHandler=function(a){var b=d.segments[a];if(b.value&&b.value.length>=b.length&&a<k-1){var c=g.find("input");c.length>a&&c[a+1].focus()}};var p=function(){var a=[],b="NUMBER"===d.dd.prompt.subType?document.getElementById("numericSegmentError_"+d.dd.prompt.id):document.getElementById("textSegmentError_"+d.dd.prompt.id);return a.push({divElement:b.getElementsByClassName("required"),errorMessage:e.getErrorMessage(d.dd.prompt,"required")}),a.push({divElement:b.getElementsByClassName("minlength"),errorMessage:e.getErrorMessage(d.dd.prompt,"minlength")}),a.push({divElement:b.getElementsByClassName("email"),errorMessage:e.getErrorMessage(d.dd.prompt,"email")}),a.push({divElement:b.getElementsByClassName("tel"),errorMessage:e.getErrorMessage(d.dd.prompt,"tel")}),a.push({divElement:b.getElementsByClassName("number"),errorMessage:e.getErrorMessage(d.dd.prompt,"number")}),a.push({divElement:b.getElementsByClassName("server"),errorMessage:e.getErrorMessage(d.dd.prompt,"server")}),a};d.getFirstInputControlClass=function(){for(h=0;h<k;h++){if(angular.element("#promptInput_"+d.dd.prompt.id+"_"+h).hasClass("ng-invalid")){d.markAllInvalidAsDirty();var b=p();return setTimeout(function(){for(a=0;a<b.length;a++)b[a].divElement[0].innerHTML="";q()}),d.inputClassName+"_"+h}}};var q=function(){setTimeout(function(){var a=p();for(b=0;b<a.length;b++)a[b].divElement[0].innerHTML=a[b].errorMessage})};d.markAllInvalidAsDirty=function(){for(var a=0;a<d.promptFormTextMultiple.$$controls.length;a++)jQuery.isEmptyObject(d.promptFormTextMultiple.$$controls[a].$error)||(d.promptFormTextMultiple.$$controls[a].$setDirty(),d.promptFormTextMultiple.$$controls[a].$$controls[0].$setDirty(),d.updateErrorMessage("NUMBER"===d.dd.prompt.subType))},d.updateErrorMessage=function(a){var b=!1,e=!1,f=!1,g=!1,h=!1,i=!1;!d.promptFormTextMultiple.$pristine&&d.promptFormTextMultiple.$invalid&&(void 0!==d.promptFormTextMultiple.$error.required&&(b=r(d.promptFormTextMultiple.$error.required)),void 0!==d.promptFormTextMultiple.$error.minlength&&(e=r(d.promptFormTextMultiple.$error.minlength)),void 0!==d.promptFormTextMultiple.$error.emailDiv&&(f=r(d.promptFormTextMultiple.$error.emailDiv)),void 0!==d.promptFormTextMultiple.$error.tel&&(g=r(d.promptFormTextMultiple.$error.tel)),void 0!==d.promptFormTextMultiple.$error.number&&(h=r(d.promptFormTextMultiple.$error.number)),void 0!==d.promptFormTextMultiple.$error.server&&(i=r(d.promptFormTextMultiple.$error.server)));var j=[b,e,f,g,h,i],k=[],l=p();for(c=0;c<l.length;c++)l[c].divElement.length>0&&s(l[c].divElement[0],l[c].errorMessage,j[c],k)};var r=function(a){for(var b=!1,c=0;c<a.length;c++)a[c].$dirty&&(b=!0);return b},s=function(a,b,c,d){const e="";c?d.includes(b)?(a.innerText=e,a.classList.add("empty")):(b!==e&&d.push(b),a.innerText=b,a.classList.contains("empty")&&a.classList.remove("empty")):(a.innerText=e,a.classList.add("empty"))}}}}]),angular.module("text",["im.mask","text-multiple"]).directive("msText",["$compile","wcagService",function(a,b){return{restrict:"A",templateUrl:"app/js/prompts/text.tpl.html",scope:{dd:"=msText"},link:function(a,c){if(a.wcagToggle=b.getState(),a.inputClassName="tabindex_promptInput_"+a.dd.prompt.id,a.dataIcon=a.dd.prompt.dataIcon?a.dd.prompt.dataIcon:"",a.ariaLabel=a.dd.prompt.text,a.getFirstInputControlClass=function(){return a.inputClassName},a.forceApply=function(b){a.dd.answer.value=b.target.value},("NUMBER"===a.dd.prompt.subType||"PHONE_US_CAN"===a.dd.prompt.subType)&&!a.dd.prompt.mask){var d=/[A-z]/;c.bind("keyup",function(a){a=a||event,a.target.value&&a.target.value.match(d)&&(a.target.value=a.target.value.substring(0,a.target.value.length-1))})}}}}]).directive("msCompositeText",["wcagService",function(a){return{restrict:"A",templateUrl:"app/js/prompts/text-composite.tpl.html",scope:{dd:"=msCompositeText"},link:function(b){b.wcagToggle=a.getState(),b.inputClassName="tabindex_promptInput_"+b.dd.prompt.id,b.dataIcon=b.dd.prompt.dataIcon?b.dd.prompt.dataIcon:"",b.ariaLabel=b.dd.prompt.text,b.getFirstInputControlClass=function(){return b.inputClassName}}}}]).directive("msScrambledText",["wcagService",function(a){return{restrict:"A",templateUrl:"app/js/prompts/text-scrambled.tpl.html",scope:{dd:"=msScrambledText"},link:function(b){b.wcagToggle=a.getState(),b.inputClassName="tabindex_promptInput_"+b.dd.prompt.id,b.dataIcon=b.dd.prompt.dataIcon?b.dd.prompt.dataIcon:"",b.ariaLabel=b.dd.prompt.text,b.getFirstInputControlClass=function(){return b.inputClassName}}}}]),angular.module("video-feedback",[]).directive("msVideoFeedback",["$sce",function(a){return{restrict:"A",templateUrl:"app/js/prompts/video-feedback.tpl.html",scope:{dd:"=msVideoFeedback"},controller:["$scope",function(a){a.additionalUrlParams="",null!=a.dd.prompt.additionalUrlParamsVPM&&$.each(a.dd.prompt.additionalUrlParamsVPM,function(b,c){a.additionalUrlParams=a.additionalUrlParams+"'"+b+"':'"+c+"', "})}],link:function(a,b,c){var d=a.dd.prompt,e=a.dd.uuid,f='function setCursorByID(id,cursorStyle) {var elem;if (document.getElementById &&(elem=document.getElementById(id)) ) {if (elem.style) elem.style.cursor=cursorStyle;}} function disableNavButtons(){\tdocument.getElementById("nextPageLink").disabled = true;\tdocument.getElementById("prevPageLink").disabled = true;\tsetCursorByID("nextPageLink","wait");\tsetCursorByID("prevPageLink","wait");} function enabledNavButtons(){\tdocument.getElementById("nextPageLink").disabled = false;\tdocument.getElementById("prevPageLink").disabled = false;\tsetCursorByID("nextPageLink","pointer");\tsetCursorByID("prevPageLink","pointer");} var onlyStrings = false;try {    window.postMessage({toString: function () {       onlyStrings = true;    }}, "*");} catch (e) {} var eventMethod = window.addEventListener ? "addEventListener" : "attachEvent";var eventer = window[eventMethod];var messageEvent = eventMethod == "attachEvent" ? "onmessage" : "message";eventer(messageEvent, function (e) {    if (e.data) {        var eventData = {};        if (typeof e.data === \'string\' && onlyStrings) {            eventData = JSON.parse(e.data);        }        else {            eventData = e.data;        }        var showNextButton = [           "recordingStarted",           "recordingStopped",           "processed",           "recordingCancelled",           "response_complete"        ];        var currentEvent = showNextButton.indexOf(eventData.event);        if (currentEvent == 0) {        \tdisableNavButtons();        } else if(currentEvent == 1 || currentEvent == 3) {        \tenabledNavButtons();        } else if(currentEvent == 2) {        \tvideoResponseProcessed = true;        }     }}, false); ',g="var vpm_widget_config = { 'project_id':'"+d.projectId+"', 'settings': {'locale':'"+d.surveyLanguage+"', 'min_recording_time':"+d.minLength+", 'max_recording_time':"+d.maxLength+"}, 'additional_data': {"+a.additionalUrlParams+"'uid':'"+e+"', 'im_field_id':"+d.transcriptionFieldPromptId+", 'im_prompt_id':"+d.id+"}}; ",h=document.createElement("script");h.type="text/javascript",h.id="voxpopme_widget";var i=document.createTextNode(f),j=document.createTextNode(g);h.appendChild(i),h.appendChild(j),b.append(h);var k=document.createElement("script");k.type="text/javascript",k.id="voxpopme",k.src="https://capture.voxpopme.net/main.js",$("head").append(k)}}}]),angular.module("services",["sessionStorageUtil"]).factory("facebookService",function(){return{initLikeButton:function(a){FacebookLikeModule.init(a)}}}).factory("twitterService",["$window",function(a){return{initFollowButton:function(b,c){void 0===a.twttr&&(a.twttr=function(b,c,d){var e,f,g=b.getElementsByTagName(c)[0];if(!b.getElementById(d))return f=b.createElement(c),f.id=d,f.src="//platform.twitter.com/widgets.js",g.parentNode.insertBefore(f,g),a.twttr||(e={_e:[],ready:function(a){e._e.push(a)}})}(document,"script","twitter-wjs"),twttr.ready(function(a){a.events.bind("follow",b),a.events.bind("click",c),a.events.bind("loaded",function(a){a.widgets.forEach(function(a){var b=document.getElementById("cwu-twitter");if(null!==b){var c=b.getElementsByTagName("iframe");c.length>0&&(c[0].tabIndex=1)}})})}))},normalizeHandle:function(a){return a&&0!==a.indexOf("@")&&(a="@"+a),a}}}]),angular.module("sessionStorageUtil",[]).factory("sessionStorageService",function(){return{storeItem:function(a,b){this.checkSessionStorageEnabled()&&sessionStorage.setItem(a,b)},retrieveItem:function(a){if(this.checkSessionStorageEnabled())return sessionStorage.getItem(a)},clear:function(){this.checkSessionStorageEnabled()&&sessionStorage.clear()},checkSessionStorageEnabled:function(){try{return sessionStorage.getItem("bogus"),0!=navigator.cookieEnabled}catch(a){return console.warn("Session storage not enabled."),!1}}}}),$(document).ready(function(){$("a.btn-ok, #dialog-overlay, #dialog-box").click(function(){return $("#dialog-overlay, #dialog-box").hide(),!1}),$(window).resize(function(){$("#dialog-box").is(":hidden")||softPopup()})});var softPromptCount=0;angular.module("systemErrors",["errorServices"]).config(["$provide","$httpProvider","$compileProvider",function(a,b,c){b.interceptors.push(["$q","$rootScope","errorManager",function(a,b,c){return{request:function(a){return a},response:function(a){return a},responseError:function(b){if(b.status){if(c.setSystemError(b.status,b.data))return b}return a.reject(b)}}}])}]);var FacebookLikeModule=function(a){var b={options:{showFacebookButton:!1,applicationId:"",channelFileUrl:window.location.protocol+"//"+window.location.host+"/webSurvey/jslib/channelFile.html",localizedJsSdkUrl:"//connect.facebook.com/en_US/sdk.js",likeUrl:"",likeContainerId:"facebookLikeButtonContainer",likeEventPostUrl:window.location.protocol+"//"+window.location.host+"/websurvey/recommend/facebook/connect",unlikeEventPostUrl:window.location.protocol+"//"+window.location.host+"/websurvey/recommend/facebook/unlike"}};b.init=function(f){a.extend(b.options,f),b.options.showFacebookButton&&(e(),d(),c())};var c=function(){window.fbAsyncInit=function(){FB.init({appId:b.options.applicationId,version:"v2.0",channelUrl:b.options.channelFileUrl,status:!0,cookie:!0,xfbml:!0}),FB.Event.subscribe("edge.create",g),FB.Event.subscribe("edge.remove",h),FB.getLoginStatus(function(b){a("#facebookLikeButtonContainer span:first").css("width","78px")}),FB.Event.subscribe("xfbml.render",function(a){var b=document.getElementById("facebookLikeButtonContainer");if(null!==b){var c=b.getElementsByTagName("iframe");c.length>0&&(c[0].tabIndex=1)}})},function(a){var c,d="facebook-jssdk",e=a.getElementsByTagName("script")[0];a.getElementById(d)||(c=a.createElement("script"),c.id=d,c.async=!0,c.src=b.options.localizedJsSdkUrl,e.parentNode.insertBefore(c,e))}(document)},d=function(){f('<div class="fb-like" data-href="'+b.options.likeUrl+'" data-send="false" data-layout="button" data-width="450" data-show-faces="false" data-action="like"></div>')},e=function(){if(!document.getElementById("fb-root")){var a=document.createElement("div");a.id="fb-root",document.body.insertBefore(a,document.body.firstChild)}},f=function(a){var c=document.getElementById(b.options.likeContainerId);null!=c&&(c.innerHTML=a)},g=function(c){a.post(b.options.likeEventPostUrl)},h=function(c){a.post(b.options.unlikeEventPostUrl)};return b}(jQuery),textStrengthCalculator={defaultConfig:{version:"wordCount",targetStrength:30,colors:[{s:0,e:.399,c:"#c14831"},{s:.4,e:.599,c:"#d98629"},{s:.6,e:.999,c:"#edc634"},{s:1,c:"#79bd42"}],stopWords:[]},getStrengthAndColor:function(a,b){null==b?b=this.defaultConfig:(null==b.version&&(b.version=this.defaultConfig.version),null==b.targetStrength&&(b.targetStrength=this.defaultConfig.targetStrength),null==b.colors&&(b.colors=this.defaultConfig.colors),null==b.stopWords&&(b.stopWords=this.defaultConfig.stopWords));var c={strength:0,color:"#000000"};if(null!=a){var d=a.toLowerCase();switch(b.version){case"wordCount":c.strength=this.calculateStrengthWordCount(d,b)}c.color=this.getColor(c.strength,b)}else c.color=this.getColor(0,b),smartCommentClientAuditor.clear();return c},getColor:function(a,b){null==b.colors&&(b.colors=this.defaultConfig.colors);for(var c in b.colors)if(a>=b.colors[c].s&&(void 0==b.colors[c].e||a<b.colors[c].e))return b.colors[c].c;return"#000000"},calculateStrengthWordCount:function(a,b){var c=0;if(a.replace(/^\s+|\s+$/g,"").length>0){var d=a.replace(/^\s+|\s+$/g,"").split(/\s+/);if(a.match(/[\s!\.?]$/)?d[d.length-1]=d[d.length-1].replace(/[\s!\.?]$/,""):d.pop(),c=d.length,null!=b.stopWords&&b.stopWords.length>0){var e=d.filter(function(a){return-1==b.stopWords.indexOf(a)});smartCommentClientAuditor.audit(c,e),c-=.5*(c-e.length)}}return c/b.targetStrength},ws1Init:function(a,b,c,d,e,f){var g=$("#"+a),h=$(".hintComponent"),i=null,j=null,k=!1,l=null;if(c>0){hintingEngine.history={},hintingEngine.config.hintingType=c;var m=function(a){var b=new Date-j;window.setTimeout(function(){hintingEngine.logHintIfValid(a,g.val(),!1)&&(a.hint=hintingEngine.stripDefaultHintIdentifier(a.hint),$("#hintText").text(a.hint),h.addClass("hideHint-remove"),h.removeClass("hideHint"),window.setTimeout(function(){h.removeClass("hideHint-remove")},800),k=!0)},Math.max(hintingEngine.config.minShowHintTimeoutMs-b,0))};l=function(a){clearTimeout(i);var b,c=g.val().charAt(g.val().length-1),h=["."," ","!","?",",","-"];b=-1!=h.indexOf(c)?hintingEngine.config.typingTimeoutFormatterCharMs:hintingEngine.config.typingTimeoutMs,hintingEngine.canHint(a,k)?i=window.setTimeout(function(){k||hintingEngine.getHint(g.val(),d,e,m,!1,f)},b):k&&(k=!1)}}var n=function(a){j=new Date;var c=$(".nudge_progress"),d=$(".nudge_sidebar"),e=$(".nudge_arrow"),f=textStrengthCalculator.getStrengthAndColor(g.val(),b),h=80,i=f.strength*h;i>h&&(i=Math.min(h+.2*(i-h),100)),c.css({"background-color":f.color,height:i+"%"}),c.attr("dumbie",""),l&&l(f.strength),f.strength>.15&&!d.hasClass("active")?d.addClass("active"):f.strength<=.15&&d.hasClass("active")&&d.removeClass("active"),g.css("border-left","2px solid"+f.color),e.css({opacity:1,"border-right-color":f.color,bottom:i-4+"%"})};g.on("keyup",n),g.on("propertychange",n),g.trigger("keyup"),g.trigger("propertychange"),g.on("keydown",function(){clearTimeout(i)}),hintingEngine.audit("V",null,null,"strengthMeter: T, hinting:"+c,!1)}},hintingEngine={config:{typingTimeoutMs:1500,mobileTypingTimeoutMs:400,minShowHintTimeoutMs:600,mobileMinShowHintTimeoutMs:900,typingTimeoutFormatterCharMs:300,maxHints:3,serverTimeoutMs:2e3,hintingType:1},history:{},hintHistory:{},getHint:function(a,b,c,d,e){if(a&&null!=a&&null!=d){data={},data.now=JSON.parse(JSON.stringify(new Date)),data.text=a,data.lang=b,isNaN(c)?data.pearModelName=c:data.pearModelId=c,data.hintingType=hintingEngine.config.hintingType,data.serverTimeoutMs=hintingEngine.config.serverTimeoutMs,data.webhook=e&&smartCommentClientAuditor.enabled;var f=data.text.trim();void 0==hintingEngine.hintHistory[f]?(hintingEngine.hintHistory[f]=1,$("#thinkingBubbleContainer").addClass("trigger"),this.post(data,"/websurvey/2/nudge/hint",function(a){if(void 0!=a){var b=a.currentTarget;4==b.readyState&&200==b.status?(hintingEngine.hintHistory[f]=JSON.parse(b.responseText),d(JSON.parse(b.responseText))):delete hintingEngine.hintHistory[f]}},function(){delete hintingEngine.hintHistory[f],data.webhook&&console.log("Timeout while calling the server for a hint for the text:"+data.text),hintingEngine.audit("T",null,data.text,"sentTime="+data.now,e)})):d(hintingEngine.hintHistory[f])}},canHint:function(a,b){return 0==b&&(!a||a<1)&&Object.keys(this.history).length<this.config.maxHints},logHintIfValid:function(a,b,c,d){return!!this.isValidHint(a,b,d)&&(hintingEngine.history[d]?hintingEngine.history[d].push(a.hint):hintingEngine.history[d]=[a.hint],hintingEngine.audit("H",a.now,a.text,a.hint,c),!0)},isValidHint:function(a,b,c){return void 0!==a.hint&&void 0!=a.hint&&((!hintingEngine.history[c]||-1==hintingEngine.history[c].indexOf(a.hint))&&a.text==b)},isDefaultHint:function(a){return!!a&&"##"==a.substring(0,2)},stripDefaultHintIdentifier:function(a){return this.isDefaultHint(a)?a.substring(2,a.length):a},audit:function(a,b,c,d,e){toSend={},toSend.type=a,toSend.timestamp=b||JSON.parse(JSON.stringify(new Date)),toSend.triggerVal=c,toSend.detail=d;var f="/websurvey/2/nudge/audit";e&&(f="/websurvey/2/nudge/2/audit"),this.post(toSend,f,null,null)},post:function(a,b,c,d){var e;e=new XMLHttpRequest,e.open("POST",b,!0),e.onreadystatechange=c,e.setRequestHeader("Content-type","application/json"),e.setRequestHeader("Accept","application/json"),e.timeout=this.config.serverTimeoutMs,e.ontimeout=d,e.send(JSON.stringify(a))},closeHint:function(a,b){var c=$(".hintComponent"),d=$("#bubble1, #bubble2"),e=$("#hint");$("#hintContainer").addClass("closed"),c.addClass("hideHint-add"),d.addClass("hideHint"),window.setTimeout(function(){e.addClass("hideHint"),c.removeClass("hideHint-add")},1500),hintingEngine.audit(!0===a?"CA":"CM",null,b,null,!1)}},smartCommentIntervalPromise=null,globalWebHookInfo={},smartCommentClientAuditor={enabled:!1,wordCount:0,stopWordCount:0,nonStopWordCount:function(){return this.wordCount-this.stopWordCount},lastTrackedCount:0,pollingFrequency:0,audit:function(a,b){this.wordCount=a,this.stopWordCount=a-b.length,this.pollingFrequency>0&&a-this.lastTrackedCount==this.pollingFrequency&&(this.lastTrackedCount=a,this.outputWordCount(),this.analyzeComment())},clear:function(){this.wordCount=0,this.stopWordCount=0,this.lastTrackedCount=0},analyzeComment:function(){},outputWordCount:function(){smartCommentClientAuditor.enabled&&console.log("Word count:"+smartCommentClientAuditor.wordCount+"|Stop word count:"+smartCommentClientAuditor.stopWordCount+"|Non-stop word count:"+smartCommentClientAuditor.nonStopWordCount())},afterHintReturnedCallback:function(){}};Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1}),Array.prototype.filter||(Array.prototype.filter=function(a){"use strict";if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments[1],f=0;f<c;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),function(a,b,c){"use strict";"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("Fingerprint2",this,function(){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c;if(null==this)throw new TypeError("'this' is null or undefined");var d=Object(this),e=d.length>>>0;if(0===e)return-1;var f=+b||0;if(Math.abs(f)===1/0&&(f=0),f>=e)return-1;for(c=Math.max(f>=0?f:e-Math.abs(f),0);c<e;){if(c in d&&d[c]===a)return c;c++}return-1});var a=function(a){var b={swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",detectScreenOrientation:!0,sortPluginsFor:[/palemoon/i]};this.options=this.extend(a,b),this.nativeForEach=Array.prototype.forEach,this.nativeMap=Array.prototype.map};return a.prototype={extend:function(a,b){if(null==a)return b;for(var c in a)null!=a[c]&&b[c]!==a[c]&&(b[c]=a[c]);return b},log:function(a){window.console&&console.log(a)},get:function(a){var b=[];b=this.userAgentKey(b),b=this.languageKey(b),b=this.colorDepthKey(b),b=this.screenResolutionKey(b),b=this.availableScreenResolutionKey(b),b=this.timezoneOffsetKey(b),b=this.sessionStorageKey(b),b=this.localStorageKey(b),b=this.indexedDbKey(b),b=this.addBehaviorKey(b),b=this.openDatabaseKey(b),b=this.cpuClassKey(b),b=this.platformKey(b),b=this.doNotTrackKey(b),b=this.pluginsKey(b),b=this.canvasKey(b),b=this.webglKey(b),b=this.adBlockKey(b),b=this.hasLiedLanguagesKey(b),b=this.hasLiedResolutionKey(b),b=this.hasLiedOsKey(b),b=this.hasLiedBrowserKey(b),b=this.touchSupportKey(b);var c=this;this.fontsKey(b,function(b){var d=[];c.each(b,function(a){var b=a.value;void 0!==a.value.join&&(b=a.value.join(";")),console.log(b.toString()),d.push(b)});var e=c.x64hash128(d.join("~~~"),31);return a(e,b)})},userAgentKey:function(a){return this.options.excludeUserAgent||a.push({key:"user_agent",value:this.getUserAgent()}),a},getUserAgent:function(){return navigator.userAgent},languageKey:function(a){return this.options.excludeLanguage||a.push({key:"language",value:navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage}),a},colorDepthKey:function(a){return this.options.excludeColorDepth||a.push({key:"color_depth",value:screen.colorDepth}),a},screenResolutionKey:function(a){return this.options.excludeScreenResolution?a:this.getScreenResolution(a)},getScreenResolution:function(a){var b;return b=this.options.detectScreenOrientation&&screen.height>screen.width?[screen.height,screen.width]:[screen.width,screen.height,24],void 0!==b&&a.push({key:"resolution",value:b}),a},availableScreenResolutionKey:function(a){return this.options.excludeAvailableScreenResolution?a:this.getAvailableScreenResolution(a)},getAvailableScreenResolution:function(a){var b;return screen.availWidth&&screen.availHeight&&(b=this.options.detectScreenOrientation?screen.availHeight>screen.availWidth?[screen.availHeight,screen.availWidth]:[screen.availWidth,screen.availHeight]:[screen.availHeight,screen.availWidth]),void 0!==b&&a.push({key:"available_resolution",value:b}),a},timezoneOffsetKey:function(a){return this.options.excludeTimezoneOffset||a.push({key:"timezone_offset",value:(new Date).getTimezoneOffset()}),a},sessionStorageKey:function(a){return!this.options.excludeSessionStorage&&this.hasSessionStorage()&&a.push({key:"session_storage",value:1}),a},localStorageKey:function(a){return!this.options.excludeSessionStorage&&this.hasLocalStorage()&&a.push({key:"local_storage",value:1}),a},indexedDbKey:function(a){return!this.options.excludeIndexedDB&&this.hasIndexedDB()&&a.push({key:"indexed_db",value:1}),a},addBehaviorKey:function(a){return document.body&&!this.options.excludeAddBehavior&&document.body.addBehavior&&a.push({key:"add_behavior",value:1}),a},openDatabaseKey:function(a){return!this.options.excludeOpenDatabase&&window.openDatabase&&a.push({key:"open_database",value:1}),a},cpuClassKey:function(a){return this.options.excludeCpuClass||a.push({key:"cpu_class",value:this.getNavigatorCpuClass()}),a},platformKey:function(a){return this.options.excludePlatform||a.push({key:"navigator_platform",value:this.getNavigatorPlatform()}),a},doNotTrackKey:function(a){return this.options.excludeDoNotTrack||a.push({key:"do_not_track",value:this.getDoNotTrack()}),a},canvasKey:function(a){return!this.options.excludeCanvas&&this.isCanvasSupported()&&a.push({key:"canvas",value:this.getCanvasFp()}),a},webglKey:function(a){return this.options.excludeWebGL?("undefined"==typeof NODEBUG&&this.log("Skipping WebGL fingerprinting per excludeWebGL configuration option"),a):this.isWebGlSupported()?(a.push({key:"webgl",value:this.getWebglFp()}),a):("undefined"==typeof NODEBUG&&this.log("Skipping WebGL fingerprinting because it is not supported in this browser"),a)},adBlockKey:function(a){return this.options.excludeAdBlock||a.push({key:"adblock",value:this.getAdBlock()}),a},hasLiedLanguagesKey:function(a){return this.options.excludeHasLiedLanguages||a.push({key:"has_lied_languages",value:this.getHasLiedLanguages()}),a},hasLiedResolutionKey:function(a){return this.options.excludeHasLiedResolution||a.push({key:"has_lied_resolution",value:this.getHasLiedResolution()}),a},hasLiedOsKey:function(a){return this.options.excludeHasLiedOs||a.push({key:"has_lied_os",value:this.getHasLiedOs()}),a},hasLiedBrowserKey:function(a){return this.options.excludeHasLiedBrowser||a.push({key:"has_lied_browser",value:this.getHasLiedBrowser()}),a},fontsKey:function(a,b){return this.options.excludeJsFonts?this.flashFontsKey(a,b):this.jsFontsKey(a,b)},flashFontsKey:function(a,b){return this.options.excludeFlashFonts?("undefined"==typeof NODEBUG&&this.log("Skipping flash fonts detection per excludeFlashFonts configuration option"),b(a)):this.hasSwfObjectLoaded()?this.hasMinFlashInstalled()?void 0===this.options.swfPath?("undefined"==typeof NODEBUG&&this.log("To use Flash fonts detection, you must pass a valid swfPath option, skipping Flash fonts enumeration"),b(a)):void this.loadSwfAndDetectFonts(function(c){a.push({key:"swf_fonts",value:c.join(";")}),b(a)}):("undefined"==typeof NODEBUG&&this.log("Flash is not installed, skipping Flash fonts enumeration"),b(a)):("undefined"==typeof NODEBUG&&this.log("Swfobject is not detected, Flash fonts enumeration is skipped"),b(a))},jsFontsKey:function(a,b){var c=this,d=["monospace","sans-serif","serif"],e=document.getElementsByTagName("body")[0],f=document.createElement("span");f.style.position="absolute",f.style.left="-9999px",f.style.fontSize="72px",f.innerHTML="mmmmmmmmmmlli";for(var g={},h={},i=0,j=d.length;i<j;i++)f.style.fontFamily=d[i],e.appendChild(f),g[d[i]]=f.offsetWidth,h[d[i]]=f.offsetHeight,e.removeChild(f);var k=function(a){for(var b=!1,c=0,i=d.length;c<i;c++){f.style.fontFamily=a+","+d[c],e.appendChild(f);var j=f.offsetWidth!==g[d[c]]||f.offsetHeight!==h[d[c]];e.removeChild(f),b=b||j}return b},l=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Garamond","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"],m=["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"];c.options.extendedJsFonts&&(l=l.concat(m));for(var n=[],o=0,p=l.length;o<p;o++)k(l[o])&&n.push(l[o]);a.push({key:"js_fonts",value:n}),b(a)},pluginsKey:function(a){return this.options.excludePlugins||(this.isIE()?a.push({key:"ie_plugins",value:this.getIEPlugins()}):a.push({key:"regular_plugins",value:this.getRegularPlugins()})),a},getRegularPlugins:function(){for(var a=[],b=0,c=navigator.plugins.length;b<c;b++)a.push(navigator.plugins[b]);return this.pluginsShouldBeSorted()&&(a=a.sort(function(a,b){return a.name>b.name?1:a.name<b.name?-1:0})),this.map(a,function(a){var b=this.map(a,function(a){return[a.type,a.suffixes].join("~")}).join(",");return[a.name,a.description,b].join("::")},this)},getIEPlugins:function(){var a=[];if(Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window){var b=["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"];a=this.map(b,function(a){try{return new ActiveXObject(a),a}catch(a){return null}})}return navigator.plugins&&(a=a.concat(this.getRegularPlugins())),a},pluginsShouldBeSorted:function(){for(var a=!1,b=0,c=this.options.sortPluginsFor.length;b<c;b++){var d=this.options.sortPluginsFor[b];if(navigator.userAgent.match(d)){a=!0;break}}return a},touchSupportKey:function(a){return this.options.excludeTouchSupport||a.push({key:"touch_support",value:this.getTouchSupport()}),a},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(a){return!0}},hasLocalStorage:function(){try{return!!window.localStorage}catch(a){return!0}},hasIndexedDB:function(){return!!window.indexedDB},getNavigatorCpuClass:function(){return navigator.cpuClass?navigator.cpuClass:"unknown"},getNavigatorPlatform:function(){return navigator.platform?navigator.platform:"unknown"},getDoNotTrack:function(){return navigator.doNotTrack?navigator.doNotTrack:"unknown"},getTouchSupport:function(){var a=0,b=!1;void 0!==navigator.maxTouchPoints?a=navigator.maxTouchPoints:void 0!==navigator.msMaxTouchPoints&&(a=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),b=!0}catch(a){}return[a,b,"ontouchstart"in window]},getCanvasFp:function(){var a=[],b=document.createElement("canvas");b.width=2e3,b.height=200,b.style.display="inline";var c=b.getContext("2d");return c.rect(0,0,10,10),c.rect(2,2,6,6),a.push("canvas winding:"+(!1===c.isPointInPath(5,5,"evenodd")?"yes":"no")),c.textBaseline="alphabetic",c.fillStyle="#f60",c.fillRect(125,1,62,20),c.fillStyle="#069",this.options.dontUseFakeFontInCanvas?c.font="11pt Arial":c.font="11pt no-real-font-123",c.fillText("Cwm fjordbank glyphs vext quiz, ",2,15),c.fillStyle="rgba(102, 204, 0, 0.7)",c.font="18pt Arial",c.fillText("Cwm fjordbank glyphs vext quiz, ",4,45),c.globalCompositeOperation="multiply",c.fillStyle="rgb(255,0,255)",c.beginPath(),c.arc(50,50,50,0,2*Math.PI,!0),c.closePath(),c.fill(),c.fillStyle="rgb(0,255,255)",c.beginPath(),c.arc(100,50,50,0,2*Math.PI,!0),c.closePath(),c.fill(),c.fillStyle="rgb(255,255,0)",c.beginPath(),c.arc(75,100,50,0,2*Math.PI,!0),c.closePath(),c.fill(),c.fillStyle="rgb(255,0,255)",c.arc(75,75,75,0,2*Math.PI,!0),c.arc(75,75,25,0,2*Math.PI,!0),c.fill("evenodd"),a.push("canvas fp:"+b.toDataURL()),a.join("~")},getWebglFp:function(){var a,b=function(b){return a.clearColor(0,0,0,1),a.enable(a.DEPTH_TEST),a.depthFunc(a.LEQUAL),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),"["+b[0]+", "+b[1]+"]"},c=function(a){var b,c=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic");return c?(b=a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT),0===b&&(b=2),b):null};if(!(a=this.getWebglCanvas()))return null;var d=[],e="attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}",f="precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}",g=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,g);var h=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);a.bufferData(a.ARRAY_BUFFER,h,a.STATIC_DRAW),g.itemSize=3,g.numItems=3;var i=a.createProgram(),j=a.createShader(a.VERTEX_SHADER);a.shaderSource(j,e),a.compileShader(j);var k=a.createShader(a.FRAGMENT_SHADER);return a.shaderSource(k,f),a.compileShader(k),a.attachShader(i,j),a.attachShader(i,k),a.linkProgram(i),a.useProgram(i),i.vertexPosAttrib=a.getAttribLocation(i,"attrVertex"),i.offsetUniform=a.getUniformLocation(i,"uniformOffset"),a.enableVertexAttribArray(i.vertexPosArray),a.vertexAttribPointer(i.vertexPosAttrib,g.itemSize,a.FLOAT,!1,0,0),a.uniform2f(i.offsetUniform,1,1),a.drawArrays(a.TRIANGLE_STRIP,0,g.numItems),null!=a.canvas&&d.push(a.canvas.toDataURL()),d.push("extensions:"+a.getSupportedExtensions().join(";")),d.push("webgl aliased line width range:"+b(a.getParameter(a.ALIASED_LINE_WIDTH_RANGE))),d.push("webgl aliased point size range:"+b(a.getParameter(a.ALIASED_POINT_SIZE_RANGE))),d.push("webgl alpha bits:"+a.getParameter(a.ALPHA_BITS)),d.push("webgl antialiasing:"+(a.getContextAttributes().antialias?"yes":"no")),d.push("webgl blue bits:"+a.getParameter(a.BLUE_BITS)),d.push("webgl depth bits:"+a.getParameter(a.DEPTH_BITS)),d.push("webgl green bits:"+a.getParameter(a.GREEN_BITS)),d.push("webgl max anisotropy:"+c(a)),d.push("webgl max combined texture image units:"+a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),d.push("webgl max cube map texture size:"+a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE)),d.push("webgl max fragment uniform vectors:"+a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS)),d.push("webgl max render buffer size:"+a.getParameter(a.MAX_RENDERBUFFER_SIZE)),d.push("webgl max texture image units:"+a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)),d.push("webgl max texture size:"+a.getParameter(a.MAX_TEXTURE_SIZE)),d.push("webgl max varying vectors:"+a.getParameter(a.MAX_VARYING_VECTORS)),d.push("webgl max vertex attribs:"+a.getParameter(a.MAX_VERTEX_ATTRIBS)),d.push("webgl max vertex texture image units:"+a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),d.push("webgl max vertex uniform vectors:"+a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS)),d.push("webgl max viewport dims:"+b(a.getParameter(a.MAX_VIEWPORT_DIMS))),d.push("webgl red bits:"+a.getParameter(a.RED_BITS)),d.push("webgl renderer:"+a.getParameter(a.RENDERER)),d.push("webgl shading language version:"+a.getParameter(a.SHADING_LANGUAGE_VERSION)),d.push("webgl stencil bits:"+a.getParameter(a.STENCIL_BITS)),d.push("webgl vendor:"+a.getParameter(a.VENDOR)),d.push("webgl version:"+a.getParameter(a.VERSION)),a.getShaderPrecisionFormat?(d.push("webgl vertex shader high float precision:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision),d.push("webgl vertex shader high float precision rangeMin:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).rangeMin),d.push("webgl vertex shader high float precision rangeMax:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).rangeMax),d.push("webgl vertex shader medium float precision:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision),d.push("webgl vertex shader medium float precision rangeMin:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).rangeMin),d.push("webgl vertex shader medium float precision rangeMax:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).rangeMax),d.push("webgl vertex shader low float precision:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.LOW_FLOAT).precision),d.push("webgl vertex shader low float precision rangeMin:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.LOW_FLOAT).rangeMin),d.push("webgl vertex shader low float precision rangeMax:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.LOW_FLOAT).rangeMax),d.push("webgl fragment shader high float precision:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision),d.push("webgl fragment shader high float precision rangeMin:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).rangeMin),d.push("webgl fragment shader high float precision rangeMax:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).rangeMax),d.push("webgl fragment shader medium float precision:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision),d.push("webgl fragment shader medium float precision rangeMin:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).rangeMin),d.push("webgl fragment shader medium float precision rangeMax:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).rangeMax),d.push("webgl fragment shader low float precision:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.LOW_FLOAT).precision),d.push("webgl fragment shader low float precision rangeMin:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.LOW_FLOAT).rangeMin),d.push("webgl fragment shader low float precision rangeMax:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.LOW_FLOAT).rangeMax),d.push("webgl vertex shader high int precision:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_INT).precision),d.push("webgl vertex shader high int precision rangeMin:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_INT).rangeMin),d.push("webgl vertex shader high int precision rangeMax:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_INT).rangeMax),d.push("webgl vertex shader medium int precision:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_INT).precision),d.push("webgl vertex shader medium int precision rangeMin:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_INT).rangeMin),d.push("webgl vertex shader medium int precision rangeMax:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_INT).rangeMax),d.push("webgl vertex shader low int precision:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.LOW_INT).precision),d.push("webgl vertex shader low int precision rangeMin:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.LOW_INT).rangeMin),d.push("webgl vertex shader low int precision rangeMax:"+a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.LOW_INT).rangeMax),d.push("webgl fragment shader high int precision:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_INT).precision),d.push("webgl fragment shader high int precision rangeMin:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_INT).rangeMin),d.push("webgl fragment shader high int precision rangeMax:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_INT).rangeMax),d.push("webgl fragment shader medium int precision:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_INT).precision),d.push("webgl fragment shader medium int precision rangeMin:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_INT).rangeMin),d.push("webgl fragment shader medium int precision rangeMax:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_INT).rangeMax),d.push("webgl fragment shader low int precision:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.LOW_INT).precision),d.push("webgl fragment shader low int precision rangeMin:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.LOW_INT).rangeMin),d.push("webgl fragment shader low int precision rangeMax:"+a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.LOW_INT).rangeMax),d.join("~")):("undefined"==typeof NODEBUG&&this.log("WebGL fingerprinting is incomplete, because your browser does not support getShaderPrecisionFormat"),d.join("~"))},getAdBlock:function(){var a=document.createElement("div");a.setAttribute("id","ads");try{return document.body.appendChild(a),!document.getElementById("ads")}catch(a){return!1}},getHasLiedLanguages:function(){if(void 0!==navigator.languages)try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch(a){return!0}return!1},getHasLiedResolution:function(){return screen.width<screen.availWidth||screen.height<screen.availHeight},getHasLiedOs:function(){var a,b=navigator.userAgent.toLowerCase(),c=navigator.oscpu,d=navigator.platform.toLowerCase();a=b.indexOf("windows phone")>=0?"Windows Phone":b.indexOf("win")>=0?"Windows":b.indexOf("android")>=0?"Android":b.indexOf("linux")>=0?"Linux":b.indexOf("iphone")>=0||b.indexOf("ipad")>=0?"iOS":b.indexOf("mac")>=0?"Mac":"Other";if(("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&"Windows Phone"!==a&&"Android"!==a&&"iOS"!==a&&"Other"!==a)return!0;if(void 0!==c){if(c=c.toLowerCase(),c.indexOf("win")>=0&&"Windows"!==a&&"Windows Phone"!==a)return!0;if(c.indexOf("linux")>=0&&"Linux"!==a&&"Android"!==a)return!0;if(c.indexOf("mac")>=0&&"Mac"!==a&&"iOS"!==a)return!0;if(0===c.indexOf("win")&&0===c.indexOf("linux")&&c.indexOf("mac")>=0&&"other"!==a)return!0}return d.indexOf("win")>=0&&"Windows"!==a&&"Windows Phone"!==a||((d.indexOf("linux")>=0||d.indexOf("android")>=0||d.indexOf("pike")>=0)&&"Linux"!==a&&"Android"!==a||((d.indexOf("mac")>=0||d.indexOf("ipad")>=0||d.indexOf("ipod")>=0||d.indexOf("iphone")>=0)&&"Mac"!==a&&"iOS"!==a||(0===d.indexOf("win")&&0===d.indexOf("linux")&&d.indexOf("mac")>=0&&"other"!==a||void 0===navigator.plugins&&"Windows"!==a&&"Windows Phone"!==a)))},getHasLiedBrowser:function(){var a,b=navigator.userAgent.toLowerCase(),c=navigator.productSub;if(("Chrome"===(a=b.indexOf("firefox")>=0?"Firefox":b.indexOf("opera")>=0||b.indexOf("opr")>=0?"Opera":b.indexOf("chrome")>=0?"Chrome":b.indexOf("safari")>=0?"Safari":b.indexOf("trident")>=0?"Internet Explorer":"Other")||"Safari"===a||"Opera"===a)&&"20030107"!==c)return!0;var d=eval.toString().length;if(37===d&&"Safari"!==a&&"Firefox"!==a&&"Other"!==a)return!0;if(39===d&&"Internet Explorer"!==a&&"Other"!==a)return!0;if(33===d&&"Chrome"!==a&&"Opera"!==a&&"Other"!==a)return!0;var e;try{throw"a"}catch(a){try{a.toSource(),e=!0}catch(a){e=!1}}return!(!e||"Firefox"===a||"Other"===a)},isCanvasSupported:function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))},isWebGlSupported:function(){if(!this.isCanvasSupported())return!1;var a,b=document.createElement("canvas");try{a=b.getContext&&(b.getContext("webgl")||b.getContext("experimental-webgl"))}catch(b){a=!1}return!!window.WebGLRenderingContext&&!!a},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},hasSwfObjectLoaded:function(){return void 0!==window.swfobject},hasMinFlashInstalled:function(){return swfobject.hasFlashPlayerVersion("9.0.0")},addFlashDivNode:function(){var a=document.createElement("div");a.setAttribute("id",this.options.swfContainerId),document.body.appendChild(a)},loadSwfAndDetectFonts:function(a){var b="___fp_swf_loaded";window[b]=function(b){a(b)};var c=this.options.swfContainerId;this.addFlashDivNode();var d={onReady:b},e={allowScriptAccess:"always",menu:"false"};swfobject.embedSWF(this.options.swfPath,c,"1","1","9.0.0",!1,d,e,{})},getWebglCanvas:function(){var a=document.createElement("canvas"),b=null;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(a){}return b||(b=null),b},each:function(a,b,c){if(null!==a)if(this.nativeForEach&&a.forEach===this.nativeForEach)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a)==={})return}else for(var f in a)if(a.hasOwnProperty(f)&&b.call(c,a[f],f,a)==={})return},map:function(a,b,c){var d=[];return null==a?d:this.nativeMap&&a.map===this.nativeMap?a.map(b,c):(this.each(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)},x64Add:function(a,b){a=[a[0]>>>16,65535&a[0],a[1]>>>16,65535&a[1]],b=[b[0]>>>16,65535&b[0],b[1]>>>16,65535&b[1]];var c=[0,0,0,0];return c[3]+=a[3]+b[3],c[2]+=c[3]>>>16,c[3]&=65535,c[2]+=a[2]+b[2],c[1]+=c[2]>>>16,c[2]&=65535,c[1]+=a[1]+b[1],c[0]+=c[1]>>>16,c[1]&=65535,c[0]+=a[0]+b[0],c[0]&=65535,[c[0]<<16|c[1],c[2]<<16|c[3]]},x64Multiply:function(a,b){a=[a[0]>>>16,65535&a[0],a[1]>>>16,65535&a[1]],b=[b[0]>>>16,65535&b[0],b[1]>>>16,65535&b[1]];var c=[0,0,0,0];return c[3]+=a[3]*b[3],c[2]+=c[3]>>>16,c[3]&=65535,c[2]+=a[2]*b[3],c[1]+=c[2]>>>16,c[2]&=65535,c[2]+=a[3]*b[2],c[1]+=c[2]>>>16,c[2]&=65535,c[1]+=a[1]*b[3],c[0]+=c[1]>>>16,c[1]&=65535,c[1]+=a[2]*b[2],c[0]+=c[1]>>>16,c[1]&=65535,c[1]+=a[3]*b[1],c[0]+=c[1]>>>16,c[1]&=65535,c[0]+=a[0]*b[3]+a[1]*b[2]+a[2]*b[1]+a[3]*b[0],c[0]&=65535,[c[0]<<16|c[1],c[2]<<16|c[3]]},x64Rotl:function(a,b){return b%=64,32===b?[a[1],a[0]]:b<32?[a[0]<<b|a[1]>>>32-b,a[1]<<b|a[0]>>>32-b]:(b-=32,[a[1]<<b|a[0]>>>32-b,a[0]<<b|a[1]>>>32-b])},x64LeftShift:function(a,b){return b%=64,0===b?a:b<32?[a[0]<<b|a[1]>>>32-b,a[1]<<b]:[a[1]<<b-32,0]},x64Xor:function(a,b){return[a[0]^b[0],a[1]^b[1]]},x64Fmix:function(a){return a=this.x64Xor(a,[0,a[0]>>>1]),a=this.x64Multiply(a,[4283543511,3981806797]),a=this.x64Xor(a,[0,a[0]>>>1]),a=this.x64Multiply(a,[3301882366,444984403]),a=this.x64Xor(a,[0,a[0]>>>1])},x64hash128:function(a,b){a=a||"",b=b||0;for(var c=a.length%16,d=a.length-c,e=[0,b],f=[0,b],g=[0,0],h=[0,0],i=[2277735313,289559509],j=[1291169091,658871167],k=0;k<d;k+=16)g=[255&a.charCodeAt(k+4)|(255&a.charCodeAt(k+5))<<8|(255&a.charCodeAt(k+6))<<16|(255&a.charCodeAt(k+7))<<24,255&a.charCodeAt(k)|(255&a.charCodeAt(k+1))<<8|(255&a.charCodeAt(k+2))<<16|(255&a.charCodeAt(k+3))<<24],h=[255&a.charCodeAt(k+12)|(255&a.charCodeAt(k+13))<<8|(255&a.charCodeAt(k+14))<<16|(255&a.charCodeAt(k+15))<<24,255&a.charCodeAt(k+8)|(255&a.charCodeAt(k+9))<<8|(255&a.charCodeAt(k+10))<<16|(255&a.charCodeAt(k+11))<<24],g=this.x64Multiply(g,i),g=this.x64Rotl(g,31),g=this.x64Multiply(g,j),e=this.x64Xor(e,g),e=this.x64Rotl(e,27),e=this.x64Add(e,f),e=this.x64Add(this.x64Multiply(e,[0,5]),[0,1390208809]),h=this.x64Multiply(h,j),h=this.x64Rotl(h,33),h=this.x64Multiply(h,i),f=this.x64Xor(f,h),f=this.x64Rotl(f,31),f=this.x64Add(f,e),f=this.x64Add(this.x64Multiply(f,[0,5]),[0,944331445]);switch(g=[0,0],h=[0,0],c){case 15:h=this.x64Xor(h,this.x64LeftShift([0,a.charCodeAt(k+14)],48));case 14:h=this.x64Xor(h,this.x64LeftShift([0,a.charCodeAt(k+13)],40));case 13:h=this.x64Xor(h,this.x64LeftShift([0,a.charCodeAt(k+12)],32));case 12:h=this.x64Xor(h,this.x64LeftShift([0,a.charCodeAt(k+11)],24));case 11:h=this.x64Xor(h,this.x64LeftShift([0,a.charCodeAt(k+10)],16));case 10:h=this.x64Xor(h,this.x64LeftShift([0,a.charCodeAt(k+9)],8));case 9:h=this.x64Xor(h,[0,a.charCodeAt(k+8)]),h=this.x64Multiply(h,j),h=this.x64Rotl(h,33),h=this.x64Multiply(h,i),f=this.x64Xor(f,h);case 8:g=this.x64Xor(g,this.x64LeftShift([0,a.charCodeAt(k+7)],56));case 7:g=this.x64Xor(g,this.x64LeftShift([0,a.charCodeAt(k+6)],48));case 6:g=this.x64Xor(g,this.x64LeftShift([0,a.charCodeAt(k+5)],40));case 5:g=this.x64Xor(g,this.x64LeftShift([0,a.charCodeAt(k+4)],32));case 4:g=this.x64Xor(g,this.x64LeftShift([0,a.charCodeAt(k+3)],24));case 3:g=this.x64Xor(g,this.x64LeftShift([0,a.charCodeAt(k+2)],16));case 2:g=this.x64Xor(g,this.x64LeftShift([0,a.charCodeAt(k+1)],8));case 1:g=this.x64Xor(g,[0,a.charCodeAt(k)]),g=this.x64Multiply(g,i),g=this.x64Rotl(g,31),g=this.x64Multiply(g,j),e=this.x64Xor(e,g)}return e=this.x64Xor(e,[0,a.length]),f=this.x64Xor(f,[0,a.length]),e=this.x64Add(e,f),f=this.x64Add(f,e),e=this.x64Fmix(e),f=this.x64Fmix(f),e=this.x64Add(e,f),f=this.x64Add(f,e),("00000000"+(e[0]>>>0).toString(16)).slice(-8)+("00000000"+(e[1]>>>0).toString(16)).slice(-8)+("00000000"+(f[0]>>>0).toString(16)).slice(-8)+("00000000"+(f[1]>>>0).toString(16)).slice(-8)}},a.VERSION="1.1.2",a});var pageAutoAdvance={hideNextPageBackButton:!1,triggerAutoAdvance:!1,verify:function(a){for(var b=0,c=0,d=0;d<a.length;d++)"GENERIC"!==a[d].type&&(c=d,b++);return 1==b&&(!!a[c].autoAdvance&&(pageAutoAdvance.triggerAutoAdvance=!0,pageAutoAdvance.hideNextPageBackButton=!0,!0))}},autoAdvanceCallback={triggerPageAutoAdvance:function(){setTimeout(function(){if(pageAutoAdvance.triggerAutoAdvance){var b=$("*[id^=prompt]").find("input");for(a=0;a<b.length;a++)$(b[a]).click(function(){pageAutoAdvance.triggerAutoAdvance=!1,$("#nextPageLink").mousedown()})}},10)}};$(window).ready(function(){try{submitDeviceType(submitDeviceType(initiateScanAndDetectDevice()))}catch(a){console.log("error occurred while detecting device: "+a.message)}});var MobileEsp={initCompleted:!1,isIphone:!1,isAndroidPhone:!1,isTierTablet:!1,isTierIphone:!1,isTierRichCss:!1,isTierGenericMobile:!1,engineWebKit:"webkit",deviceIphone:"iphone",deviceIpod:"ipod",deviceIpad:"ipad",deviceMacPpc:"macintosh",deviceMacIntel:"MacIntel",deviceAndroid:"android",deviceGoogleTV:"googletv",deviceXoom:"xoom",deviceHtcFlyer:"htc_flyer",deviceSamsungPhoneRegex:".*sm-g.*|.*sm-n.*",deviceSamsungPhone:["SCL23","SC-04F","SM-9008V","SC-04F"],deviceWinPhone7:"windows phone os 7",deviceWinMob:"windows ce",deviceWindows:"windows",deviceIeMob:"iemobile",devicePpc:"ppc",enginePie:"wm5 pie",deviceBB:"blackberry",vndRIM:"vnd.rim",deviceBBStorm:"blackberry95",deviceBBBold:"blackberry97",deviceBBBoldTouch:"blackberry 99",deviceBBTour:"blackberry96",deviceBBCurve:"blackberry89",deviceBBCurveTouch:"blackberry 938",deviceBBTorch:"blackberry 98",deviceBBPlaybook:"playbook",deviceSymbian:"symbian",deviceS60:"series60",deviceS70:"series70",deviceS80:"series80",deviceS90:"series90",devicePalm:"palm",deviceWebOS:"webos",deviceWebOShp:"hpwos",deviceNuvifone:"nuvifone",deviceKindle:"kindle",engineSilk:"silk-accelerated",engineBlazer:"blazer",engineXiino:"xiino",vndwap:"vnd.wap",wml:"wml",deviceTablet:"tablet",deviceBrew:"brew",deviceDanger:"danger",deviceHiptop:"hiptop",devicePlaystation:"playstation",devicePlaystationVita:"vita",deviceNintendoDs:"nitro",deviceNintendo:"nintendo",deviceWii:"wii",deviceXbox:"xbox",deviceArchos:"archos",engineOpera:"opera",engineNetfront:"netfront",engineOpenWeb:"openweb",engineUpBrowser:"up.browser",deviceMidp:"midp",uplink:"up.link",engineTelecaQ:"teleca q",devicePda:"pda",mini:"mini",mobile:"mobile",mobi:"mobi",maemo:"maemo",linux:"linux",qtembedded:"qt embedded",mylocom2:"com2",manuSonyEricsson:"sonyericsson",manuericsson:"ericsson",manuSamsung1:"sec-sgh",manuSony:"sony",manuHtc:"htc",svcDocomo:"docomo",svcKddi:"kddi",svcVodafone:"vodafone",disUpdate:"update",uagent:"",httpaccept:"",InitDeviceScan:function(){this.initCompleted=!1,this.ReadHttpAccept()&&(this.httpaccept=this.ReadHttpAccept()),navigator&&navigator.userAgent&&(this.uagent=navigator.userAgent.toLowerCase()),this.isIphone=this.DetectIphoneOrIpod(),this.isAndroidPhone=this.DetectAndroidPhone(),this.isTierTablet=this.DetectTierTablet(),this.isTierIphone=this.DetectTierIphone(),this.isTierRichCss=this.DetectTierRichCss(),this.isTierGenericMobile=this.DetectTierOtherPhones(),this.initCompleted=!0},ReadHttpAccept:function(){var a=new XMLHttpRequest;return a.open("GET",document.location,!1),a.send(null),a.getAllResponseHeaders().toLowerCase()},DetectIphone:function(){return this.initCompleted||this.isIphone?this.isIphone:this.uagent.search(this.deviceIphone)>-1&&(!this.DetectIpad()&&!this.DetectIpod())},DetectIpod:function(){return this.uagent.search(this.deviceIpod)>-1},DetectIphoneOrIpod:function(){return this.uagent.search(this.deviceIphone)>-1||this.uagent.search(this.deviceIpod)>-1},DetectIpad:function(){return!!(this.uagent.search(this.deviceIpad)>-1&&this.DetectWebkit())||!(!navigator||!(/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform===this.deviceMacIntel&&navigator.maxTouchPoints>1))},DetectIos:function(){return!(!this.DetectIphoneOrIpod()&&!this.DetectIpad())},DetectAndroid:function(){return!!(this.uagent.search(this.deviceAndroid)>-1||this.DetectGoogleTV())||this.uagent.search(this.deviceHtcFlyer)>-1},DetectAndroidPhone:function(){return this.initCompleted||this.isAndroidPhone?this.isAndroidPhone:!!this.DetectAndroid()&&(this.uagent.search(this.mobile)>-1||(!!this.DetectOperaMobile()||this.uagent.search(this.deviceHtcFlyer)>-1))},DetectAndroidTablet:function(){return!!this.DetectAndroid()&&(!this.DetectOperaMobile()&&(!(this.uagent.search(this.deviceHtcFlyer)>-1)&&!(this.uagent.search(this.mobile)>-1)))},DetectAndroidWebKit:function(){return!(!this.DetectAndroid()||!this.DetectWebkit())},DetectGoogleTV:function(){return this.uagent.search(this.deviceGoogleTV)>-1},DetectWebkit:function(){return this.uagent.search(this.engineWebKit)>-1},DetectWindowsPhone7:function(){return this.uagent.search(this.deviceWinPhone7)>-1},DetectWindowsMobile:function(){return!!this.DetectWindowsPhone7()||(this.uagent.search(this.deviceWinMob)>-1||this.uagent.search(this.deviceIeMob)>-1||this.uagent.search(this.enginePie)>-1||(this.uagent.search(this.manuHtc)>-1&&this.uagent.search(this.deviceWindows)>-1||(!!(this.DetectWapWml()&&this.uagent.search(this.deviceWindows)>-1)||this.uagent.search(this.devicePpc)>-1&&!(this.uagent.search(this.deviceMacPpc)>-1))))},DetectBlackBerry:function(){return this.uagent.search(this.deviceBB)>-1||this.httpaccept.search(this.vndRIM)>-1},DetectBlackBerry10Phone:function(){return this.uagent.search(this.deviceBB10)>-1&&this.uagent.search(this.mobile)>-1},DetectBlackBerryTablet:function(){return this.uagent.search(this.deviceBBPlaybook)>-1},DetectBlackBerryWebKit:function(){return!!(this.DetectBlackBerry()&&this.uagent.search(this.engineWebKit)>-1)},DetectBlackBerryTouch:function(){return!(!this.DetectBlackBerry()||!(this.uagent.search(this.deviceBBStorm)>-1||this.uagent.search(this.deviceBBTorch)>-1||this.uagent.search(this.deviceBBBoldTouch)>-1||this.uagent.search(this.deviceBBCurveTouch)>-1))},DetectBlackBerryHigh:function(){return!this.DetectBlackBerryWebKit()&&!(!this.DetectBlackBerry()||!(this.DetectBlackBerryTouch()||this.uagent.search(this.deviceBBBold)>-1||this.uagent.search(this.deviceBBTour)>-1||this.uagent.search(this.deviceBBCurve)>-1))},DetectBlackBerryLow:function(){return!!this.DetectBlackBerry()&&(!this.DetectBlackBerryHigh()&&!this.DetectBlackBerryWebKit())},DetectS60OssBrowser:function(){return!!this.DetectWebkit()&&(this.uagent.search(this.deviceS60)>-1||this.uagent.search(this.deviceSymbian)>-1)},DetectSymbianOS:function(){return this.uagent.search(this.deviceSymbian)>-1||this.uagent.search(this.deviceS60)>-1||this.uagent.search(this.deviceS70)>-1||this.uagent.search(this.deviceS80)>-1||this.uagent.search(this.deviceS90)>-1},DetectPalmOS:function(){return!this.DetectPalmWebOS()&&(this.uagent.search(this.devicePalm)>-1||this.uagent.search(this.engineBlazer)>-1||this.uagent.search(this.engineXiino)>-1)},DetectPalmWebOS:function(){return this.uagent.search(this.deviceWebOS)>-1},DetectWebOSTablet:function(){return this.uagent.search(this.deviceWebOShp)>-1&&this.uagent.search(this.deviceTablet)>-1},DetectOperaMobile:function(){return this.uagent.search(this.engineOpera)>-1&&(this.uagent.search(this.mini)>-1||this.uagent.search(this.mobi)>-1)},DetectOperaAndroidPhone:function(){return this.userAgent.search(this.engineOpera)>-1&&this.userAgent.search(this.deviceAndroid)>-1&&this.userAgent.search(this.mobi)>-1},DetectOperaAndroidTablet:function(){return this.userAgent.search(this.engineOpera)>-1&&this.userAgent.search(this.deviceAndroid)>-1&&this.userAgent.search(this.deviceTablet)>-1},DetectKindle:function(){return this.uagent.search(this.deviceKindle)>-1&&!this.DetectAndroid()},DetectAmazonSilk:function(){return this.uagent.search(this.engineSilk)>-1},DetectGarminNuvifone:function(){return this.uagent.search(this.deviceNuvifone)>-1},DetectBada:function(){return this.uagent.search(this.deviceBada)>-1},DetectTizen:function(){return this.uagent.search(this.deviceTizen)>-1&&this.uagent.search(this.mobile)>-1},DetectTizenTV:function(){return this.uagent.search(this.deviceTizen)>-1&&this.uagent.search(this.smartTV1)>-1},DetectMeego:function(){return this.uagent.search(this.deviceMeego)>-1},DetectMeegoPhone:function(){return this.uagent.search(this.deviceMeego)>-1&&this.uagent.search(this.mobi)>-1},DetectFirefoxOS:function(){return!(!this.DetectFirefoxOSPhone()&&!this.DetectFirefoxOSTablet())},DetectFirefoxOSPhone:function(){return!(this.DetectIos()||this.DetectAndroid()||this.DetectSailfish())&&(this.uagent.search(this.engineFirefox)>-1&&this.uagent.search(this.mobile)>-1)},DetectFirefoxOSTablet:function(){return!(this.DetectIos()||this.DetectAndroid()||this.DetectSailfish())&&(this.uagent.search(this.engineFirefox)>-1&&this.uagent.search(this.deviceTablet)>-1)},DetectSailfish:function(){return this.uagent.search(this.deviceSailfish)>-1},DetectSailfishPhone:function(){return!!(this.DetectSailfish()&&this.uagent.search(this.mobile)>-1)},DetectUbuntu:function(){return!(!this.DetectUbuntuPhone()&&!this.DetectUbuntuTablet())},DetectUbuntuPhone:function(){return this.uagent.search(this.deviceUbuntu)>-1&&this.uagent.search(this.mobile)>-1},DetectUbuntuTablet:function(){return this.uagent.search(this.deviceUbuntu)>-1&&this.uagent.search(this.deviceTablet)>-1},DetectDangerHiptop:function(){return this.uagent.search(this.deviceDanger)>-1||this.uagent.search(this.deviceHiptop)>-1},DetectSonyMylo:function(){return this.uagent.search(this.manuSony)>-1&&(this.uagent.search(this.qtembedded)>-1||this.uagent.search(this.mylocom2)>-1)},DetectMaemoTablet:function(){return this.uagent.search(this.maemo)>-1||this.uagent.search(this.linux)>-1&&this.uagent.search(this.deviceTablet)>-1&&!this.DetectWebOSTablet()&&!this.DetectAndroid()},DetectArchos:function(){return this.uagent.search(this.deviceArchos)>-1},DetectGameConsole:function(){return!!(this.DetectSonyPlaystation()||this.DetectNintendo()||this.DetectXbox())},DetectSonyPlaystation:function(){return this.uagent.search(this.devicePlaystation)>-1},DetectGamingHandheld:function(){return this.uagent.search(this.devicePlaystation)>-1&&this.uagent.search(this.devicePlaystationVita)>-1},DetectNintendo:function(){return this.uagent.search(this.deviceNintendo)>-1||this.uagent.search(this.deviceWii)>-1||this.uagent.search(this.deviceNintendoDs)>-1},DetectXbox:function(){return this.uagent.search(this.deviceXbox)>-1},DetectBrewDevice:function(){return this.uagent.search(this.deviceBrew)>-1},DetectSmartphone:function(){return!!(this.DetectTierIphone()||this.DetectS60OssBrowser()||this.DetectSymbianOS()||this.DetectWindowsMobile()||this.DetectBlackBerry()||this.DetectMeegoPhone()||this.DetectPalmOS())},DetectMobileQuick:function(){return!!this.DetectTierTablet()||(!!this.DetectSmartphone()||(!!(this.DetectWapWml()||this.DetectBrewDevice()||this.DetectOperaMobile())||(this.uagent.search(this.engineNetfront)>-1||this.uagent.search(this.engineUpBrowser)>-1||this.uagent.search(this.engineOpenWeb)>-1||(!!(this.DetectDangerHiptop()||this.DetectMidpCapable()||this.DetectMaemoTablet()||this.DetectArchos())||(this.uagent.search(this.devicePda)>-1&&this.uagent.search(this.disUpdate)<0||(this.uagent.search(this.mobile)>-1||!(!this.DetectKindle()&&!this.DetectAmazonSilk())))))))},DetectWapWml:function(){return this.httpaccept.search(this.vndwap)>-1||this.httpaccept.search(this.wml)>-1},DetectMidpCapable:function(){return-1!=this.uagent.search(this.deviceMidp)||-1!=this.httpaccept.search(this.deviceMidp)},DetectMobileLong:function(){return!!(this.DetectMobileQuick()||this.DetectGameConsole()||this.DetectSonyMylo())||(this.uagent.search(this.uplink)>-1||(this.uagent.search(this.manuSonyEricsson)>-1||(this.uagent.search(this.manuericsson)>-1||(this.uagent.search(this.svcDocomo)>-1||(this.uagent.search(this.svcKddi)>-1||this.uagent.search(this.svcVodafone)>-1)))))},DetectTierTablet:function(){return this.initCompleted||this.isTierTablet?this.isTierTablet:!!(this.DetectIpad()||this.DetectAndroidTablet()||this.DetectBlackBerryTablet()||this.DetectWebOSTablet())},DetectTierIphone:function(){return this.initCompleted||this.isTierIphone?this.isTierIphone:!!(this.DetectIphoneOrIpod()||this.DetectAndroidPhone()||this.DetectWindowsPhone7()||this.DetectPalmWebOS()||this.DetectGarminNuvifone())||!(!this.DetectBlackBerryWebKit()||!this.DetectBlackBerryTouch())},DetectTierRichCss:function(){var a=!1;return this.DetectMobileQuick()&&(this.DetectTierIphone()||this.DetectKindle()||(this.DetectWebkit()||this.DetectS60OssBrowser()||this.DetectBlackBerryHigh()||this.DetectWindowsMobile()||this.uagent.search(this.engineTelecaQ)>-1)&&(a=!0)),a},DetectAppleNonMobile:function(){return!this.DetectIos()&&(this.uagent.search("mac")>-1||this.uagent.search("os x")>-1)},DetectLinuxNonMobile:function(){return!this.DetectMobileLong()&&(this.uagent.search("linux")>-1||this.uagent.search("x11")>-1)},DetectWindowsNonMobile:function(){return this.uagent.search(this.deviceWindows)>-1&&!this.DetectWindowsMobile()},DetectTierOtherPhones:function(){return this.initCompleted||this.isTierGenericMobile?this.isTierGenericMobile:!this.DetectTierIphone()&&!this.DetectTierRichCss()&&!!this.DetectMobileLong()}},initFingerprint=function(){document.getElementById("screenResolution").value=screen.width+"x"+screen.height+"x"+screen.colorDepth,document.getElementById("timezone").value=(new Date).getTimezoneOffset(),document.getElementById("browserPlugins").value=identify_plugins(),document.getElementById("systemFonts").value=get_fonts(),set_dom_storage(),document.getElementById("supercookies").value=test_dom_storage()+test_ie_userdata(),document.getElementById("fingerprintComplete")&&(document.getElementById("fingerprintComplete").value="true")},fonts=new Array("Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andale Mono","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Bitstream Vera Sans Mono","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Book Antiqua","Bookman Old Style","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Calibri","Californian FB","Calisto MT","Calligrapher","Cambria","Cambria Math","Candara","CaslonOpnface BT","Castellar","Centaur","Century","Century Gothic","Century Schoolbook","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Comic Sans","Comic Sans MS","Consolas","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Courier","Courier New","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","Devanagari Sangam MN","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","Estrangelo Edessa","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","Franklin Gothic","Franklin Gothic Book","Franklin Gothic Demi","Franklin Gothic Demi Cond","Franklin Gothic Heavy","Franklin Gothic Medium","Franklin Gothic Medium Cond","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Garamond","Gautami","Geeza Pro","Geneva","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","Georgia","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Helvetica","Helvetica Neue","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Impact","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Sans Serif","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Monaco","Mongolian Baiti","MONO","Monotype Corsiva","MoolBoran","Mrs Eaves","MS Gothic","MS LineDraw","MS Mincho","MS Outlook","MS PGothic","MS PMincho","MS Reference Sans Serif","MS Reference Specialty","MS Sans Serif","MS Serif","MS UI Gothic","MT Extra","MUSEO","MV Boli","MYRIAD","MYRIAD PRO","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Palatino","Palatino Linotype","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Symbol","Synchro LET","System","Tahoma","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Times","Times New Roman","Times New Roman PS","Traditional Arabic","Trajan","TRAJAN PRO","Trebuchet MS","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Verdana","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Webdings","Westminster","WHITNEY","Wide Latin","Wingdings","Wingdings 2","Wingdings 3","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF");if(!PluginDetect)var PluginDetect={getNum:function(a,b){if(!this.num(a))return null;var c;return c=void 0===b?/[\d][\d\.\_,-]*/.exec(a):new RegExp(b).exec(a),c?c[0].replace(/[\.\_-]/g,","):null},hasMimeType:function(a){if(PluginDetect.isIE)return null;var b,c,d,e=a.constructor==String?[a]:a;for(d=0;d<e.length;d++)if((b=navigator.mimeTypes[e[d]])&&b.enabledPlugin&&(c=b.enabledPlugin,c.name||c.description))return b;return null},findNavPlugin:function(a,b){var c,d=a.constructor==String?a:a.join(".*"),e=!1===b?"":"\\d",f=new RegExp(d+".*"+e+"|"+e+".*"+d,"i"),g=navigator.plugins;for(c=0;c<g.length;c++)if(f.test(g[c].description)||f.test(g[c].name))return g[c];return null},AXO:window.ActiveXObject,getAXO:function(a,b){var c=null,d=!1;try{c=new this.AXO(a),d=!0}catch(a){}return void 0!==b?(delete c,d):c},num:function(a){return"string"==typeof a&&/\d/.test(a)},compareNums:function(a,b){var c,d,e,f=this,g=window.parseInt;if(!f.num(a)||!f.num(b))return 0;if(f.plugin&&f.plugin.compareNums)return f.plugin.compareNums(a,b);for(c=a.split(","),d=b.split(","),e=0;e<Math.min(c.length,d.length);e++){if(g(c[e],10)>g(d[e],10))return 1;if(g(c[e],10)<g(d[e],10))return-1}return 0},formatNum:function(a){if(!this.num(a))return null;var b,c=a.replace(/\s/g,"").replace(/[\.\_]/g,",").split(",").concat(["0","0","0","0"]);for(b=0;b<4;b++)/^(0+)(.+)$/.test(c[b])&&(c[b]=RegExp.$2);return/\d/.test(c[0])||(c[0]="0"),c[0]+","+c[1]+","+c[2]+","+c[3]},initScript:function(){var a=this,b=navigator.userAgent;if(a.isIE=!1,a.IEver=a.isIE&&/MSIE\s*(\d\.?\d*)/i.exec(b)?parseFloat(RegExp.$1,10):-1,a.ActiveXEnabled=!1,a.isIE){var c,d=["Msxml2.XMLHTTP","Msxml2.DOMDocument","Microsoft.XMLDOM","ShockwaveFlash.ShockwaveFlash","TDCCtl.TDCCtl","Shell.UIHelper","Scripting.Dictionary","wmplayer.ocx"];for(c=0;c<d.length;c++)if(a.getAXO(d[c],1)){a.ActiveXEnabled=!0;break}a.head=void 0!==document.getElementsByTagName?document.getElementsByTagName("head")[0]:null}a.isGecko=!(a.isIE||"string"!=typeof navigator.product||!/Gecko/i.test(navigator.product)||!/Gecko\s*\/\s*\d/i.test(b)),a.GeckoRV=a.isGecko?a.formatNum(/rv\s*\:\s*([\.\,\d]+)/i.test(b)?RegExp.$1:"0.9"):null,a.isSafari=!(a.isIE||!/Safari\s*\/\s*\d/i.test(b)),a.isChrome=!!/Chrome\s*\/\s*\d/i.test(b),a.onWindowLoaded(0)},init:function(a,b){if("string"!=typeof a)return-3;a=a.toLowerCase().replace(/\s/g,"");var c,d=this;return void 0===d[a]?-3:(c=d[a],d.plugin=c,void 0!==c.installed&&1!=b||(c.installed=null,c.version=null,c.version0=null,c.getVersionDone=null,c.$=d),d.garbage=!1,d.isIE&&!d.ActiveXEnabled&&d.plugin!=d.java?-2:1)},isMinVersion:function(a,b,c,d){return-3},getVersion:function(a,b,c){var d,e=PluginDetect,f=e.init(a);return f<0?null:(d=e.plugin,1!=d.getVersionDone&&(d.getVersion(b,c),null===d.getVersionDone&&(d.getVersionDone=1)),e.cleanup(),d.version||d.version0)},getInfo:function(a,b,c){var d,e={},f=PluginDetect,g=f.init(a);return g<0?e:(d=f.plugin,void 0!==d.getInfo&&(null===d.getVersionDone&&f.getVersion(a,b,c),e=d.getInfo()),e)},cleanup:function(){this.garbage&&void 0!==window.CollectGarbage&&window.CollectGarbage()},isActiveXObject:function(a){var b,c=this,d="/",e='<object width="1" height="1" style="display:none" '+c.plugin.getCodeBaseVersion(a)+">"+c.plugin.HTML+"<"+d+"object>";c.head.firstChild?c.head.insertBefore(document.createElement("object"),c.head.firstChild):c.head.appendChild(document.createElement("object")),c.head.firstChild.outerHTML=e;try{c.head.firstChild.classid=c.plugin.classID}catch(a){}b=!1;try{c.head.firstChild.object&&(b=!0)}catch(a){}try{b&&c.head.firstChild.readyState<4&&(c.garbage=!0)}catch(a){}return c.head.removeChild(c.head.firstChild),b},codebaseSearch:function(a){var b=this;if(!b.ActiveXEnabled)return null;if(void 0!==a)return b.isActiveXObject(a);var c,d,e,f,g=[0,0,0,0],h=b.plugin.digits,i=function(a,c){var d=(0==a?c:g[0])+","+(1==a?c:g[1])+","+(2==a?c:g[2])+","+(3==a?c:g[3]);return b.isActiveXObject(d)},j=!1;for(c=0;c<h.length;c++){for(e=2*h[c],g[c]=0,d=0;d<20&&!(1==e&&c>0&&j);d++){if(!(e-g[c]>1)){if(e-g[c]==1){e--,!j&&i(c,e)&&(j=!0);break}!j&&i(c,e)&&(j=!0);break}f=Math.round((e+g[c])/2),i(c,f)?(g[c]=f,j=!0):e=f}if(!j)return null}return g.join(",")},dummy1:0};PluginDetect.onDetectionDone=function(a,b,c,d){return-1},PluginDetect.onWindowLoaded=function(a){var b=PluginDetect,c=window;!0===b.EventWinLoad||(b.winLoaded=!1,b.EventWinLoad=!0,void 0!==c.addEventListener?c.addEventListener("load",b.runFuncs,!1):void 0!==c.attachEvent?c.attachEvent("onload",b.runFuncs):("function"==typeof c.onload&&(b.funcs[b.funcs.length]=c.onload),c.onload=b.runFuncs)),"function"==typeof a&&(b.funcs[b.funcs.length]=a)},PluginDetect.funcs=[0],PluginDetect.runFuncs=function(){var a,b=PluginDetect;for(b.winLoaded=!0,a=0;a<b.funcs.length;a++)"function"==typeof b.funcs[a]&&(b.funcs[a](b),b.funcs[a]=null)},PluginDetect.quicktime={mimeType:["video/quicktime","application/x-quicktimeplayer","image/x-macpaint","image/x-quicktime"],progID:"QuickTimeCheckObject.QuickTimeCheck.1",progID0:"QuickTime.QuickTime",classID:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",minIEver:7,HTML:'<param name="src" value="A14999.mov" /><param name="controller" value="false" />',getCodeBaseVersion:function(a){return'codebase="#version='+a+'"'},digits:[8,64,16,0],clipTo3digits:function(a){if(null===a||void 0===a)return null;var b,c,d,e=this.$;return b=a.split(","),c=e.compareNums(a,"7,60,0,0")<0&&e.compareNums(a,"7,50,0,0")>=0?b[0]+","+b[1].charAt(0)+","+b[1].charAt(1)+","+b[2]:b[0]+","+b[1]+","+b[2]+","+b[3],d=c.split(","),d[0]+","+d[1]+","+d[2]+",0"},getVersion:function(){var a,b=null,c=this.$,d=!0;if(c.isIE){var e;c.IEver>=this.minIEver&&c.getAXO(this.progID0,1)?b=c.codebaseSearch():(e=c.getAXO(this.progID))&&e.QuickTimeVersion&&(b=e.QuickTimeVersion.toString(16),b=b.charAt(0)+"."+b.charAt(1)+"."+b.charAt(2)),this.installed=b?1:c.getAXO(this.progID0,1)?0:-1}else navigator.platform&&/linux/i.test(navigator.platform)&&(d=!1),d&&(a=c.findNavPlugin(["QuickTime","(Plug-in|Plugin)"]))&&a.name&&c.hasMimeType(this.mimeType)&&(b=c.getNum(a.name)),this.installed=b?1:-1;this.version=this.clipTo3digits(c.formatNum(b))}},PluginDetect.java={mimeType:"application/x-java-applet",classID:"clsid:8AD9C840-044E-11D1-B3E9-00805F499D93",DTKclassID:"clsid:CAFEEFAC-DEC7-0000-0000-ABCDEFFEDCBA",DTKmimeType:"application/npruntime-scriptable-plugin;DeploymentToolkit",JavaVersions:[[1,9,2,25],[1,8,2,25],[1,7,2,25],[1,6,2,25],[1,5,2,25],[1,4,2,25],[1,3,1,25]],searchJavaPluginAXO:function(){var a=null,b=this,c=b.$,d=[],e=[1,5,0,14],f=[1,6,0,2],g=[1,3,1,0],h=[1,4,2,0],i=[1,5,0,7],j=!1;return c.ActiveXEnabled?(j=!0,c.IEver>=b.minIEver?(d=b.searchJavaAXO(f,f,j),d.length>0&&j&&(d=b.searchJavaAXO(e,e,j))):(j&&(d=b.searchJavaAXO(i,i,!0)),0==d.length&&(d=b.searchJavaAXO(g,h,!1))),d.length>0&&(a=d[0]),b.JavaPlugin_versions=[].concat(d),a):null},searchJavaAXO:function(a,b,c){var d,e,f,g,h,i,j,k,l,m=this.$,n=[];m.compareNums(a.join(","),b.join(","))>0&&(b=a),b=m.formatNum(b.join(","));var o,p="1,4,2,0",q="JavaPlugin."+a[0]+a[1]+a[2]+(a[3]>0?"_"+(a[3]<10?"0":"")+a[3]:"");for(d=0;d<this.JavaVersions.length;d++)for(e=this.JavaVersions[d],f="JavaPlugin."+e[0]+e[1],j=e[0]+"."+e[1]+".",h=e[2];h>=0;h--)if(l="JavaWebStart.isInstalled."+j+h+".0",!(m.compareNums(e[0]+","+e[1]+","+h+",0",b)>=0)||m.getAXO(l,1)){for(o=m.compareNums(e[0]+","+e[1]+","+h+",0",p)<0,i=e[3];i>=0;i--){if(g=h+"_"+(i<10?"0"+i:i),k=f+g,m.getAXO(k,1)&&(o||m.getAXO(l,1))&&(n[n.length]=j+g,!c))return n;if(k==q)return n}if(m.getAXO(f+h,1)&&(o||m.getAXO(l,1))&&(n[n.length]=j+h,!c))return n;if(f+h==q)return n}return n},minIEver:7,getFromMimeType:function(a){var b,c,d,e,f,g=this.$,h=new RegExp(a),i={},j=0,k=[""];for(b=0;b<navigator.mimeTypes.length;b++)e=navigator.mimeTypes[b],h.test(e.type)&&e.enabledPlugin&&(e=e.type.substring(e.type.indexOf("=")+1,e.type.length),d="a"+g.formatNum(e),void 0===i[d]&&(i[d]=e,j++));for(c=0;c<j;c++){f="0,0,0,0";for(b in i)i[b]&&(d=b.substring(1,b.length),g.compareNums(d,f)>0&&(f=d));k[c]=i["a"+f],i["a"+f]=null}return/windows|macintosh/i.test(navigator.userAgent)||(k=[k[0]]),k},queryJavaHandler:function(){var a=PluginDetect.java,b=window.java;a.hasRun=!0;try{void 0!==b.lang&&void 0!==b.lang.System&&(a.value=[b.lang.System.getProperty("java.version")+" ",b.lang.System.getProperty("java.vendor")+" "])}catch(a){}},queryJava:function(){var a=this,b=a.$,c=navigator.userAgent;if(void 0!==window.java&&navigator.javaEnabled()&&!a.hasRun)if(b.isGecko){if(b.hasMimeType("application/x-java-vm")){try{var d=document.createElement("div"),e=document.createEvent("HTMLEvents");e.initEvent("focus",!1,!0),d.addEventListener("focus",a.queryJavaHandler,!1),d.dispatchEvent(e)}catch(a){}a.hasRun||a.queryJavaHandler()}}else/opera.9\.(0|1)/i.test(c)&&/mac/i.test(c)||a.hasRun||a.queryJavaHandler();return a.value},forceVerifyTag:[],jar:[],VENDORS:["Sun Microsystems Inc.","Apple Computer, Inc."],init:function(){var a=this,b=a.$;void 0!==a.app&&a.delJavaApplets(b),a.hasRun=!1,a.value=[null,null],a.useTag=[2,2,2],a.app=[0,0,0,0,0,0],a.appi=3,a.queryDTKresult=null,a.OTF=0,a.BridgeResult=[[null,null],[null,null],[null,null]],a.JavaActive=[0,0,0],a.All_versions=[],a.DeployTK_versions=[],a.MimeType_versions=[],a.JavaPlugin_versions=[],a.funcs=[];var c=a.NOTF;c&&(c.$=b,c.javaInterval&&clearInterval(c.javaInterval),c.EventJavaReady=null,c.javaInterval=null,c.count=0,c.intervalLength=250,c.countMax=40),a.lateDetection=b.winLoaded,a.lateDetection||b.onWindowLoaded(a.delJavaApplets)},getVersion:function(a,b){var c,d=this,e=d.$,f=null,g=null,h=null,i=navigator.javaEnabled();null===d.getVersionDone&&d.init();var j;if(void 0!==b&&b.constructor==Array)for(j=0;j<d.useTag.length;j++)"number"==typeof b[j]&&(d.useTag[j]=b[j]);for(j=0;j<d.forceVerifyTag.length;j++)d.useTag[j]=d.forceVerifyTag[j];if(void 0!==a&&(d.jar[d.jar.length]=a),0==d.getVersionDone)return d.version&&!d.useAnyTag()||(c=d.queryExternalApplet(a),c[0]&&(h=c[0],g=c[1])),void d.EndGetVersion(h,g);var k=d.queryDeploymentToolKit();if("string"==typeof k&&k.length>0&&(f=k,g=d.VENDORS[0]),e.isIE)f||-1==k||(f=d.searchJavaPluginAXO())&&(g=d.VENDORS[0]),f||d.JavaFix(),f&&(d.version0=f,i&&e.ActiveXEnabled&&(h=f)),h&&!d.useAnyTag()||(c=d.queryExternalApplet(a),c[0]&&(h=c[0],g=c[1]));else{var l,m,n,o,p;p=e.hasMimeType(d.mimeType),o=!(!p||!i),0==d.MimeType_versions.length&&p&&(c=d.getFromMimeType("application/x-java-applet.*jpi-version.*="),""!=c[0]&&(f||(f=c[0]),d.MimeType_versions=c)),!f&&p&&(c="Java[^\\d]*Plug-in",(n=e.findNavPlugin(c))&&(c=new RegExp(c,"i"),l=c.test(n.description)?e.getNum(n.description):null,m=c.test(n.name)?e.getNum(n.name):null,f=l&&m?e.compareNums(e.formatNum(l),e.formatNum(m))>=0?l:m:l||m)),!f&&p&&/macintosh.*safari/i.test(navigator.userAgent)&&(n=e.findNavPlugin("Java.*\\d.*Plug-in.*Cocoa",!1))&&(l=e.getNum(n.description))&&(f=l),f&&(d.version0=f,i&&(h=f)),h&&!d.useAnyTag()||(n=d.queryExternalApplet(a),n[0]&&(h=n[0],g=n[1])),h||(n=d.queryJava(),n[0]&&(d.version0=n[0],h=n[0],g=n[1],-.5==d.installed&&(d.installed=.5))),null!==d.installed||h||!o||/macintosh.*ppc/i.test(navigator.userAgent)||(c=d.getFromMimeType("application/x-java-applet.*version.*="),""!=c[0]&&(h=c[0])),!h&&o&&/macintosh.*safari/i.test(navigator.userAgent)&&(null===d.installed?d.installed=0:-.5==d.installed&&(d.installed=.5))}null===d.installed&&(d.installed=h?1:f?-.2:-1),d.EndGetVersion(h,g)},EndGetVersion:function(a,b){var c=this,d=c.$;c.version0&&(c.version0=d.formatNum(d.getNum(c.version0))),a&&(c.version=d.formatNum(d.getNum(a)),c.vendor="string"==typeof b?b:""),1!=c.getVersionDone&&(c.getVersionDone=0)},queryDeploymentToolKit:function(){var a,b=this,c=b.$,d=null,e=null;if((c.isGecko&&c.compareNums(c.GeckoRV,c.formatNum("1.6"))<=0||c.isSafari||c.isIE&&!c.ActiveXEnabled)&&(b.queryDTKresult=0),null!==b.queryDTKresult)return b.queryDTKresult;if(c.isIE&&c.IEver>=6?(b.app[0]=c.instantiate("object",[],[]),d=c.getObject(b.app[0])):!c.isIE&&c.hasMimeType(b.DTKmimeType)&&(b.app[0]=c.instantiate("object",["type",b.DTKmimeType],[]),d=c.getObject(b.app[0])),d){if(c.isIE&&c.IEver>=6)try{d.classid=b.DTKclassID}catch(a){}try{var f,g=d.jvms;if(g&&"number"==typeof(e=g.getLength()))for(a=0;a<e;a++)(f=g.get(e-1-a))&&(f=f.version,c.getNum(f)&&(b.DeployTK_versions[a]=f))}catch(a){}}return c.hideObject(d),b.queryDTKresult=b.DeployTK_versions.length>0?b.DeployTK_versions[0]:0==e?-1:0,b.queryDTKresult},queryExternalApplet:function(a){var b=this,c=b.$,d=b.BridgeResult,e=b.app,f=b.appi,g="&nbsp;&nbsp;&nbsp;&nbsp;";if("string"!=typeof a||!/\.jar\s*$/.test(a))return[null,null];if(b.OTF<1&&(b.OTF=1),!c.isIE&&(c.isGecko||c.isChrome)&&!c.hasMimeType(b.mimeType)&&!b.queryJava()[0])return[null,null];b.OTF<2&&(b.OTF=2),!e[f]&&b.canUseObjectTag()&&b.canUseThisTag(0)&&(e[1]=c.instantiate("object",[],[],g),e[f]=c.isIE?c.instantiate("object",["archive",a,"code","A.class","type",b.mimeType],["archive",a,"code","A.class","mayscript","true","scriptable","true"],g):c.instantiate("object",["archive",a,"classid","java:A.class","type",b.mimeType],["archive",a,"mayscript","true","scriptable","true"],g),d[0]=[0,0],b.query1Applet(f)),!e[f+1]&&b.canUseAppletTag()&&b.canUseThisTag(1)&&(e[f+1]=c.instantiate("applet",["archive",a,"code","A.class","alt",g,"mayscript","true"],["mayscript","true"],g),d[1]=[0,0],b.query1Applet(f+1)),c.isIE&&!e[f+2]&&b.canUseObjectTag()&&b.canUseThisTag(2)&&(e[f+2]=c.instantiate("object",["classid",b.classID],["archive",a,"code","A.class","mayscript","true","scriptable","true"],g),d[2]=[0,0],b.query1Applet(f+2));var h,i=0;for(h=0;h<d.length&&(e[f+h]||b.canUseThisTag(h));h++)i++;return i==d.length&&(b.getVersionDone=1,b.forceVerifyTag.length>0&&(b.getVersionDone=0)),b.getBR()},canUseAppletTag:function(){return!(this.$.isIE&&!navigator.javaEnabled())},canUseObjectTag:function(){return!(this.$.isIE&&!this.$.ActiveXEnabled)},useAnyTag:function(){var a,b=this;for(a=0;a<b.useTag.length;a++)if(b.canUseThisTag(a))return!0;return!1},canUseThisTag:function(a){var b=this,c=b.$;if(3==b.useTag[a])return!0;if(!b.version0||!navigator.javaEnabled()||c.isIE&&!c.ActiveXEnabled){if(2==b.useTag[a])return!0;if(1==b.useTag[a]&&!b.getBR()[0])return!0}return!1},getBR:function(){var a,b=this.BridgeResult;for(a=0;a<b.length;a++)if(b[a][0])return[b[a][0],b[a][1]];return[b[0][0],b[0][1]]},delJavaApplets:function(a){var b,c=a.java.app;for(b=c.length-1;b>=0;b--)a.uninstantiate(c[b])},query1Applet:function(a){var b=this,c=b.$,d=null,e=null,f=c.getObject(b.app[a],!0);try{f&&(d=f.getVersion()+" ",e=f.getVendor()+" ",c.num(d)&&(b.BridgeResult[a-b.appi]=[d,e],c.hideObject(b.app[a])),c.isIE&&d&&4!=f.readyState&&(c.garbage=!0,c.uninstantiate(b.app[a])))}catch(a){}},NOTF:{isJavaActive:function(){}},append:function(a,b){for(var c=0;c<b.length;c++)a[a.length]=b[c]},getInfo:function(){var a,b={},c=this,d=c.$,e=c.installed;b={All_versions:[],DeployTK_versions:[],MimeType_versions:[],DeploymentToolkitPlugin:0!=c.queryDTKresult,vendor:"string"==typeof c.vendor?c.vendor:"",OTF:c.OTF<3?0:3==c.OTF?1:2};var f=[null,null,null];for(a=0;a<c.BridgeResult.length;a++)f[a]=c.BridgeResult[a][0]?1:1==c.JavaActive[a]?0:c.useTag[a]>=1&&c.OTF>=1&&3!=c.OTF&&(2!=a||d.isIE)&&(null!==c.BridgeResult[a][0]||1==a&&!c.canUseAppletTag()||1!=a&&!c.canUseObjectTag()||-.2==e||-1==e)?-1:null;b.objectTag=f[0],b.appletTag=f[1],b.objectTagActiveX=f[2];var g=b.All_versions,h=b.DeployTK_versions,i=b.MimeType_versions,j=c.JavaPlugin_versions;for(c.append(h,c.DeployTK_versions),c.append(i,c.MimeType_versions),c.append(g,h.length>0?h:i.length>0?i:j.length>0?j:"string"==typeof c.version?[c.version]:[]),a=0;a<g.length;a++)g[a]=d.formatNum(d.getNum(g[a]));var k,l=null;d.isIE||(k=i.length>0?d.hasMimeType(c.mimeType+";jpi-version="+i[0]):d.hasMimeType(c.mimeType))&&(l=k.enabledPlugin),b.name=l?l.name:"",b.description=l?l.description:"";var m=null;return 0!=e&&1!=e||""!=b.vendor||(/macintosh/i.test(navigator.userAgent)?m=c.VENDORS[1]:!d.isIE&&/windows/i.test(navigator.userAgent)?m=c.VENDORS[0]:/linux/i.test(navigator.userAgent)&&(m=c.VENDORS[0]),m&&(b.vendor=m)),b},JavaFix:function(){}},PluginDetect.devalvr={mimeType:"application/x-devalvrx",progID:"DevalVRXCtrl.DevalVRXCtrl.1",classID:"clsid:5D2CF9D0-113A-476B-986F-288B54571614",getVersion:function(){var a,b=null,c=this.$;if(c.isIE){var d,e,f;if(e=c.getAXO(this.progID,1)){if(d=c.instantiate("object",["classid",this.classID],["src",""]),f=c.getObject(d))try{f.pluginversion&&(b="00000000"+f.pluginversion.toString(16),b=b.substr(b.length-8,8),b=parseInt(b.substr(0,2),16)+","+parseInt(b.substr(2,2),16)+","+parseInt(b.substr(4,2),16)+","+parseInt(b.substr(6,2),16))}catch(a){}c.uninstantiate(d)}this.installed=b?1:e?0:-1}else a=c.findNavPlugin("DevalVR"),a&&a.name&&c.hasMimeType(this.mimeType)&&(b=a.description.split(" ")[3]),this.installed=b?1:-1;this.version=c.formatNum(b)}},PluginDetect.flash={mimeType:["application/x-shockwave-flash","application/futuresplash"],progID:"ShockwaveFlash.ShockwaveFlash",classID:"clsid:D27CDB6E-AE6D-11CF-96B8-444553540000",getVersion:function(){var a,b,c=function(a){if(!a)return null;var b=/[\d][\d\,\.\s]*[rRdD]{0,1}[\d\,]*/.exec(a);return b?b[0].replace(/[rRdD\.]/g,",").replace(/\s/g,""):null},d=this.$,e=null,f=null,g=null;if(d.isIE){for(b=15;b>2;b--)if(f=d.getAXO(this.progID+"."+b)){g=b.toString();break}if("6"==g)try{f.AllowScriptAccess="always"}catch(a){return"6,0,21,0"}try{e=c(f.GetVariable("$version"))}catch(a){}!e&&g&&(e=g)}else(a=d.findNavPlugin("Flash"))&&a.description&&d.hasMimeType(this.mimeType)&&(e=c(a.description));return this.installed=e?1:-1,this.version=d.formatNum(e),!0}},PluginDetect.shockwave={mimeType:"application/x-director",progID:"SWCtl.SWCtl",classID:"clsid:166B1BCA-3F9C-11CF-8075-444553540000",getVersion:function(){var a,b=null,c=null,d=this.$;if(d.isIE){try{c=d.getAXO(this.progID).ShockwaveVersion("")}catch(a){}"string"==typeof c&&c.length>0?b=d.getNum(c):d.getAXO(this.progID+".8",1)?b="8":d.getAXO(this.progID+".7",1)?b="7":d.getAXO(this.progID+".1",1)&&(b="6")}else(a=d.findNavPlugin("Shockwave for Director"))&&a.description&&d.hasMimeType(this.mimeType)&&(b=d.getNum(a.description));this.installed=b?1:-1,this.version=d.formatNum(b)}},PluginDetect.div=null,PluginDetect.pluginSize=1,PluginDetect.DOMbody=null,PluginDetect.uninstantiate=function(a){var b=this;if(a)try{a[0]&&a[0].firstChild&&a[0].removeChild(a[0].firstChild),a[0]&&b.div&&b.div.removeChild(a[0]),b.div&&0==b.div.childNodes.length&&(b.div.parentNode.removeChild(b.div),b.div=null,b.DOMbody&&b.DOMbody.parentNode&&b.DOMbody.parentNode.removeChild(b.DOMbody),b.DOMbody=null),a[0]=null}catch(a){}},PluginDetect.getObject=function(a,b){var c=null;try{a&&a[0]&&a[0].firstChild&&(c=a[0].firstChild)}catch(a){}try{b&&c&&void 0!==c.focus&&void 0!==document.hasFocus&&!document.hasFocus()&&c.focus()}catch(a){}return c},PluginDetect.getContainer=function(a){var b=null;return a&&a[0]&&(b=a[0]),b},PluginDetect.hideObject=function(a){var b=this.getObject(a);b&&b.style&&(b.style.height="0")},PluginDetect.instantiate=function(a,b,c,d){var e,f,g,h=function(a){var b=a.style;b&&(b.border="0px",b.padding="0px",b.margin="0px",b.fontSize=j.pluginSize+3+"px",b.height=j.pluginSize+3+"px",b.visibility="visible",a.tagName&&"div"==a.tagName.toLowerCase()?(b.width="100%",b.display="block"):a.tagName&&"span"==a.tagName.toLowerCase()&&(b.width=j.pluginSize+"px",b.display="inline"))},i=document,j=this,k=i.getElementsByTagName("body")[0]||i.body,l=i.createElement("span"),m="/";for(void 0===d&&(d=""),e="<"+a+' width="'+j.pluginSize+'" height="'+j.pluginSize+'" ',f=0;f<b.length;f+=2)e+=b[f]+'="'+b[f+1]+'" ';for(e+=">",f=0;f<c.length;f+=2)e+='<param name="'+c[f]+'" value="'+c[f+1]+'" />';if(e+=d+"<"+m+a+">",!j.div){if(j.div=i.createElement("div"),g=i.getElementById("plugindetect"))h(g),g.appendChild(j.div);else if(k)try{k.firstChild&&void 0!==k.insertBefore?k.insertBefore(j.div,k.firstChild):k.appendChild(j.div)}catch(a){}else try{i.write('<div id="pd33993399">o<'+m+"div>"),k=i.getElementsByTagName("body")[0]||i.body,k.appendChild(j.div),k.removeChild(i.getElementById("pd33993399"))}catch(a){try{j.DOMbody=i.createElement("body"),i.getElementsByTagName("html")[0].appendChild(j.DOMbody),j.DOMbody.appendChild(j.div)}catch(a){}}h(j.div)}if(j.div&&j.div.parentNode&&j.div.parentNode.parentNode){j.div.appendChild(l);try{l.innerHTML=e}catch(a){}return h(l),[l]}return[null]},PluginDetect.windowsmediaplayer={mimeType:["application/x-mplayer2","application/asx"],progID:"wmplayer.ocx",classID:"clsid:6BF52A52-394A-11D3-B153-00C04F79FAA6",getVersion:function(){var a=null,b=this.$,c=null;if(this.installed=-1,b.isIE)(c=b.getAXO(this.progID))&&(a=c.versionInfo);else if(b.hasMimeType(this.mimeType)){(b.findNavPlugin(["Windows","Media","(Plug-in|Plugin)"],!1)||b.findNavPlugin(["Flip4Mac","Windows","Media"],!1))&&(this.installed=0);var d=b.isGecko&&b.compareNums(b.GeckoRV,b.formatNum("1.8"))<0;if(!d&&b.findNavPlugin(["Windows","Media","Firefox Plugin"],!1)){var e=b.instantiate("object",["type",this.mimeType[0]],[]),f=b.getObject(e);f&&(a=f.versionInfo),b.uninstantiate(e)}}a&&(this.installed=1),this.version=b.formatNum(a)}},PluginDetect.silverlight={mimeType:"application/x-silverlight",progID:"AgControl.AgControl",digits:[9,20,9,12,31],getVersion:function(){var a=this.$,b=(document,null),c=null,d=!1;if(a.isIE){c=a.getAXO(this.progID);var e,f,g,h=[1,0,1,1,1],i=function(a){return(a<10?"0":"")+a.toString()},j=function(a,b,c,d,e){return a+"."+b+"."+c+i(d)+i(e)+".0"},k=function(a,b){var d=j(0==a?b:h[0],1==a?b:h[1],2==a?b:h[2],3==a?b:h[3],4==a?b:h[4]);try{return c.IsVersionSupported(d)}catch(a){}return!1};if(c&&void 0!==c.IsVersionSupported){for(e=0;e<this.digits.length;e++){for(g=h[e],f=g+(0==e?0:1);f<=this.digits[e]&&k(e,f);f++)d=!0,h[e]=f;if(!d)break}d&&(b=j(h[0],h[1],h[2],h[3],h[4]))}}else{var l=[null,null],m=a.findNavPlugin("Silverlight Plug-in",!1),n=a.isGecko&&a.compareNums(a.GeckoRV,a.formatNum("1.6"))<=0;m&&a.hasMimeType(this.mimeType)&&(b=a.formatNum(m.description),b&&(h=b.split(","),parseInt(h[2],10)>=30226&&parseInt(h[0],10)<2&&(h[0]="2"),b=h.join(",")),a.isGecko&&!n&&(d=!0),d||n||!b||(l=a.instantiate("object",["type",this.mimeType],[]),c=a.getObject(l),c&&(void 0!==c.IsVersionSupported&&(d=!0),d||(c.data="data:"+this.mimeType+",",void 0!==c.IsVersionSupported&&(d=!0))),a.uninstantiate(l)))}this.installed=d?1:-1,this.version=a.formatNum(b)}},PluginDetect.vlc={mimeType:"application/x-vlc-plugin",progID:"VideoLAN.VLCPlugin",compareNums:function(a,b){var c,d,e,f,g,h=a.split(","),i=b.split(",");for(c=0;c<Math.min(h.length,i.length);c++){if(/([\d]+)([a-z]?)/.test(h[c]),d=parseInt(RegExp.$1,10),f=2==c&&RegExp.$2.length>0?RegExp.$2.charCodeAt(0):-1,/([\d]+)([a-z]?)/.test(i[c]),e=parseInt(RegExp.$1,10),g=2==c&&RegExp.$2.length>0?RegExp.$2.charCodeAt(0):-1,d!=e)return d>e?1:-1;if(2==c&&f!=g)return f>g?1:-1}return 0},getVersion:function(){var a,b=this.$,c=null;if(b.isIE){if(a=b.getAXO(this.progID))try{c=b.getNum(a.VersionInfo,"[\\d][\\d\\.]*[a-z]*")}catch(a){}this.installed=a?1:-1}else b.hasMimeType(this.mimeType)&&(a=b.findNavPlugin(["VLC","(Plug-in|Plugin)"],!1))&&a.description&&(c=b.getNum(a.description,"[\\d][\\d\\.]*[a-z]*")),this.installed=c?1:-1;this.version=b.formatNum(c)}},PluginDetect.initScript();var geoLocation=function(){var a=function(a){document.getElementById("geoLoc_latitude").value=a.coords.latitude,document.getElementById("geoLoc_longitude").value=a.coords.longitude};return{getLocation:function(b,c,d){if("geolocation"in navigator){var e={};e.maximumAge=6e4*(b||7),e.timeout=1e3*(c||5),e.enableHighAccuracy=d||!1,navigator.geolocation.getCurrentPosition(a,null,e)}else error({code:0})}}}();angular.module("surveyApp").run(["$templateCache",function(a){"use strict";a.put("app/js/content.html",'<div ms-main-image="logo"/>\n<div id="promptArea" class="promptArea">\n\t<div ng-repeat="prompt in currentPage().prompts track by \'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index" class="promptContainer prompt_identifier_{{prompt.cssIdentifier | spaceToUnderscore}}" id="prompt_content_{{prompt.id}}">\n\t\t\x3c!-- Render directive tag for each prompt --\x3e\n\t\t<div ng-switch="" on="prompt.type">\n\t\t\t<div ng-switch-when="MULTIPLE_CHOICE">\n\t\t\t\t<div ms-categorical="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index" first-element="{{isFirstElement($index)}}" />\n\t\t\t</div>\n\t\t\t<div ng-switch-when="BOOLEAN">\n\t\t\t\t<div ms-boolean="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"></div>\n\t\t\t</div>\n\t\t\t<div ng-switch-when="BOOLEAN_GROUP">\n\t\t\t\t<div ms-boolean-group="prompt" ms-current-page="currentPage()" ms-prompt-id="prompt.id" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index" first-element="{{isFirstElement($index)}}"></div>\n\t\t\t</div>\n\t\t\t<div ng-switch-when="DATE">\n\t\t\t\t<div ms-date-time="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/>\n\t\t\t</div>\n\t\t\t<div ng-switch-when="TIME">\n\t\t\t\t<div ms-date-time="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/>\n\t\t\t</div>\n\t\t\t<div ng-switch-when="EMPLOYEE_SELECTOR">\n\t\t\t\t<div ms-employee="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/>\n\t\t\t</div>\n\t\t\t<div ng-switch-when="RATING">\n\t\t\t\t<div ms-categorical="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index" first-element="{{isFirstElement($index)}}"/>\n\t\t\t</div>\n\t\t\t<div ng-switch-when="RATING_GROUP">\n\t\t\t\t<div ms-categorical-group="prompt" ms-current-page="currentPage()" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index" first-element="{{isFirstElement($index)}}"/>\n\t\t\t</div>\n\t\t\t<div ng-switch-when="MULTIPLE_CHOICE_GROUP">\n\t\t\t\t<div ms-categorical-group="prompt" ms-current-page="currentPage()" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index" first-element="{{isFirstElement($index)}}"/>\t\t\t\t\t\t\t\n\t\t\t</div>\n\t\t\t<div ng-switch-when="COMMENT">\n\t\t\t\t<div ms-comment="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/>\t\t\t\t\t\t\n\t\t\t</div>\n\t\t\t<div ng-switch-when="VIDEO_RESPONSE">\n\t\t\t\t<div ms-video-feedback="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/>\t\t\t\t\t\t\n\t\t\t</div>\n\t\t\t<div ng-switch-when="COMPOSITE_TEXT">\n\t\t\t\t<div ms-composite-text="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/>\n\t\t\t</div>\n\t\t\t<div ng-switch-when="SCRAMBLED_TEXT">\n\t\t\t\t<div ms-scrambled-text="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/>\n\t\t\t</div>\n\t\t\t<div ng-switch-when="TEXT">\n\t\t\t\t<div ms-text="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/>\t\t\t\t\t\t\n\t\t\t</div>\n\t\t\t<div ng-switch-when="NUMERIC">\n\t\t\t\t<div ms-numeric="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/>\t\t\t\t\t\t\n\t\t\t</div>\n\t\t\t<div ng-switch-when="OFFER_CODE_SEARCH">\n\t\t\t\t<div ms-offer-code-search="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/>\t\t\t\t\t\t\n\t\t\t</div>\n\t\t\t<div ng-switch-when="LOCATION_PICKER">\n\t\t\t\t<div ms-location-picker="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/> \t\t\t\t\t\t\n\t\t\t</div>\n\t\t\t<div ng-switch-when="SOCIAL_CONNECT">\n\t\t\t\t<div ms-gorec-connect="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/>\n\t\t\t</div>\n\t\t\t<div ng-switch-when="GO_RECOMMEND_CONNECT">\n\t\t\t\t<div ms-gorec-connect="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/>\n\t\t\t</div>\n\t\t\t<div ng-switch-when="GO_RECOMMEND_SHARE_INCENTIVE">\n\t\t\t\t<div ms-gorec-share="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/>\n\t\t\t</div>\n\t\t\t<div ng-switch-when="GO_RECOMMEND_SHARE_OPEN_TELL">\n\t\t\t\t<div ms-gorec-share="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/>\n\t\t\t</div>\n\t\t\t<div ng-switch-when="SWEEPSTAKES_INSTANT_WIN">\n\t\t\t\t<div ms-sweepstakes-instant-win="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/>\t\t\t\t\t\t\n\t\t\t</div>\n\t\t\t<div ng-switch-when="CAPTCHA">\n\t\t\t\t<div ms-captcha="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index"/>\t\t\t\t\t\t\n\t\t\t</div>\n\t\t\t<div ng-switch-when="GENERIC">\n\t\t\t\t<div ms-generic="currentPage().directiveData[prompt.id]" survey-prompt="\'\' + currentPageIndex + \',\' + prompt.id + \',\' + $index" />\n\t\t\t</div>\t\t\t\t\t\n\t\t</div>\n\t\t\n\t\t<div class="inlineBarContainer" role="separator" ng-if="currentPage().directiveData[prompt.id].prompt.isTriggered"  ng-style="{top:getTop()+ \'px\',height:getHeight(),display:isDisplayed()}" im-inline-bar="" >\n\t\t\t<div class="inlineBar" id="inlineBar_{{prompt.id}}" ng-hide="currentPage().directiveData[prompt.id].prompt.hideTrigger" ng-style="{height:getPrevHeight()+ \'px\'}" \n\t\t\t ng-class="{\'concurrentTriggered\':currentPage().directiveData[prompt.id].prompt.concurrentTriggered}" />\n\t\t</div>\n\t\t\n\t\t<div ng-if="$first" ms-triggered-prompts="" />\n\t</div>\n</div>\n'),a.put("app/js/prompts/boolean-group.tpl.html",'<div class="prompt booleanGroupPrompt groupPrompt" role="region" ng-form="groupPromptForm" id="prompt_{{promptObject.id}}" ng-hide="currentPage.directiveData[promptObject.id].prompt.hideTrigger" ng-class="{\'triggered\':currentPage.directiveData[promptObject.id].prompt.isTriggered, \'noWebText\':!currentPage.directiveData[promptObject.id].prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}" >\r\n\t<div ms-prompt-header="promptObject" ms-add-class="\'arrow-down\'" id="prompt_header_{{promptObject.id}}" />\r\n\t<div ms-boolean="currentPage.directiveData[entry.id]"\r\n\t\t ms-parent-form="groupPromptForm"\r\n\t\t ms-heading="promptObject.text"\r\n\t\t ng-repeat="entry in promptObject.prompts"\r\n\t\t ng-class="{\'field-prompt-error\':errorManager.isFormInErrorState(groupPromptForm) || currentPage.directiveData[promptObject.id].error , \'first-child\':$index==0, \'last-child\':$index==promptObject.prompts.length-1}"\r\n\t/>\r\n\t<div class="errors groupError" ms-show-group-errors="currentPage.directiveData[promptObject.id]" ms-page-directive-data="currentPage.directiveData"  ms-group-form="groupPromptForm"/>\r\n</div>\r\n'),a.put("app/js/prompts/boolean.tpl.html",'<div>\r\n\t<div class="prompt booleanPrompt" id="prompt_{{dd.prompt.id}}" ng-form="promptForm" ng-hide="dd.prompt.hideTrigger" ng-class="{\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}">\r\n\t\t<label class="ui-checkbox" ng-class="{ \'checked\': dd.answer.value===true ,\'field-prompt-error\':errorManager.isFormInErrorState(promptForm)}" for="promptInput_{{ dd.prompt.id }}">\r\n\t\t\t<span class="show-check tabindex_prompt_{{dd.prompt.id}}"\r\n\t\t\t\t  aria-checked="{{dd.answer.value}}"\r\n\t\t\t\t  role="checkbox"\r\n\t\t\t\t  ng-keydown="keypress($event.keyCode, $event)"\r\n\t\t\t\t  aria-label="{{textHeadingFormatted + ariaLabel}}"\r\n\t\t\t\t  ng-click="resetAria"\r\n\t\t\t\t  tabindex="1">\r\n\t\t\t</span>\r\n\t\t\t<input \ttype="checkbox" \r\n\t\t\t\t\tid="promptInput_{{ dd.prompt.id }}" \r\n\t\t\t\t\tname="promptField" \r\n\t\t\t\t\tng-checked="{{dd.answer.value}}"\r\n\t\t\t\t\taria-checked="{{dd.answer.value}}"\r\n\t\t\t\t\tng-model="dd.answer.value"\r\n\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\tms-auto-focus="{{dd.autoSelect && !wcagToggle}}"\r\n\t\t\t\t\ttabindex="-1"\r\n\t\t\t\t\tms-handle-error=""/>\r\n\t\t\t<div class="booleanText" aria-hidden="true" ms-prompt-header-text="dd.prompt"/>\r\n\t\t</label>\r\n\t\t<div class="errors" ms-show-errors="dd" ng-if="parentForm === undefined" />\r\n\t</div>\r\n</div>\r\n'),a.put("app/js/prompts/captcha.tpl.html",'<div class="prompt clearfix captchaPrompt" id="prompt_{{dd.prompt.id}}" ng-form="promptForm" ng-hide="dd.prompt.hideTrigger"  ng-class="{\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}">\n\t<div ms-prompt-header="dd.prompt" ms-add-class="\'arrow-down\'"/>\n\t<botdetect-captcha styleName="entryCaptcha"></botdetect-captcha>\n\t\n\t\x3c!-- If Safari 5.1.7 (last Windows version) support is needed , you can add this attribute on the input element(s):   ng-keyup="forceApply($event)" --\x3e\n\t<div class="promptInput textInput">\n\t\t\t\t\n\t\t<input \ttype="text"\n\t\t\t\tid="promptInput_{{ dd.prompt.id }}" \n\t\t\t\tname="promptField" \n\t\t\t\tng-model="dd.answer.value"\n\t\t\t\tng-required="true"\n\t\t\t\tmaxlength="10"\n\t\t\t\tng-minlength="4"\n\t\t\t\tminlength="4"\n\t\t\t\tms-handle-error=""\n\t\t\t\ttabindex="1"\n\t\t\t\tms-json-to-string=""\n\t\t\t\tcaptcha-id="{{captchaId}}"\n\t\t\t\tcorrect-captcha=""/>\n\t\t\n\t\t\x3c!-- Error Content --\x3e\n\t\t<div class="errors" ms-show-errors="dd"/>\n\t\t\n\t</div>\n</div>\n'),a.put("app/js/prompts/categorical-group.tpl.html",'<div class="prompt categoricalGroup groupPrompt" id="prompt_{{promptObject.id}}" role="region" ng-form="groupPromptForm" ng-hide="currentPage.directiveData[promptObject.id].prompt.hideTrigger" ng-class="{\'triggered\':currentPage.directiveData[promptObject.id].prompt.isTriggered, \'noWebText\':!currentPage.directiveData[promptObject.id].prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}">\r\n\t\x3c!-- Question Text --\x3e\r\n\t<div ms-prompt-header="promptObject" ms-add-class="\'arrow-down\'" id="prompt_header_{{promptObject.id}}" />\r\n\t<div ng-if="choiceDescription" class="choiceDescriptionContainer hideInMobile">\r\n\t\t<div class="choiceDescription description" ng-style="{width: percentWidth + \'%\'}" ng-repeat="choice in choiceDescription" ng-class="getRatingClass(choice)">\r\n\t\t\t<div ng-bind-html="choice.label| unsafe" />\r\n\t\t</div>\r\n\t</div>\r\n\t<div ms-categorical="currentPage.directiveData[prompt.id]" \r\n\t\t ms-child-prompt="true"\r\n\t\t ms-child-index="$index"\r\n\t\t ms-heading="promptObject.text"\r\n\t\t ng-repeat="prompt in promptObject.prompts"\r\n\t\t class="categoricalChild"\r\n\t\t ng-class="{\'first-child\':$index==0, \'last-child\':$index==promptObject.prompts.length-1}"\r\n\t/>\r\n\t<div id="groupClear"></div>\r\n</div>'),a.put("app/js/prompts/categorical-prompt.tpl.html",'<div class="prompt {{dd.prompt.renderType | alphanumeric}}" ng-form="promptForm" ng-hide="dd.prompt.hideTrigger" id="prompt_{{dd.prompt.id}}" ng-class="{\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}">\r\n\t<div class="promptHeader" id="prompt_header_{{dd.prompt.id}}" ms-prompt-header="dd.prompt" ms-add-class="childPrompt==true ? \'no-arrow\': \'arrow-down\'" ms-child-prompt-header="childPrompt==true" />\r\n\r\n\t<div ng-switch="dd.prompt.renderType" class="promptInput multipleChoiceInput" ng-if="!wcagToggle">\r\n\t\t\x3c!-- Pulldown / Select list --\x3e\r\n\t\t<div ng-switch-when="Pulldown" >\r\n\t\t\t<div class="ui-select btn btn-all categorical" ng-class="{\'field-prompt-error\':errorManager.isFormInErrorState(promptForm)}">\r\n\t\t\t\t<select name="promptField"\r\n\t\t\t\t\t\tng-model="dd.answer.value" \r\n\t\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\t\tms-auto-focus="{{dd.autoSelect}}"\r\n\t\t\t\t\t\tms-handle-error="">\r\n\t\t\t\t\t\t<option ng-repeat="choice in dd.prompt.choices" value="{{choice.choiceId}}">{{choice.label}}</option>\r\n\t\t\t\t\t<option value="" ng-bind-html="dd.prompt.msgs[\'chooseFrom\']"></option>\r\n\t\t\t\t</select>\r\n\t\t\t\t<span class="btn-inner btn-all">\r\n\t\t\t\t\t<span class="btn-text" ng-bind-html="selectedLabel | unsafe"/>\r\n\t\t\t\t\t<span class="btn-icon"></span>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="errors" ms-show-errors="dd"/>\r\n\t\t</div>\r\n\r\n\t\t<div ng-switch-when="Vertical">\r\n\t\t\t<div class="menuItem-container categorical" ng-class="{\'field-prompt-error\':errorManager.isFormInErrorState(promptForm)}">\r\n\t\t\t\t<div ng-repeat="choice in dd.prompt.choices" onclick="this.getElementsByTagName(\'input\')[0].click();"\r\n\t\t\t\t\tclass="menuItem" ng-class="{ checked: choice.choiceId == dd.answer.value, na:choice.na, other:choice.other }">\r\n\t\t\t\t\t<input \tid="option_{{choice.choiceId}}_{{dd.prompt.id}}"\r\n\t\t\t\t\t\t\tname="promptField"\r\n\t\t\t\t\t\t\ttype="radio" \r\n\t\t\t\t\t\t\tng-model="dd.answer.value" \r\n\t\t\t\t\t\t\tvalue="{{choice.choiceId}}" \r\n\t\t\t\t\t\t\tms-auto-focus="{{dd.autoSelect && $first}}"\r\n\t\t\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\t\t\tng-click="selectOption(choice.choiceId)"/>\r\n\t\t\t\t\t<label for="{option_{{choice.choiceId}}_{{dd.prompt.id}}" ng-bind-html="choice.label | unsafe"/>\r\n\t\t\t\t\t<span ng-class="{ checked: choice.choiceId == dd.answer.value }"></span>\r\n\t\t\t\t\t<div ng-if="choice.other" >\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype="text" \r\n\t\t\t\t\t\t\tid="otherOptionInput_{{dd.prompt.id}}"\r\n\t\t\t\t\t\t \tclass="otherTextBox"\r\n\t\t\t\t\t\t \tmaxlength="50"\r\n\t\t\t\t\t\t \tng-model="dd.otherOption.value" \r\n\t\t\t\t\t\t \tng-hide="dd.otherOption.choiceId!=dd.answer.value"\r\n\t\t\t\t\t\t  />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\r\n\t\t\t<div class="errors" ms-show-errors="dd"/>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div ng-switch-when="Yes / No" class="yesNo">\r\n\t\t\t<div id="promptInput_{{dd.prompt.id}}" class="promptInput categorical" ng-keydown="keypressYN($event.keyCode)">\r\n\t\t\t\t<input \tid="option_no_{{dd.prompt.id}}" \r\n\t\t\t\t\t\tng-model="dd.answer.value" \r\n\t\t\t\t\t\tng-required="dd.prompt.required" \r\n\t\t\t\t\t\tvalue="{{dd.prompt.choices[1].choiceId}}" \r\n\t\t\t\t\t\ttype="radio"\r\n\t\t\t\t\t\tname="promptField"\r\n\t\t\t\t\t\tms-handle-error=""/>\r\n\t\t\t\t<label class="n yesNoEl" for="option_no_{{dd.prompt.id}}" ng-class="{\'field-prompt-error\':errorManager.isFormInErrorState(promptForm), chkd:dd.prompt.choices[1].choiceId==dd.answer.value}" ng-click="yesNoClick(1);" ng-bind-html="dd.prompt.choices[1].label | unsafe"/>\r\n\t\t\t\t<input \tid="option_yes_{{dd.prompt.id}}" \r\n\t\t\t\t\t\tng-model="dd.answer.value" \r\n\t\t\t\t\t\tng-required="dd.prompt.required"  \r\n\t\t\t\t\t\tvalue="{{dd.prompt.choices[0].choiceId}}" \r\n\t\t\t\t\t\ttype="radio"\r\n\t\t\t\t\t\tname="promptField"/>\r\n\t\t\t\t<label class="y yesNoEl" for="option_yes_{{dd.prompt.id}}" ng-class="{\'field-prompt-error\':errorManager.isFormInErrorState(promptForm), chkd:dd.prompt.choices[0].choiceId==dd.answer.value}" ng-click="yesNoClick(0);" ng-bind-html="dd.prompt.choices[0].label | unsafe"/>\r\n\t\t\t\t\r\n\t\t\t\t<div class="errors" ms-show-errors="dd"/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\t\r\n\t\t\x3c!-- horizontal is default--\x3e\r\n\t\t<div ng-switch-default="">\r\n\t\t\t<div ng-class="{\'field-prompt-error\':errorManager.isFormInErrorState(promptForm)}" class="errorSibling">\r\n\t\t\t\t<div class="rating_prompt {{dd.prompt.renderType == \'Horizontal Slider\' ? \'slider\' : \'horizontal\'}}" style="width: 100%">\r\n\t\t\t\t\t<div class="options unused {{dd.answer.value?\'ans\':\'noAnswer\'}}" ng-keydown="keypress($event.keyCode, $event)" ms-auto-focus="{{dd.autoSelect}}">\r\n\t\t\t\t\t\t<div ng-style="{width: percentWidth + \'%\'}" ng-repeat="choice in dd.prompt.choices" class="option option_{{choice.choiceId}}_{{dd.prompt.id}} {{getRatingClass(choice)}}" ng-click="dd.answer.value = choice.choiceId ? choice.choiceId : dd.answer.value">\r\n\t\t\t\t\t\t\t<input \tid="option_{{choice.choiceId}}_{{dd.prompt.id}}" \r\n\t\t\t\t\t\t\t\t\t\tng-model="dd.answer.value"\r\n\t\t\t\t\t\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\t\t\t\t\t\tng-if="choice.choiceId"\r\n\t\t\t\t\t\t\t\t\t\ttype="radio"\r\n\t\t\t\t\t\t\t\t\t\tname="promptField"\r\n\t\t\t\t\t\t\t\t\t\tvalue="{{choice.choiceId}}"\r\n\t\t\t\t\t\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\t\t\t\t\t\tindex="0" />\r\n\t\t\t\t\t\t\t<div class="description hideInDesktop" ng-bind-html="choice.label| unsafe" />\r\n\t\t\t\t\t\t\t<div class="triangle"/>\r\n\t\t\t\t\t\t\t<label for="option_{{choice.choiceId}}_{{dd.prompt.id}}">\r\n\t\t\t\t\t\t\t\t<div class="rating"><div ng-bind-html="choice.ordinal | unsafe"/></div>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div class="errors" ms-show-errors="dd"/>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div ng-switch="dd.prompt.renderType" class="promptInput multipleChoiceInput" ng-if="wcagToggle">\r\n\t\t\x3c!-- Pulldown / Select list --\x3e\r\n\t\t<div ng-switch-when="Pulldown">\r\n\t\t\t<div role="listbox"\r\n\t\t\t\tclass="ui-select btn btn-all categorical adaHighlight"\r\n\t\t\t\taria-label="{{ariaLabel}}"\r\n\t\t\t\tng-class="{\'field-prompt-error\':errorManager.isFormInErrorState(promptForm)}"\r\n\t\t\t>\r\n\t\t\t\t<select name="promptField"\r\n\t\t\t\t\t\tclass="tabindex_prompt_{{dd.prompt.id}}"\r\n\t\t\t\t\t\tng-model="dd.answer.value" \r\n\t\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\t\ttabindex="1"\r\n\t\t\t\t>\r\n\t\t\t\t\t<option ng-repeat="choice in dd.prompt.choices" value="{{choice.choiceId}}" role="option">{{choice.label}}</option>\r\n\t\t\t\t\t<option value="" ng-bind-html="dd.prompt.msgs[\'chooseFrom\']" role="option"></option>\r\n\t\t\t\t</select>\r\n\t\t\t\t<span class="btn-inner btn-all">\r\n\t\t\t\t\t<span class="btn-text" ng-bind-html="selectedLabel | unsafe"/>\r\n\t\t\t\t\t<span class="btn-icon"></span>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="errors" ms-show-errors="dd"/>\r\n\t\t</div>\r\n\t\r\n\t\t<div ng-switch-when="Vertical">\r\n\t\t\t<div role="radiogroup" class="menuItem-container categorical tabindex_prompt_{{dd.prompt.id}}"\r\n\t\t\t\tng-class="{\'field-prompt-error\':errorManager.isFormInErrorState(promptForm), \'noAnswer\': trueIfEmptyNullOrUndefined(dd.answer.value)}" \r\n\t\t\t\taria-label="{{ariaLabel}}"\r\n\t\t\t\tng-keydown="keypressWCAG($event.keyCode, $event)"\r\n\t\t\t>\r\n\t\t\t\t<div ng-repeat="choice in dd.prompt.choices" onclick="this.getElementsByTagName(\'input\')[0].click();"\r\n\t\t\t\t\trole="radio" tabindex="{{$index === 0 ? \'1\' : \'-1\'}}" \r\n\t\t\t\t\tclass="menuItem" ng-class="{ \'checked selected\': choice.choiceId == dd.answer.value, na:choice.na, other:choice.other }"\r\n\t\t\t\t>\r\n\t\t\t\t\t<input \tid="option_{{choice.choiceId}}_{{dd.prompt.id}}"\r\n\t\t\t\t\t\t\tname="promptField"\r\n\t\t\t\t\t\t\ttype="radio"\r\n\t\t\t\t\t\t\tng-model="dd.answer.value"\r\n\t\t\t\t\t\t\tvalue="{{choice.choiceId}}"\r\n\t\t\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\t\t\taria-hidden="true"\r\n\t\t\t\t\t\t\tng-click="selectOption(choice.choiceId, $event)" />\r\n\t\t\t\t\t<label for="{option_{{choice.choiceId}}_{{dd.prompt.id}}" ng-bind-html="choice.label | unsafe"/>\r\n\t\t\t\t\t<span ng-class="{ checked: choice.choiceId == dd.answer.value }"></span>\r\n\t\t\t\t\t<div ng-if="choice.other">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\trole="text"\r\n\t\t\t\t\t\t\ttype="text" \r\n\t\t\t\t\t\t\tid="otherOptionInput_{{dd.prompt.id}}"\r\n\t\t\t\t\t\t\tclass="otherTextBox"\r\n\t\t\t\t\t\t\tmaxlength="50"\r\n\t\t\t\t\t\t\tng-model="dd.otherOption.value" \r\n\t\t\t\t\t\t\tng-hide="dd.otherOption.choiceId!=dd.answer.value"\r\n\t\t\t\t\t\t\ttabindex="1"\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\r\n\t\t\t<div class="errors" ms-show-errors="dd"/>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div ng-switch-when="Yes / No" class="yesNo">\r\n\t\t\t<div id="promptInput_{{dd.prompt.id}}" \r\n\t\t\t\tclass="promptInput categorical"\r\n\t\t\t\tng-keydown="keypressYNWCAG($event.keyCode, $event)"\r\n\t\t\t>\r\n\t\t\t\t<div class="yesNo-ada-container tabindex_prompt_{{dd.prompt.id}}"\r\n\t\t\t\t\trole="radiogroup"\r\n\t\t\t\t\tng-class="{\'noAnswer\': trueIfEmptyNullOrUndefined(dd.answer.value), \'field-prompt-error\':errorManager.isFormInErrorState(promptForm) }" \r\n\t\t\t\t\taria-label="{{ariaLabel}}"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class="yesNo-ada-option" tabindex="1" role="radio">\r\n\t\t\t\t\t\t<input\tid="option_no_{{dd.prompt.id}}"\r\n\t\t\t\t\t\t\t\tng-model="dd.answer.value" \r\n\t\t\t\t\t\t\t\tng-required="dd.prompt.required" \r\n\t\t\t\t\t\t\t\tvalue="{{dd.prompt.choices[1].choiceId}}" \r\n\t\t\t\t\t\t\t\ttype="radio"\r\n\t\t\t\t\t\t\t\tname="promptField"\r\n\t\t\t\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\t\t\t\ttabindex="-1"/>\r\n\t\t\t\t\t\t<label \tclass="n yesNoEl"\r\n\t\t\t\t\t\t\t\tid="choice_no_{{dd.prompt.choices[1].choiceId}}"\r\n\t\t\t\t\t\t\t\tfor="option_no_{{dd.prompt.id}}" \r\n\t\t\t\t\t\t\t\tng-class="{\'field-prompt-error-yesNo\':errorManager.isFormInErrorState(promptForm), \'chkd\' :dd.prompt.choices[1].choiceId==dd.answer.value}" \r\n\t\t\t\t\t\t\t\tng-click="yesNoClick(1);" \r\n\t\t\t\t\t\t\t\tng-bind-html="dd.prompt.choices[1].label | unsafe"\r\n\t\t\t\t\t\t\t\taria-label="{{dd.prompt.choices[1].label}}"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="yesNo-ada-option" tabindex="-1" role="radio">\r\n\t\t\t\t\t\t<input \tid="option_yes_{{dd.prompt.id}}"\r\n\t\t\t\t\t\t\t\tng-model="dd.answer.value" \r\n\t\t\t\t\t\t\t\tng-required="dd.prompt.required"  \r\n\t\t\t\t\t\t\t\tvalue="{{dd.prompt.choices[0].choiceId}}" \r\n\t\t\t\t\t\t\t\ttype="radio"\r\n\t\t\t\t\t\t\t\tname="promptField"\r\n\t\t\t\t\t\t\t\ttabindex="-1"/>\r\n\t\t\t\t\t\t<label \tclass="y yesNoEl"\r\n\t\t\t\t\t\t\t\tid="choice_no_{{dd.prompt.choices[0].choiceId}}" \r\n\t\t\t\t\t\t\t\tfor="option_yes_{{dd.prompt.id}}"\r\n\t\t\t\t\t\t\t\tng-class="{\'field-prompt-error-yesNo\':errorManager.isFormInErrorState(promptForm), \'chkd\' :dd.prompt.choices[0].choiceId==dd.answer.value}" \r\n\t\t\t\t\t\t\t\tng-click="yesNoClick(0);" \r\n\t\t\t\t\t\t\t\tng-bind-html="dd.prompt.choices[0].label | unsafe"\r\n\t\t\t\t\t\t\t\taria-label="{{dd.prompt.choices[0].label}}"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="errors" ms-show-errors="dd"/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\t\r\n\t\t\x3c!-- horizontal is default--\x3e\r\n\t\t<div ng-switch-default="">\r\n\t\t\t<div ng-class="{\'field-prompt-error\':errorManager.isFormInErrorState(promptForm)}" class="errorSibling">\r\n\t\t\t\t<div class="rating_prompt {{dd.prompt.renderType == \'Horizontal Slider\' ? \'slider\' : \'horizontal\'}}" style="width: 100%">\r\n\t\t\t\t\t<div class="options unused {{dd.answer.value?\'ans\':\'noAnswer\'}} tabindex_prompt_{{dd.prompt.id}}"\r\n\t\t\t\t\t\t role="radiogroup" \r\n\t\t\t\t\t\t ng-keydown="keypressWCAG($event.keyCode, $event)"\r\n\t\t\t\t\t\t aria-label="{{textHeadingFormatted + ariaLabel}}"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div ng-style="{width: percentWidth + \'%\'}"\r\n\t\t\t\t\t\t\tng-repeat="choice in dd.prompt.choices"\r\n\t\t\t\t\t\t\taria-checked="{{dd.answer.value}}" \r\n\t\t\t\t\t\t\tclass="option option_{{choice.choiceId}}_{{dd.prompt.id}} {{getRatingClass(choice)}}"\r\n\t\t\t\t\t\t\tng-class="{ \'checked selected\': choice.choiceId == dd.answer.value, na:choice.na, other:choice.other }"\r\n\t\t\t\t\t\t\ttabindex="{{$index === 0 ? \'1\' : \'-1\'}}" \r\n\t\t\t\t\t\t\trole="radio"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<input \tid="option_{{choice.choiceId}}_{{dd.prompt.id}}" \r\n\t\t\t\t\t\t\t\t\t\tng-model="dd.answer.value" \r\n\t\t\t\t\t\t\t\t\t\tng-required="dd.prompt.required" \r\n\t\t\t\t\t\t\t\t\t\tng-if="choice.choiceId"\r\n\t\t\t\t\t\t\t\t\t\ttype="radio"\r\n\t\t\t\t\t\t\t\t\t\tname="promptField"\r\n\t\t\t\t\t\t\t\t\t\tvalue="{{choice.choiceId}}"\r\n\t\t\t\t\t\t\t\t\t\tng-click="selectOption(choice.choiceId, $event)"\r\n\t\t\t\t\t\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\t\t\t\t\t\tindex="0" />\r\n\t\t\t\t\t\t\t<div class="description hideInDesktop" id="option_label__{{choice.choiceId}}_{{dd.prompt.id}}" ng-bind-html="choice.label| unsafe" aria-hidden="true" />\r\n\t\t\t\t\t\t\t<div class="triangle"/>\r\n\t\t\t\t\t\t\t<label for="option_{{choice.choiceId}}_{{dd.prompt.id}}">\r\n\t\t\t\t\t\t\t\t<div class="rating">\r\n\t\t\t\t\t\t\t\t\t<div aria-label="{{choice.label}}" ng-bind-html="choice.ordinal | unsafe" />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div class="errors" ms-show-errors="dd"/>\r\n\t\t</div>\r\n\t</div>\r\n\t<hr ng-if="childPrompt==true"/>\r\n</div>'),a.put("app/js/prompts/comment.tpl.html",'<div class="prompt commentPrompt" ng-form="promptForm" id="prompt_{{dd.prompt.id}}"  ng-hide="dd.prompt.hideTrigger" ng-class="{\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}">\r\n\t<div ms-prompt-header="dd.prompt" ms-add-class="\'arrow-down\'"/>\r\n\t<div class="content">\r\n        <div class="promptInput" ng-class="{\'hintEnabled\':dd.prompt.nudge.hintingType > 0, \'strengthMeter\':showStrengthMeter()}">\r\n\t\t\t<div ng-show="showStrengthMeter()" class="nudge_sidebar" ng-class="strengthMeterClass">\r\n\t\t\t\t<div class="nudge_meter">\r\n\t\t\t\t\t<div class="nudge_goal"></div>\r\n\t\t\t\t\t<div class="nudge_progress"  id="nudge_progress" dumbie="&nbsp;" ng-style="strengthMeterStyle"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="nudgeLabel" ng-bind-html="dd.prompt.msgs.nudge_ds|unsafe"></div>\r\n\t\t\t\t<div class="nudge_arrow" ng-style="strengthMeterArrowStyle"></div>\r\n\t\t\t</div>\r\n\t\t\t{{done}}\r\n\t\t\t<textarea \tid="commentArea" \r\n\t\t\t\t\t\tclass="commentArea limited prompt"\r\n\t\t\t\t\t\tng-class=[tabIndexPromptClass]\r\n\t\t\t\t\t\trole="textbox"\r\n\t\t\t\t\t\taria-label="{{ariaLabel}}"\r\n\t\t\t\t\t\tng-model="commentVal"\r\n\t\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\t\tms-maxlength="{{ dd.prompt.maxLength }}"\r\n\t\t\t\t\t\tname="promptField"\r\n\t\t\t\t\t\tng-attr-placeholder="{{ dd.prompt.placeholderText }}"\r\n\t\t\t\t\t\tms-auto-focus="{{wcagToggle ? false : dd.autoSelect}}"\r\n\t\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\t\tim-smart-comment=""\r\n\t\t\t\t\t\tim-image-comment="dd.answer.value"\r\n\t\t\t\t\t\tng-trim="false"\r\n\t\t\t\t\t\tng-paste="pasteCallback(true)"\r\n\t\t\t\t\t\tng-cut="pasteCallback(true)"\r\n\t\t\t\t\t\tsoft-prompt="{{dd.prompt.nudge.softPrompt}}"\r\n\t\t\t\t\t\tsoft-prompt-empty="{{dd.prompt.nudge.emptyCommentSoftPrompt}}"\r\n\t\t\t\t\t\tsoft-prompt-message="{{dd.prompt.msgs.softprompt_message}}"\r\n\t\t\t\t\t\tsoftprompt-share-experience="{{dd.prompt.msgs.softprompt_share_experience}}"\r\n\t\t\t\t\t\tsoftprompt-nothanks="{{dd.prompt.msgs.softprompt_nothanks}}"\r\n\t\t\t\t\t\ttabindex="1"/>\r\n\t\t\t\t\t\r\n\t\t\t<div id="hintContainer" ng-class="{\'closed\':hintClosed}" onClick="$(this).prev().focus();" ng-if="dd.prompt.nudge.hintingType > 0">\r\n\t\t\t\t<div id="bubble1" class="hintComponent" ng-class="{\'showHint\':showHint()}"/>\r\n\t\t\t\t<div id="bubble2" class="hintComponent" ng-class="{\'showHint\':showHint()}"/>\r\n\t\t\t\t<div id="thinkingBubbleContainer" ng-if="dd.prompt.nudge.thinkingBubble"/>\r\n\t\t\t\t<div id="hint" class="hintComponent" ng-class="{\'showHint\':showHint()}">\r\n\t\t\t\t\t<span ng-keydown="keypress($event.keyCode)" class="promptHint_{{dd.prompt.id}}">\r\n\t\t\t\t\t\t<span id="closeButton" aria-hidden="true" data-icon="&#xea46;" class="iconFont" ng-click="closeHint()" />\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<div id="hintText" class="promptHintText_{{dd.prompt.id}}">{{dd.prompt.nudge.hint}}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="characterCount" ng-show="dd.prompt.maxLength && !dd.prompt.nudge.useStrengthMeter">Character length {{commentVal.length}}/{{dd.prompt.maxLength}}</div>\r\n\t\t\t\r\n\t\t\t<div ng-if="dd.prompt.imageCount" ms-image-upload="dd"></div>\r\n\t\t\t\r\n\t\t\t<div class="errors" ms-show-errors="dd"/>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),a.put("app/js/prompts/common/checkbox.tpl.html",'<label class="ui-checkbox ng-class: { checked: selected }" for="{{ id }}">\r\n\t<span></span>\r\n\t<input type="checkbox" id="{{ id }}" name="{{ name }}" ng-checked="selected" ng-model="selected" />\r\n\t<div class="text">{{ text }}</div>\r\n</label>'),a.put("app/js/prompts/common/modal-dialog.tpl.html","<div class='ng-modal' ng-class=\"classes\">\r\n  <div class='ng-modal-overlay' ng-click='closeModalDialog($event)' ng-if=\"!isMobile\"></div>\r\n  <div class='ng-modal-dialog' ng-class=\"{'mobileModal':isMobile}\">\r\n    <div aria-hidden=\"true\" data-icon=\"&#xea46;\" class=\"iconFont ng-modal-close\" ng-click='closeModalDialog($event)'></div>\r\n    <div ng-if=\"!iframeurl\" class='ng-modal-dialog-content' ng-transclude></div>\r\n    <iframe ng-if=\"iframeurl\" class='ng-modal-dialog-content' ng-src='{{trustSrc(iframeurl)}}'></iframe>\r\n  </div>\r\n</div>"),a.put("app/js/prompts/common/prompt-text.tpl.html",'<div class="promptText" id="promptText_{{ promptObject.id }}" ng-form="promptInput">\r\n\t<div class="content" >{{ promptObject.text }}</div>\r\n</div>'),a.put("app/js/prompts/date.tpl.html",'<div class="prompt clearfix" ng-form="promptForm" id="prompt_{{dd.prompt.id}}" ng-class="{\'datePrompt\':dd.prompt.type==\'DATE\',\'timePrompt\':dd.prompt.type==\'TIME\',\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}" ng-hide="dd.prompt.hideTrigger">\r\n\t<div ms-prompt-header="dd.prompt" ms-add-class="\'arrow-down\'"/>\r\n\t<div class="promptInput" ng-class="{\'dateInput\':dd.prompt.type==\'DATE\',\'timeInput\':dd.prompt.type==\'TIME\'}">\r\n\t\t<div>\r\n\t\t\t<input \tid="promptInput_{{ dd.prompt.id }}" \r\n\t\t\t\t\tng-model="displayValue"\r\n\t\t\t\t\tclass="dataIcon tabindex_prompt_{{dd.prompt.id}}"\r\n\t\t\t\t\trole="text"\r\n\t\t\t\t\tname="promptField"\r\n\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\tms-auto-focus="{{wcagToggle ? false : dd.autoSelect}}"\r\n\t\t\t\t\tplaceholder="{{ dd.prompt.placeholderText }}"\r\n\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\tng-class="{\'ng-dirty\':displayValue!=\'\', \'adaHighlight\': wcagToggle}"\r\n\t\t\t\t\ttabindex="1"\r\n\t\t\t\t\taria-label="{{ariaLabel}}"\r\n\t\t\t/>\r\n\t\t\t<span class="dataIconSpan" tabindex="1">\r\n\t\t\t\t<span aria-hidden="true" data-icon="{{dd.prompt.type==\'DATE\' ? \'&#xe766;\' : \'&#xebde;\'}}" class="iconFont"></span>\r\n\t\t\t\t<span class="promptInputDateTime_aria" role="status" tabindex="-1" style="opacity: 0;"></span>\r\n\t\t\t</span>\r\n\t\t\t<span aria-label="{{displayValue}}" tabindex="-1"></span> \r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\x3c!-- Error Content --\x3e\r\n\t\t\t<div class="errors" ms-show-errors="dd"/>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),a.put("app/js/prompts/debug-prompt.tpl.html",'<div class="prompt mobileScaleGroup debugPrompt">\r\n\t<div class="promptText">{{ debugObject.text }}</div>\r\n</div>\t'),a.put("app/js/prompts/employee.tpl.html",'<div class="prompt multipleChoicePrompt employeePrompt"   id="prompt_{{dd.prompt.id}}" ng-class="{\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}" ng-hide="dd.prompt.hideTrigger">\r\n\t<div ms-prompt-header="dd.prompt" ms-add-class="\'arrow-down\'"/>\r\n\t<div class="promptInput employeeInput" id="prompt_employee_input_{{dd.prompt.id}}" ng-form="promptForm">\r\n\t\t<div class="ui-select btn btn-all" aria-label="{{ ariaLabel }}" ng-class="{\'field-prompt-error\':errorManager.isFormInErrorState(promptForm), \'adaHighlight\': wcagToggle}" tabindex="-1">\t\t\t\r\n\t\t\t<select ng-model="employee"\r\n\t\t\t\t\tclass="tabindex_prompt_{{dd.prompt.id}}"\r\n\t\t\t\t\trole="listbox"\r\n\t\t\t\t\tng-options="emp.name for emp in employees"\r\n\t\t\t\t\tng-change="onSelected(employee)"\r\n\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\tname="promptField"\r\n\t\t\t\t\tms-auto-focus="{{wcagToggle ? false : dd.autoSelect}}"\r\n\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\ttabindex="1">\r\n\t\t\t\t\t\r\n\t\t\t\t\t<option role="option" value="" ng-bind-html="emptyEmployee.name"></option>\r\n\t\t\t</select>\r\n\t\t\t<span class="btn-inner">\r\n\t\t\t\t<span class="btn-text">{{selectedLabel}}</span>\r\n\t\t\t\t<span class="btn-icon"></span>\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div class="errors" ms-show-errors="dd"/>\r\n\t</div>\r\n</div>'),a.put("app/js/prompts/error.tpl.html",'<div class="promptError" role="status">\r\n\t{{errorObject.message}}\r\n</div>'),a.put("app/js/prompts/generic.tpl.html",'<div class="prompt clearfix genericPrompt"\r\n\trole="note" id="prompt_{{dd.prompt.id}}"\r\n\tng-form="promptInput"\r\n\tng-class="{\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}"\r\n\tng-hide="dd.prompt.hideTrigger"\r\n>\r\n\t<div ms-prompt-header="dd.prompt" id="prompt_header_{{dd.prompt.id}}" />\r\n\t<div ng-show="dd.prompt.outputValueText != null" id="outputValueText_{{dd.prompt.id}}" class="outputValueText">\r\n\t\t{{dd.prompt.outputValueText}}\r\n\t</div>\r\n</div>\r\n'),a.put("app/js/prompts/gorec/connect.tpl.html",'<div class="prompt mobileScaleGroup goRecConnectPrompt" id="prompt_{{dd.prompt.id}}" ng-hide="dd.prompt.hideTrigger" ng-class="{\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}" >\t\r\n\t<div ms-prompt-header="dd.prompt" ms-add-class="\'arrow-down\'"/>\r\n\t<div ng-if="wcagToggle" id="promptHeaderAria_{{dd.prompt.id}}" tabindex="1" style="opacity: 0;height:0;width:0;">{{dd.prompt.text}}</div>\r\n\t<span ng-repeat="t in types" ng-switch="" on="t.typeName">\r\n\t\t<div ng-switch-when="FACEBOOK" id="cwu-facebook" class="cwu-btn cwu-btn-icon" title="Like">\r\n\t\t\t<div id="facebookLikeButtonContainer" class="fb-like-button-container" ng-init="initFacebook(t.connectPageId, t.languageCode)">\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div ng-switch-when="GOOGLE" id="cwu-google" class="cwu-btn cwu-btn-icon" ng-click="openUrl($event)" ng-keydown="keypressOpenUrl($event)">\r\n\t\t\t<a class="btn-text" ng-class="{\'adaHighlight\': wcagToggle}"\r\n\t\t\t\tdata-url=\'https://plus.google.com/u/0/b/{{ t.connectPageId }}\' data-event="/googleplus/connect" tabindex="1">\r\n\t\t\t\t{{ t.connectText }}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t\t<div ng-switch-when="TWITTER_HANDLE" id="cwu-twitter" class="cwu-btn cwu-btn-icon" title="Follow">\r\n\t\t\t<a href=\'https://twitter.com/{{ getTwitterHandle(t.connectPageId) }}\' class="twitter-follow-button" data-show-count="false" data-show-screen-name="false" data-lang="{{t.languageCode}}">\r\n\t\t\t\t{{ t.connectText }}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t\t<div ng-switch-when="EMAIL" id="cwu-email" class="cwu-btn cwu-btn-icon" ng-click="openUrl($event)" ng-keydown="keypressOpenUrl($event)">\r\n\t\t\t<a class="btn-text" ng-class="{\'adaHighlight\': wcagToggle}" data-url="{{ t.connectPageUrl }}"\r\n\t\t\t\tdata-event="/email/connect" tabindex="1">\r\n\t\t\t\t{{ t.connectText }}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t\t<div ng-switch-when="YELP" id="cwu-yelp" class="cwu-btn cwu-btn-icon" ng-click="openUrl($event)" ng-keydown="keypressOpenUrl($event)">\r\n\t\t\t<a class="btn-text" ng-class="{\'adaHighlight\': wcagToggle}" data-url="{{ t.connectPageUrl }}" data-event="/yelp/connect"\r\n\t\t\t\ttabindex="1">\r\n\t\t\t\t{{ t.connectText }}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t\t<div ng-switch-when="TRIP_ADVISOR" id="cwu-tripadvisor" class="cwu-btn cwu-btn-icon" ng-click="openUrl($event)" ng-keydown="keypressOpenUrl($event)">\r\n\t\t\t<a class="btn-text" ng-class="{\'adaHighlight\': wcagToggle}" data-url="{{ t.connectPageUrl }}"\r\n\t\t\t\tdata-event="/tripadvisor/connect" tabindex="1">\r\n\t\t\t\t{{ t.connectText }}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t\t<div ng-switch-when="CUSTOM" id="cwu-custom" class="cwu-btn cwu-btn-icon" ng-click="openUrl($event)" ng-keydown="keypressOpenUrl($event)"\r\n\t\t\t\tng-style="t.connectImageUrl !== null ? {\'background-image\': \'url({{ t.connectImageUrl }})\'} : \'\'">\r\n\t\t\t<a class="btn-text" ng-class="{\'adaHighlight\': wcagToggle}" data-url="{{ t.connectPageUrl }}"\r\n\t\t\t\tdata-event="/custom/connect" tabindex="1">\r\n\t\t\t\t{{ t.connectText }}\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t\t<div ng-switch-when="SECOND_CUSTOM" id="cwu-custom" class="cwu-btn cwu-btn-icon" ng-click="openUrl($event)" ng-keydown="keypressOpenUrl($event)"\r\n\t\t\t\tng-style="t.connectImageUrl !== null ? {\'background-image\': \'url({{ t.connectImageUrl }})\'} : \'\'">\r\n\t\t\t<a class="btn-text" ng-class="{\'adaHighlight\': wcagToggle}" data-url="{{ t.connectPageUrl }}"\r\n\t\t\t\tdata-event="/custom/connect" tabindex="1">\r\n\t\t\t\t{{ t.connectText }}\r\n\t\t\t</a>\r\n\t\t</div>\t\t\r\n\t</span>\r\n'),a.put("app/js/prompts/gorec/gorec-share.tpl.html",'<div class="prompt mobileScaleGroup goRecSharePrompt" ng-hide="dd.prompt.hideTrigger" id="prompt_{{dd.prompt.id}}" ng-class="{\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}">\r\n\t<div ms-prompt-header="dd.prompt" ms-add-class="\'arrow-down\'"/>\r\n\t<div class="content">\r\n\t\t<div class="promptInput">\r\n\t\t\t<div ng-if="dd.prompt.goRecDTO.stars" class="goRecStars">\r\n\t\t\t\t<span ng-repeat="star in dd.prompt.goRecDTO.stars" class="goRecStar"  aria-hidden="true" data-icon="{{star.filled ? \'&#xea3e;\' : \'&#xea3f;\'}}" ng-class="{ filled: star.filled }"></span>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div ng-if="dd.prompt.goRecDTO.comment">\r\n\t\t\t\t<span class="goRecComment">"{{dd.prompt.goRecDTO.comment}}"</span>\t\r\n\t\t\t</div>\r\n\t\t\t<div ng-if="!dd.prompt.goRecDTO.comment">\r\n\t\t\t\t<textarea id="smComment_{{dd.prompt.id}}"\r\n\t\t\t\t\t\t  aria-label="{{dd.prompt.text}}"\r\n\t\t\t\t\t\t  class="commentArea limited prompt"\r\n\t\t\t\t\t\t  ng-model="dd.answer.value"\r\n\t\t\t\t\t\t  placeholder="{{dd.prompt.placeholderText}}"\r\n\t\t\t\t\t\t  tabindex="1"\r\n\t\t\t\t\t\t  ms-auto-focus="{{dd.autoSelect}}">\r\n\t\t\t\t</textarea>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div ng-if="dd.prompt.goRecDTO.shareUsingText" class="goRecshareUsingText">\r\n\t\t\t\t{{dd.prompt.goRecDTO.shareUsingText}}\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div ng-repeat="enabledType in dd.prompt.goRecDTO.enabledTypes" ng-class="{goRecVert:dd.prompt.renderType==\'Vertical\'}" class="goRecBtnContainer">\r\n\t\t\t\t<div ng-switch="enabledType.typeName" \r\n\t\t\t\t\t class="goRecBtn goRecBtn_{{enabledType.typeName}}"\r\n\t\t\t\t\t ng-class="{\'adaHighlight\': wcagToggle}"\r\n\t\t\t\t\t id="goRecShareOn_{{enabledType.typeName}}_{{dd.prompt.id}}"\r\n\t\t\t\t\t share="true" ng-class={sharedOn:enabledType.sharedOn}\r\n\t\t\t\t\t ng-keydown="doNav($event)"\r\n\t\t\t\t\t tabindex="1"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div ng-switch-when="FACEBOOK" class="inner" facebook-share="enabledType">\r\n\t\t\t\t\t\t<div aria-hidden="true" data-icon="&#xec99;" class="iconFont"></div>\r\n\t\t\t\t\t\t<div class="goRecBtnText" aria-label="{{$index === 0 ? promptTextNoHtml : \'\'}} {{dd.prompt.goRecDTO.shareUsingText}} {{enabledType.label}}">{{enabledType.label}}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div ng-switch-when="TWITTER_HANDLE" class="inner" twitter-share="enabledType">\r\n\t\t\t\t\t\t<div aria-hidden="true" data-icon="&#xe867;" class="iconFont"></div>\r\n\t\t\t\t\t\t<div class="goRecBtnText" aria-label="{{$index === 0 ? promptTextNoHtml : \'\'}} {{dd.prompt.goRecDTO.shareUsingText}} {{enabledType.label}}">{{enabledType.label}}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div ng-switch-when="GOOGLE" class="inner" google-share="enabledType" id="goRecShareOn_inner_{{enabledType.typeName}}_{{dd.prompt.id}}">\r\n\t\t\t\t\t\t<div aria-hidden="true" data-icon="&#xe8c2;" class="iconFont"></div>\r\n\t\t\t\t\t\t<div class="goRecBtnText" aria-label="{{$index === 0 ? promptTextNoHtml : \'\'}} {{dd.prompt.goRecDTO.shareUsingText}} {{enabledType.label}}">{{enabledType.label}}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div ng-switch-when="EMAIL" class="inner" email-share="enabledType">\r\n\t\t\t\t\t\t<div aria-hidden="true" data-icon="&#xeba5;" class="iconFont"></div>\r\n\t\t\t\t\t\t<div class="goRecBtnText" aria-label="{{$index === 0 ? promptTextNoHtml : \'\'}} {{dd.prompt.goRecDTO.shareUsingText}} {{enabledType.label}}">{{enabledType.label}}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div ng-if="dd.prompt.goRecDTO.noThanksText" class="goRecNoThanksText" ng-hide="hideNoThanksText()">\r\n\t\t\t\t<a ng-class="{\'adaHighlight\': wcagToggle}" ng-click="clickNoThanks()" ng-keydown="doNav($event, \'noThx\')" tabindex="1">\r\n\t\t\t\t\t{{dd.prompt.goRecDTO.noThanksText}}\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),a.put("app/js/prompts/image-upload.tpl.html",'<div class="imageUpload" id="prompt_image_upload_{{dd.prompt.id}}" ng-form="imageInput">\n\t<div class="image-capture" role="region">\n\t\t<div class="image-upload-container" role="button" ngf-drop="upload($file)" ngf-select="upload($file)" ngf-drag-over-class="\'dragover\'" ngf-pattern="\'image/*\'" ngf-max-size="\'10MB\'" ng-if="!fileInfos.length">\n\t\t\t<div class="icon-picture-container" tabindex="1" ng-keydown="keypressWCAG($event.keyCode, $event)">\n\t\t\t\t<div class="icon-picture" data-icon="&#xec3d"></div>\n\t\t\t</div>\n\t\t\t<div class="upload-photo-message" ng-bind-html="dd.prompt.msgs.upload_photo|unsafe"></div>\n\t\t</div>\n\n\t\t<div class="image-actioned-container" role="status" ng-if="fileInfos.length">\n\t\t\t<div class="image-chosen-container" ng-repeat="fileInfo in fileInfos">\n\t\t\t\t<img ngf-thumbnail="fileInfo.file" class="thumb" ng-class="{uploading:fileInfo.uploading}"></button>\n\t\t\t\t<span tabindex="1" data-icon="&#xea46" class="icon-remove" ng-click="remove(fileInfo)" ng-keyup="removeKeyup($event, fileInfo)" role="button" aria-label="{{dd.prompt.msgs.remove|unsafe}}"></span>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class="image-upload-more-container" tabindex="1" role="button" ng-keyup="uploadKeyup($event)"\n\t\t\tngf-drop="upload($file)" ngf-select="upload($file)" ngf-drag-over-class="\'dragover\'" ngf-pattern="\'image/*\'"\n\t\t\tngf-max-size="\'10MB\'" ng-if="fileInfos.length > 0 && fileInfos.length < dd.prompt.imageCount" aria-label="{{dd.prompt.msgs.upload_photo|unsafe}}"\n\t\t>\n\t\t\t<div class="icon-plus" data-icon="&#xec3d"></div>\n\t\t</div>\n\t\t\n\t\t<div class="image-progress-container" ng-if="uploadingCount">\n\t\t\t<div class="image-progress-bar">\n\t\t\t\t<div class="image-progress-percent" ng-style="{\'width\': uploadPercent+\'%\'}"></div>\n\t\t\t</div>\n\t\t\t\x3c!-- <div data-icon="&#xea45" class="icon-ok" ng-if="!uploading"></div> --\x3e\n\t\t</div>\n\t</div>\n</div>'),a.put("app/js/prompts/location-picker.tpl.html",'<div class="prompt locationPickerPrompt"  ng-hide="dd.prompt.hideTrigger" id="prompt_{{dd.prompt.id}}"  ng-class="{\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}">\r\n\t<div ms-prompt-header="dd.prompt" />\r\n\t\r\n\t<div role="listbox" ng-repeat="level in dd.prompt.levels" class="level" id="{{$last ? \'locationLevel\' : \'\'}}" on-finish-render>\r\n\t\t<div  class="levelLabel levelData">{{level.levelText}}</div>\r\n\t\t<div class="placeHolderText hiddenData">{{level.placeholderText}}</div>\r\n\t\t<div ng-if="$index == 0 && dd.prompt.levels.length > 1" class="levelData">\r\n\t\t\t<div class="ui-select btn btn-all topLevel" ng-class="{\'adaHighlight\': wcagToggle}" tabindex="-1">\r\n\t\t\t\t<span class="btn-inner btn-all">\r\n\t\t\t\t\t<span class="btn-text"></span>\r\n\t\t\t\t\t<span class="btn-icon"></span>\r\n\t\t\t\t</span>\r\n\t\t\t\t<select id="topLevelSelector" class="levelSelect tabindex_prompt_{{dd.prompt.id}}" onchange="levelSelectionTrigger($(this))" ms-auto-focus="{{dd.autoSelect}}" tabindex="1"></select>\r\n\t\t\t\t<span class="levelId hiddenData">{{level.unitId}}</span>\r\n\t\t\t\t<span id="preselectedValue" class="hiddenData" >{{level.preselectedValueId}}</span>\r\n\t\t\t\t<span id="preselectedPreviousLevel" class="hiddenData">{{level.preselectedPreviousLevelId}}</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div ng-if="$index>0 || dd.prompt.levels.length==1" class="levelData">\r\n\t\t\t<div class="ui-select btn btn-all" ng-class="{\'adaHighlight\': wcagToggle}" tabindex="-1">\r\n\t\t\t\t<span class="btn-inner btn-all">\r\n\t\t\t\t\t<span class="btn-text"></span>\r\n\t\t\t\t\t<span class="btn-icon"></span>\r\n\t\t\t\t</span>\r\n\t\t\t\t<select ng-if="!level.isLocationLevel" id="{{\'levelSelector_\' + $index}}" class="levelSelect"  onchange="levelSelectionTrigger($(this))" tabindex="1"/>\r\n\t\t\t\t<select ng-if="level.isLocationLevel" id="locationSelector" class="levelSelect" onchange="locationChange($(this).val());" tabindex="1"/>\r\n\t\t\t\t<span class="levelId hiddenData">{{level.unitId}}</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<img class="spinner" src="../image/spinner.gif" />\r\n\t</div>\r\n\t\r\n\t\x3c!-- Error Content --\x3e\r\n\t<div ms-show-errors="dd"/>\r\n\t\t\r\n</div>\r\n\t'),a.put("app/js/prompts/main-image.tpl.html",'<div role="img" ng-if="mainImage.url" class="logoContainer">\r\n\t<div class="promptArea">\r\n\t\t<img ng-src="{{mainImage.url}}" alt="{{mainImage.alt}}"/>\r\n\t</div>\r\n\t<div id="logoBar" class="separatorBar" />\r\n</div>\r\n<div ng-if="!mainImage.url" class="noLogoPadding" />'),a.put("app/js/prompts/numeric.tpl.html",'<div class="prompt clearfix numericPrompt" id="prompt_{{dd.prompt.id}}" ng-hide="dd.prompt.hideTrigger" ng-class="{\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}">\r\n\t<div ms-prompt-header="dd.prompt" ms-add-class="\'arrow-down\'"/>\r\n\t\r\n\t<div ng-if="dd.prompt.multiBoxData">\r\n\t\t<div ms-multiple-text="dd" />\r\n\t</div>\r\n\t\r\n\t<div ng-if="dd.prompt.multiBoxData == null || dd.prompt.multiBoxData == \'\'" ng-form="promptForm">\r\n\t\t<div class="promptInput numericInput">\r\n\t\t\x3c!-- don\'t use type=tel because some mobile devices don\'t include the \'.\' on the keyboard --\x3e\r\n\t\t\x3c!-- If Safari 5.1.7 (last windows version) support is needed, you can add this attribute on the input element(s):   ng-keyup="forceApply($event)" --\x3e\r\n\t\t\x3c!-- IOS version 13 appears to have broken numeric keyboard as it no longer shows decimals only numbers. Switching to decimal keyboard for now. This will not affect Android as that will default to numeric and should have no issues. --\x3e\r\n\t\t\t<input \ttype="text"\r\n\t\t\t\t\tinputmode="decimal"\r\n\t\t\t\t\tx-inputmode="decimal"\r\n\t\t\t\t\tng-pattern="dd.prompt.regex !== undefined ? dd.prompt.regex : \'\'"\r\n\t\t\t\t\tid="promptInput_{{ dd.prompt.id }}" \r\n\t\t\t\t\tname="promptField"\r\n\t\t\t\t\trole="spinbutton"\r\n\t\t\t\t\tng-model="dd.answer.value"\r\n\t\t\t\t\tim-mask="{{dd.prompt.mask}}"\r\n\t\t\t\t\tim-mask-post-with-mask="false"\r\n\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\tng-maxlength="dd.prompt.maxLength"\r\n\t\t\t\t\tmaxlength="{{ dd.prompt.maxLength }}"\r\n\t\t\t\t\tng-minlength="dd.prompt.minLength"\r\n\t\t\t\t\tplaceholder="{{ dd.prompt.placeholderText }}"\r\n\t\t\t\t\tng-class="[inputClassName, dataIcon]"\r\n\t\t\t\t\tms-auto-focus="{{wcagToggle ? false : dd.autoSelect}}"\r\n\t\t\t\t\taria-label="{{ariaLabel}}"\r\n\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\ttabindex="1"/>\r\n\t\t\t\r\n\t\t\t<span aria-hidden="true" data-icon="&#xeb6d;" class="iconFont" ng-show="dd.prompt.dataIcon"></span>\r\n\t\t\t\x3c!-- Error Content --\x3e\r\n\t\t\t<div class="errors" ms-show-errors="dd"/>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n'),a.put("app/js/prompts/offer-code-search-prompt.tpl.html",'<div class="prompt" ng-hide="dd.prompt.hideTrigger" id="prompt_{{dd.prompt.id}}" ng-class="{\'triggered\':dd.prompt.isTriggered,\'concurrentTriggered\':dd.prompt.concurrentTriggered}">\t\r\n\t\t\r\n\t<div class="prompt mobileScaleGroup offerSearch">\r\n\t\t<div ms-prompt-header="dd.prompt"></div>\r\n\t\t<div class="promptInput">\r\n\t\t\t<span ng-form="promptForm">\r\n\t\t\t\t<input \tid="promptInput_{{dd.prompt.id}}" \r\n\t\t\t\t\t\tname="promptField" \r\n\t\t\t\t\t\tng-model="postalcode" \r\n\t\t\t\t\t\ttype="text" \r\n\t\t\t\t\t\trole="text"\r\n\t\t\t\t\t\taria-label="{{dd.prompt.text}}"\r\n\t\t\t\t\t\tplaceholder="zip"\r\n\t\t\t\t\t\tms-auto-focus="{{wcagToggle ? false : dd.autoSelect}}"\r\n\t\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\t\tng-class="[inputClassName, dataIcon]"\r\n\t\t\t\t\t\ttabindex="1" />\r\n\t\t\t\t\t\t\r\n\t\t\t\t<button ng-click="loadOfferCodes()" id="offerCodeSearchLink" class="offerCodeSearchLink" tabindex="1">\r\n\t\t\t\t\t<span id="offerCodeSearchButton">Search</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<span aria-hidden="true" data-icon="&#xea3b;" class="iconFont"></span>\r\n\t\t\t\t\r\n\t\t\t\t<div class="errors" ms-show-errors="dd"/>\r\n\t\t\t</span>\r\n\t\t\t\r\n\t\t\t<div id="offCodeSearchPulldown" class="btn btn-all" onclick="expandOfferCodes(this);">\r\n\t\t\t\t<span class="btn-inner btn-all">\r\n\t\t\t\t\t<span class="btn-text">Select Location</span>\r\n\t\t\t\t\t<span class="btn-icon"></span>\r\n\t\t\t\t</span>\r\n\t\t\t\t\r\n\t\t\t\t<div role="menu" id="offerCodesReturned" class="scrollable">\r\n\t\t\t\t\t<div role="menuitem" ng-repeat="location in returnedItems" ng-model="returnedItems" on-finish-render="test">\r\n\t\t\t\t\t\t<a href="javascript:void(0)" onClick="selectLocation(this, event)" tabindex="-1">\r\n\t\t\t\t\t\t\t<div class="location">\r\n\t\t\t\t\t\t\t\t<div class="details">\r\n\t\t\t\t\t\t\t\t\t<h2>{{location.locationName}}</h2>\r\n\t\t\t\t\t\t\t\t\t<div id="offerCode" style="display:none" class="hidden">{{location.offerCode}}</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div> \x3c!-- end btn --\x3e\r\n\r\n\t\t\t<input type="text" \r\n\t\t\t\tstyle="display: none;"\r\n\t\t\t\tid="ocSearch_value" \r\n\t\t\t\tname="promptField"\r\n\t\t\t\tng-model="dd.answer.value" \r\n\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\ttabindex="0"/>\r\n\t\t\t\r\n\t\t\t<div class="loadingOverlay"><img src="../image/spinner.gif" class="loadingIcon"></div>\r\n\t\t\t\r\n\t\t</div> \x3c!-- end promptInput --\x3e\r\n\t</div> \x3c!-- end prompt --\x3e\r\n</div>'),a.put("app/js/prompts/prompt-header-text.tpl.html",'<span class="text">\r\n\t<span ng-bind-html="promptObject.text | unsafe"></span>\r\n\t<span ng-show="promptObject.required && promptObject.showRequiredMarker" class="reqMarker">*</span>\r\n</span>\r\n\t\t'),a.put("app/js/prompts/prompt-header.tpl.html",'\t\x3c!-- Question Text --\x3e\r\n\t\t<div ng-if="promptObject.text" role="heading" ng-class="{\'promptText__child\':childPromptHeader==true, \'promptText__header\':childPromptHeader!=true}" id="promptText_{{ promptObject.id }}">\r\n\t\t\t<div class="content {{addClass}}">\r\n\t\t\t\t<span ms-prompt-header-text="promptObject"/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t'),a.put("app/js/prompts/show-errors.tpl.html",'<div ng-show="!promptForm.promptField.$pristine && promptForm.promptField.$error.maxlength" class="errorMsg" role="alert" ng-class="{vis:promptForm.promptField.$error.maxlength}" ng-bind-html="errorManager.getErrorMessage(dd.prompt,\'maxlength\') |unsafe"/>\r\n<div ng-show="!promptForm.promptField.$pristine && promptForm.promptField.$error.minlength" class="errorMsg" role="alert" ng-class="{vis:promptForm.promptField.$error.minlength}" ng-bind-html="errorManager.getErrorMessage(dd.prompt,\'minlength\') |unsafe"/>\r\n<div ng-show="!promptForm.promptField.$pristine && promptForm.promptField.$error.email" class="errorMsg" role="alert" ng-class="{vis:promptForm.promptField.$error.email}" ng-bind-html="errorManager.getErrorMessage(dd.prompt,\'email\') |unsafe"/>\r\n<div ng-show="!promptForm.promptField.$pristine && promptForm.promptField.$error.tel" class="errorMsg" role="alert" ng-class="{vis:promptForm.promptField.$error.tel}" ng-bind-html="errorManager.getErrorMessage(dd.prompt,\'tel\') |unsafe"/>\r\n<div ng-show="!promptForm.promptField.$pristine && promptForm.promptField.$error.number" class="errorMsg" role="alert" ng-class="{vis:promptForm.promptField.$error.number}" ng-bind-html="errorManager.getErrorMessage(dd.prompt,\'number\') |unsafe"/>\r\n<div ng-show="!promptForm.promptField.$pristine && promptForm.promptField.$error.pattern" class="errorMsg" role="alert" ng-class="{vis:promptForm.promptField.$error.pattern}" ng-bind-html="errorManager.getErrorMessage(dd.prompt,\'pattern\') |unsafe"/>\r\n<div ng-show="!promptForm.promptField.$pristine && promptForm.promptField.$error.mask" class="errorMsg" role="alert" ng-class="{vis:promptForm.promptField.$error.mask}" ng-bind-html="errorManager.getErrorMessage(dd.prompt,\'mask\') |unsafe"/>\r\n<div ng-show="!promptForm.promptField.$pristine && promptForm.promptField.$error.date" class="errorMsg" role="alert" ng-class="{vis:promptForm.promptField.$error.date}" ng-bind-html="errorManager.getErrorMessage(dd.prompt,\'date\') |unsafe"/>\r\n<div ng-show="!promptForm.promptField.$pristine && promptForm.promptField.$error.server" class="errorMsg" role="alert" ng-class="{vis:promptForm.promptField.$error.server}" ng-bind-html="errorManager.getErrorMessage(dd.prompt,\'server\') |unsafe"/>\r\n<div ng-show="!promptForm.promptField.$pristine && promptForm.promptField.$error.custom" class="errorMsg" role="alert" ng-class="{vis:promptForm.promptField.$error.custom}" ng-bind-html="errorManager.customMessage |unsafe"/>\r\n<div ng-show="!promptForm.promptField.$pristine && promptForm.promptField.$error.required" class="errorMsg" role="alert" ng-class="{vis:promptForm.promptField.$error.required}" ng-bind-html="errorManager.getErrorMessage(dd.prompt,\'required\') |unsafe"/>'),a.put("app/js/prompts/show-group-errors.tpl.html",'<div ng-show="groupForm.$invalid" role="status" class="errorMsg">\r\n    {{errorManager.getErrorMessage(promptDirectiveData.prompt,\'required\')}}\r\n</div>\r\n'),a.put("app/js/prompts/sweepstakes-instant-win.tpl.html",'<div class="prompt sweepstakesInstantWin" role="note" ng-form="promptForm" id="prompt_{{dd.prompt.id}}" ng-hide="dd.prompt.hideTrigger" ng-class="{\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}">\r\n\t<div ng-if="dd.prompt.text">\r\n\t\t<div ms-prompt-header="dd.prompt" />\r\n\t</div>\t\r\n\t<div id="instantWinText_{{dd.prompt.id}}" ng-bind-html="dd.prompt.instantWinText | unsafe" />\r\n</div>'),a.put("app/js/prompts/text-composite.tpl.html",'<div class="prompt clearfix compositeTextPrompt textPrompt" ng-hide="dd.prompt.hideTrigger" id="prompt_text_composite_{{dd.prompt.id}}" ng-class="{\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}">\r\n\t<div ms-prompt-header="dd.prompt" ms-add-class="\'arrow-down\'"/>\r\n\t<div ng-if="dd.prompt.multiBoxData">\r\n\t\t<div ms-multiple-text="dd" />\r\n\t</div>\r\n\t<div ng-if="dd.prompt.multiBoxData == null || dd.prompt.multiBoxData == \'\'" ng-form="promptForm">\r\n\t\t<div class="promptInput textInput compositeTextInput">\r\n\t\t\t<input \ttype=\'text\' \r\n\t\t\t\t\trole="text"\r\n\t\t\t\t\tid="promptInput_{{ dd.prompt.id }}" \r\n\t\t\t\t\tname=\'promptField\'\r\n\t\t\t\t\tng-maxlength="{{ dd.prompt.maxLength }}" \r\n\t\t\t\t\tmaxlength="{{ dd.prompt.maxLength }}"\r\n\t\t\t\t\tng-minlength="{{ dd.prompt.minLength }}"\r\n\t\t\t\t\tsize="{{ dd.prompt.maxLength }}" \r\n\t\t\t\t\tng-model="dd.answer.value"\r\n\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\tng-class="[inputClassName, dataIcon]"\r\n\t\t\t\t\tplaceholder="{{ dd.prompt.placeholderText }}"\r\n\t\t\t\t\tms-auto-focus="{{wcagToggle ? false : dd.autoSelect}}"\r\n\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\taria-label="{{ariaLabel}}"\r\n\t\t\t\t\ttabindex="1" />\r\n\t\t\t<div class="errors" ms-show-errors="dd"/>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),a.put("app/js/prompts/text-multiple.tpl.html",'\x3c!-- If Safari 5.1.7 (last Windows version) support is needed , you can add this attribute on the input element(s):   ng-keyup="forceApply($event)" --\x3e\r\n<div class="promptInput textInput" ng-form="promptFormTextMultiple" ng-switch="" on="dd.prompt.subType" ng-hide="dd.prompt.hideTrigger" id="prompt_text_multiple_{{dd.prompt.id}}" ng-class="{\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}">\r\n\t<div ng-switch-when="NUMBER">\r\n\t\t<div ng-repeat="segment in segments" class="text-segment noFocus" ng-form="promptForm" ng-submit="updateErrorMessage(true)">\r\n\t\t\t<span ng-if="$index > 0 && delimiter != null">{{delimiter}}</span>\r\n\t\t\t<input \ttype="number"\r\n\t\t\t\t\trole="spinbutton"\r\n\t\t\t\t\tng-pattern="dd.prompt.regex !== undefined ? dd.prompt.regex : \'\'"\r\n\t\t\t\t\tid="promptInput_{{ dd.prompt.id }}_{{ $index }}" \r\n\t\t\t\t\tname="promptField" \r\n\t\t\t\t\tsize="{{ segment.length }}" \r\n\t\t\t\t\tng-model="segment.value"\r\n\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\tng-maxlength="{{ segment.length }}" \r\n\t\t\t\t\tmaxlength="{{ segment.length }}"\r\n\t\t\t\t\tng-minlength="{{ segment.length }}"\r\n\t\t\t\t\tng-class="[inputClassName, inputClassName + \'_\' + $index, dataIcon]"\r\n\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\tng-change="inputHandler($index); updateErrorMessage(true)"\r\n\t\t\t\t\ttabindex="1"\r\n\t\t\t\t\taria-label="{{ariaLabel}}" />\r\n\t\t</div>\r\n\t\t<div class="errors" id="numericSegmentError_{{dd.prompt.id}}">\r\n\t\t\t\t<div role="status" class="errorMsg minlength"></div>\r\n\t\t\t\t<div role="status" class="errorMsg email"></div>\r\n\t\t\t\t<div role="status" class="errorMsg tel"></div>\r\n\t\t\t\t<div role="status" class="errorMsg number"></div>\r\n\t\t\t\t<div role="status" class="errorMsg server"></div>\r\n\t\t\t\t<div role="status" class="errorMsg required"></div>\r\n\t\t\t</div>\r\n\t</div> \r\n\t<div ng-switch-default="">\r\n\t\t<div ng-repeat="segment in segments" class="text-segment noFocus" ng-form="promptForm" ng-submit="updateErrorMessage(false)">\r\n\t\t\t<span ng-if="$index > 0 && delimiter != null">{{delimiter}}</span>\r\n\t\t\t<input \ttype="text"\r\n\t\t\t\t\trole="text"\r\n\t\t\t\t\tid="promptInput_{{ dd.prompt.id }}_{{ $index }}" \r\n\t\t\t\t\tname="promptField"\r\n\t\t\t\t\tsize="{{ segment.length }}" \r\n\t\t\t\t\tng-model="segment.value"\r\n\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\tng-maxlength="{{ segment.length }}" \r\n\t\t\t\t\tmaxlength="{{ segment.length }}"\r\n\t\t\t\t\tng-minlength="{{ segment.length }}"\r\n\t\t\t\t\tng-class="[inputClassName, inputClassName + \'_\' + $index, dataIcon]"\r\n\t\t\t\t\tng-change="inputHandler($index); updateErrorMessage(false);"\r\n\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\ttabindex="1"\r\n\t\t\t\t\taria-label="{{ariaLabel}}"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div class="errors" id="textSegmentError_{{dd.prompt.id}}">\r\n\t\t\t<div role="status" class="errorMsg minlength"></div>\r\n\t\t\t<div role="status" class="errorMsg email"></div>\r\n\t\t\t<div role="status" class="errorMsg tel"></div>\r\n\t\t\t<div role="status" class="errorMsg number"></div>\r\n\t\t\t<div role="status" class="errorMsg server"></div>\r\n\t\t\t<div role="status" class="errorMsg required"></div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n'),a.put("app/js/prompts/text-scrambled.tpl.html",'<div class="prompt clearfix scrambledTextPrompt textPrompt" ng-hide="dd.prompt.hideTrigger" id="prompt_text_scrambled_{{dd.prompt.id}}" ng-class="{\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}">\r\n\t<div ms-prompt-header="dd.prompt" ms-add-class="\'arrow-down\'"/>\r\n\t<div ng-if="dd.prompt.multiBoxData">\r\n\t\t<div ms-multiple-text="dd" />\r\n\t</div>\r\n\t<div role="text" ng-if="dd.prompt.multiBoxData == null || dd.prompt.multiBoxData == \'\'" ng-form="promptForm">\r\n\t\t<div class="promptInput textInput scrambledTextInput">\r\n\t\t\t<input \ttype=\'text\' \r\n\t\t\t\t\tid="promptInput_{{ dd.prompt.id }}" \r\n\t\t\t\t\tname=\'promptField\'\r\n\t\t\t\t\tng-maxlength="{{ dd.prompt.maxLength }}" \r\n\t\t\t\t\tmaxlength="{{ dd.prompt.maxLength }}"\r\n\t\t\t\t\tng-minlength="{{ dd.prompt.minLength }}"\r\n\t\t\t\t\tsize="{{ dd.prompt.maxLength }}" \r\n\t\t\t\t\tng-model="dd.answer.value"\r\n\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\tng-class="[inputClassName, dataIcon]"\r\n\t\t\t\t\tplaceholder="{{ dd.prompt.placeholderText }}"\r\n\t\t\t\t\tms-auto-focus="{{dd.autoSelect}}"\r\n\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\taria-label="{{ariaLabel}}"\r\n\t\t\t\t\ttabindex="1" />\r\n\t\t\t<div class="errors" ms-show-errors="dd"/>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),a.put("app/js/prompts/text.tpl.html",'<div class="prompt clearfix textPrompt" id="prompt_{{dd.prompt.id}}" ng-hide="dd.prompt.hideTrigger"  ng-class="{\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}">\r\n\t<div ms-prompt-header="dd.prompt" ms-add-class="\'arrow-down\'"/>\r\n\t\r\n\t<div ng-if="dd.prompt.multiBoxData">\r\n\t\t<div ms-multiple-text="dd" />\r\n\t</div>\r\n\t\r\n\t<div ng-if="dd.prompt.multiBoxData == null || dd.prompt.multiBoxData == \'\'" ng-form="promptForm">\r\n\t\t\x3c!-- If Safari 5.1.7 (last Windows version) support is needed , you can add this attribute on the input element(s):   ng-keyup="forceApply($event)" --\x3e\r\n\t\t<div class="promptInput textInput" ng-switch="" on="dd.prompt.subType">\r\n\t\t\t\r\n\t\t\t<input \tng-switch-when="EMAIL" \r\n\t\t\t\t\ttype="email"\r\n\t\t\t\t\trole="text"\r\n\t\t\t\t\tid="promptInput_{{ dd.prompt.id }}" \r\n\t\t\t\t\tname="promptField" \r\n\t\t\t\t\tsize="{{ dd.prompt.maxLength }}"\r\n\t\t\t\t\tng-model="dd.answer.value"\r\n\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\tng-maxlength="{{ dd.prompt.maxLength }}" \r\n\t\t\t\t\tmaxlength="{{ dd.prompt.maxLength }}"\r\n\t\t\t\t\tng-minlength="{{ dd.prompt.minLength }}"\r\n\t\t\t\t\tplaceholder="{{ dd.prompt.placeholderText }}"\r\n\t\t\t\t\tng-class="[inputClassName, dataIcon]"\r\n\t\t\t\t\tng-pattern="/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/"\r\n\t\t\t\t\tms-auto-focus="{{wcagToggle ? false : dd.autoSelect}}"\r\n\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\taria-label="{{ariaLabel}}"\r\n\t\t\t\t\ttabindex="1"/>\r\n\t\t\t\r\n\t\t\t\x3c!-- use type=tel for numeric keyboard to work and masking see this: http://stackoverflow.com/questions/21177489/selectionstart-selectionend-on-input-type-number-no-longer-allowed-in-chrome--\x3e\t\r\n\t\t\t<input \tng-switch-when="NUMBER" \r\n\t\t\t\t\ttype="{{dd.prompt.mask ? \'text\' : \'tel\'}}"\r\n\t\t\t\t\tng-pattern="dd.prompt.regex !== undefined ? dd.prompt.regex : \'\'"\r\n\t\t\t\t\tid="promptInput_{{ dd.prompt.id }}" \r\n\t\t\t\t\tname="promptField" \r\n\t\t\t\t\trole="spinbutton"\r\n\t\t\t\t\tsize="{{ dd.prompt.maxLength }}" \r\n\t\t\t\t\tng-model="dd.answer.value"\r\n\t\t\t\t\tim-mask="{{dd.prompt.mask}}"\r\n\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\tng-maxlength="{{ dd.prompt.maxLength }}" \r\n\t\t\t\t\tmaxlength="{{ dd.prompt.maxLength }}"\r\n\t\t\t\t\tng-minlength="{{ dd.prompt.minLength }}"\r\n\t\t\t\t\tplaceholder="{{ dd.prompt.placeholderText }}"\r\n\t\t\t\t\tng-class="[inputClassName, dataIcon]"\r\n\t\t\t\t\tms-auto-focus="{{wcagToggle ? false : dd.autoSelect}}"\r\n\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\taria-label="{{ariaLabel}}"\r\n\t\t\t\t\ttabindex="1"/>\r\n\t\t\t\t\t\r\n\t\t\t<input \tng-switch-when="PHONE_US_CAN" \r\n\t\t\t\t\ttype="{{dd.prompt.mask && !dd.isSamsungPhone ? \'text\' : \'tel\'}}"\r\n\t\t\t\t\tid="promptInput_{{ dd.prompt.id }}" \r\n\t\t\t\t\tname="promptField" \r\n\t\t\t\t\trole="text"\r\n\t\t\t\t\tsize="{{ dd.prompt.maxLength }}" \r\n\t\t\t\t\tng-model="dd.answer.value"\r\n\t\t\t\t\tim-mask="{{dd.prompt.mask}}"\r\n\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\tng-maxlength="{{ dd.prompt.maxLength }}" \r\n\t\t\t\t\tmaxlength="{{ dd.prompt.maxLength }}"\r\n\t\t\t\t\tng-minlength="{{ dd.prompt.minLength }}"\r\n\t\t\t\t\tplaceholder="{{ dd.prompt.placeholderText }}"\r\n\t\t\t\t\tng-class="[inputClassName, dataIcon]"\r\n\t\t\t\t\tng-pattern="/^\\+?\\(?([0-9]{3})\\)?[-.\\s]?([0-9]{3})[-.\\s]?([0-9]{4})$/"\r\n\t\t\t\t\tms-auto-focus="{{wcagToggle ? false : dd.autoSelect}}"\r\n\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\taria-label="{{ariaLabel}}"\r\n\t\t\t\t\ttabindex="1"/>\r\n\t\t\t\t\t\r\n\t\t\t<input \tng-switch-default="" \r\n\t\t\t\t\ttype="text"\r\n\t\t\t\t\trole="text"\r\n\t\t\t\t\tid="promptInput_{{ dd.prompt.id }}" \r\n\t\t\t\t\tname="promptField" \r\n\t\t\t\t\tsize="{{ dd.prompt.maxLength }}" \r\n\t\t\t\t\tng-model="dd.answer.value"\r\n\t\t\t\t\tim-mask="{{dd.prompt.mask}}"\r\n\t\t\t\t\tng-required="dd.prompt.required"\r\n\t\t\t\t\tng-maxlength="{{ dd.prompt.maxLength }}" \r\n\t\t\t\t\tmaxlength="{{ dd.prompt.maxLength }}"\r\n\t\t\t\t\tng-minlength="{{ dd.prompt.minLength }}"\r\n\t\t\t\t\tplaceholder="{{ dd.prompt.placeholderText }}"\r\n\t\t\t\t\tng-class="[inputClassName, dataIcon]"\r\n\t\t\t\t\tms-auto-focus="{{wcagToggle ? false : dd.autoSelect}}"\r\n\t\t\t\t\tms-handle-error=""\r\n\t\t\t\t\taria-label="{{ariaLabel}}"\r\n\t\t\t\t\ttabindex="1"/>\r\n\t\t\t\t\t\r\n\t\t\t<span aria-hidden="true" data-icon="&#xeb6d;" class="iconFont" ng-show="dd.prompt.dataIcon"></span>\r\n\t\t\t\r\n\t\t\t\x3c!-- Error Content --\x3e\r\n\t\t\t<div class="errors" ms-show-errors="dd"/>\r\n\t\t\t\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n'),a.put("app/js/prompts/video-feedback.tpl.html",'<div role="presentation" class="prompt"  id="prompt_{{dd.prompt.id}}" ng-form="promptInput" ng-class="{\'triggered\':dd.prompt.isTriggered, \'noWebText\':!dd.prompt.text,\'concurrentTriggered\':dd.prompt.concurrentTriggered}" ng-hide="dd.prompt.hideTrigger">\r\n\t<div ms-prompt-header="dd.prompt" ms-add-class="\'arrow-down\'"/>   \r\n\t\r\n\t<div class="videoPrompt" style="text-align: center;">\r\n\t\t<div class="vpm-capture-widget"></div>\r\n\t\t\r\n\t</div>           \r\n\r\n                                                                         \r\n\r\n\r\n\x3c!-- //* FOR DEBUGGING *// --\x3e\r\n\x3c!-- {{dd.prompt.projectId}}\r\n<br><br>\r\n{{dd.uuid}}\r\n<br><br>\r\n{{dd.prompt.transcriptionFieldPromptId}}\r\n<br><br>\r\n{{dd.prompt.noThanksText}}\r\n<br><br>\r\n{{dd.prompt.minLength}}\r\n<br><br>\r\n{{dd.prompt.maxLength}}\r\n<br><br>\r\n{{dd.prompt.surveyLanguage}}\r\n<br><br>\r\n{{dd}} --\x3e\r\n')}]);